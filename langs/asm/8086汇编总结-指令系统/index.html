<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">



  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-center-simple.min.css?v=1.0.2" rel="stylesheet">




  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.5.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.5.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.5.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.5.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="目录  第一章 微型计算机概述 第二章 16位微处理器8086 第三章 指令系统 第四章 汇编语言程序设计 第五章 存储器 第六章 输入/输出接口设计 第七章 中断系统 第八章 可编程接口芯片 第九章 AD/DA 转换 第十章 串行通信  第三章 指令系统 指令系统基本概念 指令是使计算机执行某种特定操作的二进制编码 指令系统是所有指令的集合 一条指令通常包括两部">
<meta name="keywords" content="汇编,计算机原理">
<meta property="og:type" content="article">
<meta property="og:title" content="8086汇编总结-指令系统">
<meta property="og:url" content="https://plart.pw/langs/asm/8086汇编总结-指令系统/index.html">
<meta property="og:site_name" content="失乐园">
<meta property="og:description" content="目录  第一章 微型计算机概述 第二章 16位微处理器8086 第三章 指令系统 第四章 汇编语言程序设计 第五章 存储器 第六章 输入/输出接口设计 第七章 中断系统 第八章 可编程接口芯片 第九章 AD/DA 转换 第十章 串行通信  第三章 指令系统 指令系统基本概念 指令是使计算机执行某种特定操作的二进制编码 指令系统是所有指令的集合 一条指令通常包括两部">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-07-13T12:58:09.608Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="8086汇编总结-指令系统">
<meta name="twitter:description" content="目录  第一章 微型计算机概述 第二章 16位微处理器8086 第三章 指令系统 第四章 汇编语言程序设计 第五章 存储器 第六章 输入/输出接口设计 第七章 中断系统 第八章 可编程接口芯片 第九章 AD/DA 转换 第十章 串行通信  第三章 指令系统 指令系统基本概念 指令是使计算机执行某种特定操作的二进制编码 指令系统是所有指令的集合 一条指令通常包括两部">



  <link rel="alternate" href="/atom.xml" title="失乐园" type="application/atom+xml">




  <link rel="canonical" href="https://plart.pw/langs/asm/8086汇编总结-指令系统/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>8086汇编总结-指令系统 | 失乐园</title>
  











  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">失乐园</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">代码与机器</h1>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">30</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">6</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">58</span></a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  
  
  

  

    <a href="https://github.com/lartpang" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" style="fill: #222; color: #fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/langs/asm/8086汇编总结-指令系统/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">8086汇编总结-指令系统
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-03-11 00:00:00" itemprop="dateCreated datePublished" datetime="2018-03-11T00:00:00+08:00">2018-03-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:58:09" itemprop="dateModified" datetime="2018-07-13T20:58:09+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程与生活/" itemprop="url" rel="index"><span itemprop="name">编程与生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">17k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">30 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <h1 id="目录">目录</h1>
<ul>
<li>第一章 微型计算机概述</li>
<li>第二章 16位微处理器8086</li>
<li>第三章 指令系统</li>
<li>第四章 汇编语言程序设计</li>
<li>第五章 存储器</li>
<li>第六章 输入/输出接口设计</li>
<li>第七章 中断系统</li>
<li>第八章 可编程接口芯片</li>
<li>第九章 AD/DA 转换</li>
<li>第十章 串行通信</li>
</ul>
<h1 id="第三章-指令系统">第三章 指令系统</h1>
<h2 id="指令系统基本概念">指令系统基本概念</h2>
<p><strong>指令</strong>是使计算机执行某种特定操作的二进制编码</p>
<p><strong>指令系统</strong>是所有指令的集合</p>
<p>一条指令通常包括两部分</p>
<pre><code>操作码：规定所要执行的操作类型
操作数：所需要处理的数据或者数据的地址信息</code></pre>
<p>获得数据或者数据地址信息的方式称为 <strong>寻址方式</strong>，例：</p>
<pre><code>MOV   AX, 1234H</code></pre>
<p>指令中有两个操作数，将前者称为目的操作数，后者称为源操作数，该指令将1234H传送到寄存器AX中。</p>
<h2 id="cpu内部操作数寻址">CPU内部操作数寻址</h2>
<h3 id="数据寻址方式">数据寻址方式</h3>
<ol type="1">
<li><p>立即数寻址 指令中直接给出操作数，指令执行时可以立即得到，此时把操作数又称作“立即数” 例：</p>
<pre><code> MOV  AL,5  ;AL &lt;- 5</code></pre></li>
<li><p>寄存器寻址 操作数放在CPU内部的寄存器中，在指令中直接指出寄存器的名字 例：</p>
<pre><code> INC  CX    ;将CX的内容加1</code></pre></li>
<li><p>隐含寻址 指令已经默认是对CPU中的某个寄存器操作 例：</p>
<pre><code> DAA ;默认对AL进行十进制加法调整</code></pre>
<p>以上三种方式均直接从CPU内部获得数据，操作速度快</p></li>
<li><p>直接寻址 操作数放在存储器中，存储单元的有效地址直接由指令给出 例：</p>
<pre><code> MOV   SI, [2000H]   ;SI &lt;- (2000H，2001H)</code></pre>
<p>CPU执行单元EU根据指令的寻址方式计算出16位的偏移量，称为有效地址(EA)，一般用 [有效地址] 表示。</p></li>
<li><p>寄存器间接寻址 操作数一定在存储器中，存储单元的有效地址由寄存器指出,寄存器可以为BX、BP、SI、DI， 例：</p>
<pre><code> MOV  AX, [BX]</code></pre>
<p>若需要对其它段寻址，则必须用前缀指出段寄存器名，又称“段超越” 例：</p>
<pre><code> MOV    BL, ES:[SI]     ;BL  &lt;-  扩展段1000H单元的内容</code></pre>
<p>注：IP只能在代码段寻址，SP只能在堆栈段寻址，不能进行段超越</p></li>
<li><p>寄存器相对寻址 操作数的有效地址由寄存器内容加上一个8位或16位的偏移量得到 例：</p>
<pre><code> MOV   AX, [BX+1000H]  ;AX  &lt;-  BX+1000H 所指向的存储单元内容</code></pre>
<p>若BX = 2000H，则将数据段(3000H, 3001H）的内容传送给AX</p>
<p>指令也可书写为：</p>
<pre><code> MOV   AX, 1000H[BX] </code></pre></li>
<li><p>基址变址寻址 操作数的有效地址由基址寄存器和变址寄存器的内容相加产生 例：</p>
<pre><code> MOV   AX, [BP+SI]  ;AX &lt;- (BP+SI)</code></pre></li>
<li><p>相对基址变址寻址 操作数的有效地址由基址寄存器、变址寄存器和偏移量三者相加产生 例： MOV AX, [BX+SI+1000H]　;AX &lt;- (BX+SI+1000H)</p>
<p>相对基址变址寻址应用 例：若访问堆栈段中的数组A[100]时，可以用BP存放栈顶地址，用偏移量表示数组中第一个元素到栈顶的距离，用变址寄存器SI（或DI）指向具体数组元素</p></li>
</ol>
<p>第4～8种寻址方式，操作数一定在存储器中，由于计算EA、总线操作需要时间，因此比1～3方式慢</p>
<h3 id="io端口寻址">I/O端口寻址</h3>
<p><strong>操作数在I/O端口中时，必须通过累加器（AX或AL）实现对端口的访问</strong></p>
<ol type="1">
<li><p>直接端口寻址 — 指令直接提供8位端口的地址 例：</p>
<p>IN AL, 63H ;AL &lt;- (63H)</p>
<p>端口寻址时，地址不加[ ]，当端口地址可用一个字节来表示时,可使用直接端口寻址</p></li>
<li><p>间接端口寻址 — 由DX寄存器给出16位端口地址 例：</p>
<pre><code> MOV  DX, 162H
 IN   AX, DX</code></pre>
<p>从端口162H读取一个字的数据传送到AX中，DX间接表示端口地址 比较：</p>
<pre><code> MOV  AX, DX    ;AX &lt;- DX
 IN   AX, DX    ;AX &lt;- (DX)</code></pre></li>
</ol>
<h2 id="指令格式">指令格式</h2>
<p>指令一般由1～6个字节组成，具体格式如下：</p>
<figure>
<img src="" alt="指令格式"><figcaption>指令格式</figcaption>
</figure>
<ol type="1">
<li>字节1
<ul>
<li>OPCODE： 指令操作码</li>
<li>D： 操作数传输方向(立即数指令和串操作指令除外)
<ul>
<li>D=0，Reg为源操作数</li>
<li>D=1，Reg为目的操作数</li>
</ul></li>
<li>W： 操作数字节长度
<ul>
<li>W=0，字节操作</li>
<li>W=1，字操作</li>
</ul></li>
</ul></li>
<li>字节2，寻址方式
<ul>
<li>MOD：寻址方式字段
<ul>
<li>00＝存储器方式，指令中无偏移量</li>
<li>01＝存储器方式，指令中有8位偏移量</li>
<li>10＝存储器方式，指令中有16位偏移量</li>
<li>11＝寄存器方式，指令中无偏移量</li>
</ul></li>
<li>Reg：寄存器编码字段
<ul>
<li>000=AL/AX 100=AH/SP</li>
<li>001=CL/CX 101=CH/BP</li>
<li>010=DL/DX 110=DH/SI</li>
<li>011=BL/BX 111=BH/DI</li>
</ul></li>
<li>R/M：寄存器/存储器字段
<ul>
<li>在MOD=11,寄存器模式下，R/M给出第二个操作数的寄存器编码</li>
<li>在MOD≠11,存储器模式下，R/M给出计算有效地址的方法</li>
</ul></li>
</ul>
<figure>
<img src="" alt="计算有效地址"><figcaption>计算有效地址</figcaption>
</figure></li>
<li>字节3～字节6
<ul>
<li>DISP：存储器操作数地址偏移量，长度由MOD字段定义</li>
<li>DATA：指令中的立即数</li>
</ul>
<p>例：</p>
<pre><code> MOV   AX, [BX]              ;指令码为：8B 07
 MOV   [BX+SI+2000H], 2345H  ;指令码为：C7 80 00 20 45 23
 MOV   AX, BX                ;指令码为：89 D8</code></pre></li>
</ol>
<h2 id="指令介绍">8086指令介绍</h2>
<p>8086 CPU共有133条指令，根据操作性质，可分为：</p>
<ul>
<li>传输指令</li>
<li>算术运算指令</li>
<li>逻辑运算和移位指令</li>
<li>串操作指令</li>
<li>控制转移指令</li>
</ul>
<p>操作数的符号表示</p>
<table>
<thead>
<tr class="header">
<th>符号</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>DST</td>
<td>目的操作数</td>
</tr>
<tr class="even">
<td>SRC</td>
<td>源操作数</td>
</tr>
<tr class="odd">
<td>TARGET</td>
<td>循环、转移和调用指令中的目的操作数</td>
</tr>
<tr class="even">
<td>REG</td>
<td>寄存器操作数，字节或字</td>
</tr>
<tr class="odd">
<td>REG8</td>
<td>8位寄存器操作数，字节</td>
</tr>
<tr class="even">
<td>REG16</td>
<td>16位寄存器操作数，字</td>
</tr>
<tr class="odd">
<td>MEM</td>
<td>存储器操作数，字节或字</td>
</tr>
<tr class="even">
<td>MEM8</td>
<td>8位存储器操作数，字节</td>
</tr>
<tr class="odd">
<td>MEM16</td>
<td>16位存储器操作数，字</td>
</tr>
<tr class="even">
<td>MEM32</td>
<td>32位存储器操作数，双字</td>
</tr>
<tr class="odd">
<td>ACC</td>
<td>累加器AL或AX</td>
</tr>
<tr class="even">
<td>SEG_REG</td>
<td>段寄存器</td>
</tr>
<tr class="odd">
<td>IMM</td>
<td>立即操作数，字节或字</td>
</tr>
<tr class="even">
<td>IMM8</td>
<td>立即操作数，字节</td>
</tr>
<tr class="odd">
<td>IMM16</td>
<td>立即操作数，字</td>
</tr>
<tr class="even">
<td>SHORT_LABEL</td>
<td>短标号，8位偏移量</td>
</tr>
<tr class="odd">
<td>NEAR_LABLE</td>
<td>近标号，16位地址或偏移量</td>
</tr>
<tr class="even">
<td>FAR_LABLE</td>
<td>远标号，32位地址</td>
</tr>
</tbody>
</table>
<h3 id="传送类指令">传送类指令</h3>
<h4 id="一通用数据传送指令">（一）通用数据传送指令</h4>
<ul>
<li>MOV DST, SRC
<ul>
<li>操作：DST &lt;- SRC</li>
<li>说明：
<ul>
<li>DST和SRC的组合关系是：
<ul>
<li>REG/MEM &lt;-- IMM</li>
<li>REG/MEM &lt;-&gt; REG</li>
<li>REG/MEM &lt;-&gt; SEG_REG</li>
</ul></li>
<li>CS、IP和立即数不能做目的操作数</li>
<li>不能在两个存储单元之间直接传送</li>
<li>MOV指令不改变源操作数，不影响FLAG的状态标志</li>
<li>数据位数由寄存器决定或用说明符指出（如例所示）</li>
<li>SS修改后，下一条指令执行完才检测中断，修改SS和SP一定要连续进行</li>
</ul>
<p>例：</p>
<pre><code>      MOV     AX,  1000
      MOV     [BP],  AX
      MOV     ES,  DX
      MOV     word ptr [SI],  1000
      MOV     byte ptr [SI], AL
      MOV     CS,  100H   错误
      MOV     [1000H], [2000H] 错误</code></pre></li>
</ul></li>
</ul>
<h4 id="二堆栈操作">（二）堆栈操作</h4>
<p>SP总是指向栈顶，即最后压入堆栈的信息单元</p>
<ol type="1">
<li><p>PUSH SRC 进栈指令 操作：SP &lt;- SP-2，(SP+1, SP) &lt;- SRC</p>
<p>具体指令：</p>
<pre><code> PUSH     REG16
 PUSH     SEG_REG
 PUSH     MEM16</code></pre>
<p>例：</p>
<pre><code> PUSH   BX
 PUSH   CS
 PUSH   [SI]
 PUSH   1000   错误</code></pre></li>
<li><p>POP DST 出栈指令 操作：DST &lt;- (SP+1, SP)，SP &lt;- SP+2</p>
<p>具体指令：</p>
<pre><code> POP     REG16
 POP     SEG_REG
 POP     MEM16</code></pre>
<p>例：</p>
<pre><code> POP     AX
 POP     ES
 POP     [SI]
 POP     CS  错误</code></pre>
<p>说明：堆栈操作以字为单位，按后进先出原则存储数据。POP出栈操作时，CS不能为目的操作数</p></li>
</ol>
<p><strong>堆栈主要用于子程序调用、中断子程序的现场保护和恢复、参数传递等。</strong></p>
<p>例：保护现场（保存存储器和恢复存储器次序应一一对应）</p>
<pre><code>PUSH    DS
PUSH    ES
PUSH    AX
PUSH    BX
;子程序处理
POP     BX
POP     AX
POP     ES
POP     DS
RET</code></pre>
<h4 id="三交换指令">（三）交换指令</h4>
<ol type="1">
<li><p>XCHG 指令</p>
<ul>
<li>格式：XCHG DST, SRC</li>
<li>操作：DST &lt;-&gt; SRC</li>
<li>说明：两个操作数必须有一个在寄存器中，可在寄存器之间、寄存器与存储器之间交换信息，目的操作数DST不能为CS</li>
<li><p>具体指令：</p>
<p>XCHG REG, REG XCHG REG, MEM XCHG MEM, REG</p></li>
</ul>
<p>例：</p>
<pre><code> XCHG     AL,  byte ptr [2000H]   ; AL &lt;-&gt; (2000H)
 XCHG     AX,  DX
 XCHG     AX,  CS   错误</code></pre></li>
</ol>
<h4 id="四io端口传送指令">（四）I/O端口传送指令</h4>
<ol type="1">
<li><p>IN 输入指令 操作：AL/AX &lt;- (PORT)/(DX)，PORT为8位直接端口地址</p>
<p>具体指令：</p>
<pre><code> IN  AL, PORT
 IN  AX, PORT
 IN  AL, DX
 IN  AX, DX</code></pre>
<p>例：</p>
<pre><code> IN      AL,  20H
 IN      AX,  60H
 IN      AL,  DX
 IN      AX,  DX
 IN      AL,  160H   错误</code></pre></li>
<li><p>OUT 输出指令 操作：(PORT)/(DX) &lt;- AL/AX，PORT为8位直接端口地址</p>
<p>具体指令： OUT PORT, AL</p>
<p>OUT PORT, AX OUT DX, AL OUT DX, AX</p></li>
</ol>
<p>说明：I/O端口地址有直接寻址和间接寻址（通过DX）两种寻址方式。I/O端口操作必须通过累加器AX或AL来完成</p>
<h4 id="五换码指令">（五）换码指令</h4>
<ul>
<li><p>XLAT 换码指令</p>
<p>具体指令： XLAT</p>
<p>操作：AL &lt;- (BX+AL)</p>
<p>例：</p>
<pre><code>  MOV  AL, 1
  MOV  BX, 1000H
  XLAT    ;将存储单元1001H的内容送给AL</code></pre></li>
</ul>
<h4 id="六有效地址-ea-传送指令">（六）有效地址 (EA) 传送指令</h4>
<ol type="1">
<li><p>LEA (Load Effective Address) 取有效地址指令</p>
<p>具体指令：LEA REG16, SRC</p>
<p>操作： REG16 &lt;- SRC的有效地址</p>
<p>说明：该指令将源操作数的有效地址送给寄存器</p>
<p>例：</p>
<pre><code> MSG db 30H 31H 32H 33H    ;定义数据
 LEA  BX, MSG     ;将MSG的偏移地址送BX
 MOV  DX, MSG    ;DH=31H, DL=30H 
 ;低位在前,高位在后</code></pre></li>
<li><p>LDS (Load DS With Pointer) 地址指针送寄存器和DS</p>
<p>具体指令：LDS REG16, MEM32</p>
<p>操作： REG16 &lt;- (MEM32)，DS &lt;- (MEM32+2)</p>
<p>说明：将源操作数的4个字节，分别传送到指定的寄存器和DS中</p>
<p>例：</p>
<pre><code> LDS   BX, [1000H]</code></pre>
<p>结果：将(1000H,1001H)内容送BX，将(1002H,1003H)内容送DS</p></li>
<li><p>LES (Load ES With Pointer) 地址指针送寄存器和ES</p>
<p>具体指令：LES REG16, MEM32</p>
<p>操作： REG16 &lt;- (MEM32)，ES &lt;- (MEM32+2)</p>
<p>说明：将源操作数的4个字节，分别传送到指定的寄存器和ES中</p></li>
</ol>
<h4 id="七标志寄存器传送指令">（七）标志寄存器传送指令</h4>
<ul>
<li>LAHF (Load AH with Flag) 标志送AH
<ul>
<li>格式：LAHF</li>
<li>操作：AH←标志寄存器的低八位</li>
</ul></li>
<li>SAHF (Store AH into Flag) AH送标志寄存器
<ul>
<li>格式：SAHF</li>
<li>操作：标志寄存器的低八位←AH</li>
</ul></li>
<li>PUSHF (Push the Flag) 标志寄存器进栈
<ul>
<li>格式：PUSHF</li>
<li>操作：SP←SP-2,(SP+1,SP)←FLAG</li>
<li>栈以字为单位</li>
</ul></li>
<li>POPF (Pop the Flag) 标志寄存器出栈
<ul>
<li>格式：POPF</li>
<li>操作：FLAG ←(SP+1，SP)， SP←SP+2</li>
</ul></li>
</ul>
<p>注：传送类指令除了SAHF和POPF外都不影响标志寄存器</p>
<h3 id="算术类指令">算术类指令</h3>
<h4 id="一加法指令">（一）加法指令</h4>
<ol type="1">
<li><p>ADD 加法</p>
<p>格式：ADD DST, SRC</p>
<p>操作：DST ← SRC + DST</p>
<p>具体指令：</p>
<pre><code> ADD      REG, REG
 ADD      REG, MEM
 ADD      MEM, REG
 ADD      REG, IMM
 ADD      MEM, IMM</code></pre></li>
<li><p>ADC (Add With Carry) 带进位加法</p>
<p>格式：ADC DST, SRC</p>
<p>操作：DST ← SRC + DST + CF</p>
<p>具体指令：</p>
<pre><code> ADC       REG, REG
 ADC       REG, MEM
 ADC       MEM, REG
 ADC       REG, IMM
 ADC       MEM, IMM</code></pre></li>
<li><p>INC (Increment) 加1</p>
<p>格式：INC DST</p>
<p>操作：DST ← DST + 1</p>
<p>具体指令：</p>
<pre><code> INC       REG
 INC       MEM</code></pre>
<p>说明：INC指令影响除CF以外的所有状态标志</p></li>
</ol>
<blockquote>
<p><em>带进位加法指令ADC应用举例——实现多字节的加法运算</em></p>
<p>例：有2个4字节无符号数分别存放在数据段2000H和3000H开始的单元中，低位在前，高位在后，将两数相加，结果存放在数据段2000H开始的单元中</p>
</blockquote>
<pre><code>MOV     SI, 2000H           ;SI指向第一个数首地址
MOV     DI, 3000H           ;DI指向第二个数首地址
MOV     AX, [SI]            ;取第一个数的低16位到AX
ADD     AX, [DI]            ;两个数的低16位相加
MOV     [SI], AX            ;低16位相加结果送2000H和2001H单元
MOV     AX, [SI + 2]        ;取第一个数高16位
ADC     AX, [DI + 2]        ;两个数高16位连同进位位相加
MOV     [SI + 2], AX        ;高16位相加结果送2003H和2004H单元</code></pre>
<h4 id="二减法指令">（二）减法指令</h4>
<ol type="1">
<li><p>SUB (Subtract)减法</p>
<p>格式：SUB DST, SRC</p>
<p>操作：DST ← DST - SRC</p>
<p>具体指令</p>
<pre><code> SUB      REG, REG
 SUB      REG, MEM
 SUB      MEM, REG
 SUB      REG, IMM
 SUB      MEM, IMM</code></pre></li>
<li><p>SBB (Subtract With Borrow) 带借位减法</p>
<p>格式：SBB DST, SRC</p>
<p>操作：DST ← DST - SRC - CF</p>
<p>具体指令：</p>
<pre><code> SBB      REG, REG
 SBB     REG, MEM
 SBB     MEM, REG
 SBB     REG, IMM
 SBB     MEM, IMM</code></pre></li>
<li><p>DEC (Decrement) 减1</p>
<p>格式：DEC DST</p>
<p>操作：DST ← DST – 1</p>
<p>具体指令：</p>
<pre><code> DEC       REG
 DEC       MEM</code></pre>
<p>说明：DEC指令影响除CF以外的所有状态标志</p></li>
<li><p>NEG 求补运算</p>
<p>格式：NEG DST</p>
<p>操作：DST ← 模－DST</p>
<p>说明：求指令中给出的操作数的补码</p>
<p>具体指令：</p>
<pre><code> NEG       REG
 NEG       MEM</code></pre>
<p>说明：字节的模为100H，字的模为10000H</p></li>
<li><p>CMP 比较指令</p>
<p>格式：CMP DST，SRC</p>
<p>操作：DST －SRC</p>
<p>具体指令：</p>
<pre><code> CMP       REG,   REG
 CMP       REG,   MEM
 CMP       MEM,   REG
 CMP       REG,   IMM
 CMP       MEM,   IMM</code></pre>
<p>说明：做减法操作，仅影响标志位，不保存结果</p></li>
</ol>
<h4 id="三乘法指令">（三）乘法指令</h4>
<ol type="1">
<li><p>MUL (unsigned Multiple) 无符号数乘法 格式： MUL SRC</p>
<p>操作: AX ← AL<em>SRC 或 {DX, AX} ← AX</em>SRC</p>
<p>具体指令：</p>
<pre><code> MUL   REG 
 MUL   MEM</code></pre></li>
<li><p>IMUL (signed Multiple) 有符号数乘法</p>
<p>格式： IMUL SRC</p>
<p>操作: AX ← AL<em>SRC 或 {DX, AX} ← AX</em>SRC</p>
<p>具体指令：</p>
<pre><code> IMUL   REG 
 IMUL   MEM</code></pre></li>
</ol>
<p>例：将2个32位无符号数DAT1和DAT2相乘，结果保存在64位无符号数Result中</p>
<h4 id="四除法指令">（四）除法指令</h4>
<ol type="1">
<li><p>DIV (unsigned Divide) 无符号数除法 格式： DIV SRC</p>
<p>操作:</p>
<pre><code> AL ← AX/SRC  ,       AH ← AX%SRC             ;字节除法
 AX ← {DX, AX}/SRC,   DX ← {DX, AX}%SRC   ;字除法</code></pre>
<p>具体指令：</p>
<pre><code> DIV   REG
 DIV   MEM</code></pre></li>
<li><p>IDIV (signed Divide) 有符号数除法 格式： IDIV SRC</p>
<p>操作:</p>
<pre><code> AL ← AX/SRC,         AH ← AX%SRC            ;字节除法
 AX ← {DX, AX}/SRC ,  DX ← {DX, AX}%SRC  ;字除法</code></pre>
<p>具体指令：</p>
<pre><code> IDIV   REG 
 IDIV   MEM</code></pre></li>
<li><p>CBW (Convert Byte to Word) 字节扩展为字命令 格式：CBW</p>
<p>操作：将AL扩展为AX</p>
<p>扩展方法：使用最高位进行扩展。若AL的最高位为0，则扩展后AH全为0；若AL的最高位为1，则扩展后AH全为1</p></li>
<li><p>CWD (Convert Word to Double Word) 字扩展为双字命令 格式：CWD</p>
<p>操作：将AX扩展为{DX，AX}，扩展后DX为高16位</p>
<p>扩展方法：使用最高位进行扩展。若AX的最高位为0，则扩展后DX全为0；若AX的最高位为1，则扩展后DX全为1</p></li>
</ol>
<p>CBW和CWD只对有符号数进行扩展，无符号数的扩展只需使用MOV指令将其前面AH或DX全部清0。</p>
<h4 id="五bcd码调整指令">（五）BCD码调整指令</h4>
<p>8086 CPU中没有专用的BCD码运算指令，是使用二进制指令进行BCD码运算，然后再用BCD码调整指令对二进制运算结果进行调整，重新得到BCD码结果。例：DAA调整规则为：</p>
<pre><code>低4位&gt;9 或 AF=1，则结果加06H
高4位&gt;9 或 CF=1，则结果再加上60H</code></pre>
<p>压缩格式BCD码调整指令：</p>
<ul>
<li>DAA ;对加法运算结果AL进行调整</li>
<li>DAS ;对减法运算结果AL进行调整</li>
</ul>
<p>非压缩格式BCD码调整指令：</p>
<ul>
<li>AAA ;加法调整指令</li>
<li>AAS ;减法调整指令</li>
<li>AAM ;乘法调整指令</li>
<li>AAD ;除法调整指令</li>
</ul>
<blockquote>
<p>例：下列程序段执行后AL=?, CF=?</p>
</blockquote>
<pre><code>    MOV    AL, 89H
    ADD    AL, 43H
    DAA </code></pre>
<h3 id="逻辑类指令">逻辑类指令</h3>
<h3 id="一逻辑运算指令">（一）逻辑运算指令</h3>
<blockquote>
<p>下面排版太困难了，就放弃了。</p>
</blockquote>
<p>AND “与”运算命令 格式：AND DST, SRC 操作：DST &lt;- DST &amp; SRC 具体指令： AND REG, REG AND REG, MEM AND MEM, REG AND REG, IMM AND MEM, IMM 逻辑类指令 OR “或”运算命令 格式：OR DST, SRC 操作：DST &lt;- DST | SRC 具体指令： OR REG, REG OR REG, MEM OR MEM, REG OR REG, IMM OR MEM, IMM 逻辑类指令 逻辑运算指令常见用法 清0操作数：XOR AX, AX，不仅把AX清0，而且影响状态标志，至少CF=0, ZF=1（MOV AX,0不影响标志位） 把某几位取反：用XOR指令，把要取反的位和1异或，不变的位和0异或。（例：XOR AL, 80H ;将AL最高位取反） 清0或置位某几位：用AND指令清0，用OR指令置位；要清0的位就与0，要置1的位就或1。 例：清0 MOV AL, 33H ;’3’的ASCII码<br>
AND AL, 0FH ;将高4位清0 置1 MOV AL, 9 OR AL, 30H ;得到9的ASCII码<br>
逻辑类指令 （二）逻辑移位操作命令 SHL 逻辑左移指令 格式：SHL DST, count 操作：操作数整体左移，每次的最高位移到CF，空余位补0 说明：count可以为1，也可为CL，做移位计数 具体指令： SHL REG, 1 SHL REG, CL SHL MEM, 1 SHL MEM, CL 注：1）移位数目大于1时，必需用CL表示； 2）所有逻辑移位操作的具体指令均类似 逻辑类指令 SHR 逻辑右移指令 格式：SHR DST, count 操作：操作数整体右移，最低位到CF，空余位补0 SAL 算术左移指令 格式：SAL DST, count 说明：该指令与SHL逻辑左移指令完全一致 SAR 算术右移指令 格式：SAR DST, count 操作：操作数整体右移，最低位到CF，空余位用符号位补 注: 1）逻辑移位适用于无符号数，算术移位适用于有符号数 2）移位指令常用来做乘以2或除以2的操作 SHL、SAL用来乘以2，SHR、SAR用来除以2 例： MOV CL,5 ;若执行前(DI)=0064H SAR [DI],CL ;执行后(DI)=0003H，相当于100/32=3 逻辑类指令 ROL 循环左移指令 格式：ROL DST, count 操作：操作数整体左移，最高位移到CF，最低位用原来最高位补 ROR 循环右移指令 格式：ROR DST, count 操作：操作数整体右移，最低位移到CF，最高位用原来最低位补 RCL 带进位的循环左移指令 格式：RCL DST, count 操作：类似ROL循环左移，但CF加入到循环圈中 RCR 带进位的循环右移指令 格式：RCR DST, count 操作：类似ROR循环左移，但CF加入到循环圈中 串操作类指令 串操作类指令 对一串字符或数据操作，允许两个操作数均为MEM操作数，分为5种： MOVS (Move String) 串传送 STOS (Store into String) 存AL中数据到串中 LODS (Load from String) 从串中取数据到AL中 CMPS (Compare String) 串比较 SCAS (Scan String) 串扫描 串操作说明 每次完成一个字节或一个字的操作，B表示字节，W表示字 多次操作需用重复前缀，如REP，重复次数由CX决定 默认DS:SI指向存储器源操作数，ES:DI指向存储器目的操作数 SI、DI自动变化，DF指示变化方向 DF=0，SI、DI作增量变化，B: +1，W: +2 DF=1，SI、DI作减量变化，B:－1，W:－2 串操作类指令 重复前缀（CX又称作计数器） REP 重复 REPE / REPZ 相等/为0（ZF=1）则重复 REPNE / REPNZ 不等/不为0（ZF=0）则重复 MOVS 串传送指令 格式：MOVSB 或 MOVSW 操作：MOVSB：(ES : DI) ← (DS : SI)，SI←SI±1，DI←DI±1 MOVSW：(ES : DI) ← (DS : SI)，SI←SI±2，DI←DI±2 说明：使用前缀REP，可完成多次数据传送 例：MOV CX, 12 REP MOVSB ;连续传送12个字节 串操作类指令 STOS 存入串指令 格式：STOSB 或 STOSW 操作：STOSB：(ES : DI) ← AL，DI←DI±1 STOSW：(ES : DI) ← AX，DI←DI±2 说明：可使用REP前缀 LODS 从串中取数据指令 格式：LODSB 或 LODSW 操作：LODSB： AL ← (DS : SI)，SI←SI±1 LODSW：AX ← (DS : SI) ，SI←SI±2 SCAS 串扫描指令 格式：SCASB 或 SCASW 操作：在数据中查找AL或AX中的内容 SCASB：AL － (ES : DI)，DI←DI±1 SCASW：AX － (ES : DI)，DI←DI±2 说明：可使用REPE/REPZ 或 REPNE/REPNZ，仅影响标志位 串操作类指令 CMPS 串比较指令 格式：CMPSB 或 CMPSW 操作：两个MEM操作数的比较，源操作数－目的操作数 CMPSB：(DS : SI) － (ES : DI)，SI←SI±1，DI←DI±1 CMPSW：(DS : SI) － (ES : DI)，SI←SI±2，DI←DI±2 说明：可使用REPE / REPZ 或 REPNE / REPNZ，该指令只影响标志位，不保存结果 条件重复前缀说明<br>
REPE / REPZ 相等或为0时重复 操作：若CX≠0 且 ZF=1 （相等）时继续执行，否则退出 REPNE / REPNZ 不相等或不等于0时重复 操作：若CX≠0 且 ZF=0（不相等）时继续执行，否则退出 串操作类指令 例1：将数据段中1000H开始的10个字节移动到2000H开始的单元</p>
<p>串操作类指令 例2：将数据段中1000H开始的10个字移动到1002H开始的单元去 控制转移类指令 控制转移类指令 该类指令是能够使程序执行流程发生改变的指令，分为5种： 无条件转移和条件转移指令 子程序调用和返回指令 循环控制指令 中断指令 处理器控制指令 指令需要寻找转移地址或调用地址，将此种寻址方式称为程序寻址方式 段内直接转移方式 — 指令中直接给出跳转的相对偏移量 目标转移地址 = IP + 偏移量（8位或16位） 偏移量为8位，称为短跳转，跳转范围：-128 ~ +127个单元 偏移量为16位，称为近跳转，跳转范围：-32768~ +32767个单元 例：JMP 1000H ;转移地址的偏移量由指令给出 控制转移类指令 段内间接转移方式 — 转移地址在寄存器或内存单元中 例：JMP CX ;转移地址由CX给出，执行时将CX值赋给IP JMP [1000H] ;转移地址存放在（1000H, 1001H）单元中 段间直接转移方式 — 指令中直接给出转移地址的段地址和偏移量 例：JMP 2000H:0100H ;执行时，2000H赋给CS, 0100H赋给IP 注：段间直间转移又称作远跳转，该种方式为程序提供了从一个代码段转移到另一个代码段的方法 段间间接转移方式 — 转移地址的段地址和偏移量在内存单元中 例：JMP DWORD PTR [SI] (SI, SI + 1)存放偏移地址，(SI + 2, SI + 3)存放段地址 控制转移类指令 （一）无条件转移指令和条件转移指令 无条件转移指令 JMP TARGET 无条件直接转移指令可以跳转到内存中任何程序段，有四种形式 例： JMP 1000H ;段内直接转移 JMP CX ;段内间接转移 JMP 2000H:0100H ;段间直接转移 JMP DWORD PTR [SI] ;段间间接转移 说明：段内间接转移和段间转移只用于无条件指令 实际使用时多采用符号地址，如： JMP BBB …… BBB: MOV AL, 3 ……<br>
控制转移类指令 条件转移指令 根据判断条件，决定是否跳转，条件转移指令都是段内短跳转 根据单个标志进行跳转的指令 JS ;SF = 1，则跳转 JNS ;SF = 0，则跳转 JO ;OF = 1，则跳转 JNO ;OF = 0，则跳转 JP ;PF = 1，则跳转 JNP ;PF = 0，则跳转 JZ ;ZF = 1，则跳转 JNZ ;ZF = 0，则跳转 JC ;CF = 1，则跳转 JNC ;CF = 0，则跳转 根据CX中的值进行跳转的指令 JCXZ ;CX = 0，则跳转 控制转移类指令 根据无符号数比较结果进行跳转的指令 助记符：A：大于；B：小于；E：等于 JA （JNBE） ;大于，即不小于等于，则跳转 JAE（JNB） ;大于等于，即不小于，则跳转，同JNC JE ;等于，即结果为0，则跳转，同JZ JB（JNAE） ;小于，即不大于等于，则跳转，同JC JBE（JNA） ;小于等于，即不大于，则跳转，CF | ZF = 1 根据有符号数比较结果进行跳转的指令 助记符：G：大于；L：小于；E：等于 JG（JNLE） ;大于，即不小于等于，则跳转 JGE（JNL） ;大于等于，即不小于，则跳转 JE ;等于，与无符号数比较时相同 JL （JNGE） ;小于，即不大于等于，则跳转 JLE （JNG） ;小于等于，即不大于，则跳转 注：根据比较结果跳转时，必须区分有符号数和无符号数，如： 1111 1111b 与 0000 0000b比较 控制转移类指令 （二）子程序调用和返回指令 CALL TARGET 子程序调用指令类似转移指令，也有4种形式 CALL 1000H ;段内直接转移，调用地址偏移量在指令中给出 CALL AX ;段内间接转移，调用地址在AX中给出 CALL 2000H:0200H ;段间直接转移，指令中直接给出调用 ;地址的段地址和偏移量 CALL DWORD PTR [DI] ;段间间接转移，调用地址在内存单元中 执行该指令时，会将下一条指令的地址压入堆栈，该地址称为返回地址 段内调用：只将返回地址的偏移量压入堆栈 段间调用：将返回地址的段地址和偏移量压入堆栈，先压CS，后压IP 实际使用时CALL指令后面直接跟子程序名，例： CALL DISP DISP proc<br>
BBB: MOV AL, 3 ……. …… ret DISP endp 控制转移类指令 RET — 子程序返回指令，应与调用指令相对应 执行时，从堆栈顶部弹出返回地址 段内返回：仅从堆栈顶部弹出返回地址偏移量 IP ← (SP)，SP ← SP + 2 段间返回：从堆栈顶部弹出返回地址的段地址和偏移量 IP ← (SP)， SP ← SP + 2； CS ← (SP)，SP ← SP + 2 RET IMM16 — 带立即数返回指令 执行时，从堆栈顶部弹出返回地址，再使SP加上立即数，例：RET 4</p>
<p>控制转移类指令 （三）循环控制指令 循环控制指令均是段内短跳转 LOOP TARGET — 循环指令，循环次数由CX决定 执行时，CX先减1，若为0则退出，否则继续循环，例： MOV CX, 10 ;设置循环次数为10次 BBB: LOOP BBB ;CX减1，若不为0，则循环 …… ;后续处理 LOOPZ / LOOPE TARGET — 条件循环指令 LOOPZ 和LOOPE是同一条指令的不同助记符，执行时，在LOOP指令的基础上，还需判断ZF，若CX != 0 且 ZF = 1则循环 LOOPNZ / LOOPNE TARGET 执行时，在LOOP指令的基础上，还需判断ZF 若CX != 0 且 ZF = 0则循环 控制转移类指令 循环调用指令说明 循环指令不影响状态标志，即CX减为0时不影响FLAG 如果目标位置超出短跳转的范围，则用JMP辅助完成循环</p>
<p>（五）中断指令和中断返回指令 INT n — 中断调用指令 8086指令系统为程序员提供软件中断，利用INT n指令实现<br>
执行时，依次将FLAG，当前CS和IP（即断点地址）压入堆栈，并清除IF和TF标志，执行中断类型码为n的中断程序。 IRET — 中断返回指令 执行时，从堆栈中依次弹出断点地址的IP、CS和FLAG INTO — 溢出中断指令 执行时，判断OF，若为1，则执行中断指令INT 4，否则无操作 （六）控制指令 标志处理指令 CLC / STC / CMC 对CF 清0 / 置位 /取反 CLD / STD 对DF 清0 / 置位 CLI / STI 对IF 清0 / 置位 控制转移类指令 处理器控制指令 NOP — 空操作指令，占用一个字节的机器码，不执行任何操作 HLT — Halt，停机指令，该指令使处理器处于停机状态，以便等待一次外部中断到来 WAIT— 等待指令，该指令使处理器处于空转状态，也可用来等待外部中断的到来 ESC — Escape，换码指令，用作前缀，例：ESC MEM 其中MEM指出一个存储单元，ESC指令把该存储单元的内容送到数据总线去。 LOCK — 封锁指令，用作前缀 该指令与其他指令联合，用来维持总线的封锁信号直到与其联合的指令执行完为止。 80386扩充指令介绍 第3.4节 80386扩充指令介绍 80386为32位CPU，具有独立的32位数据线(D31<sub>D0)和34位地址线(A31</sub>A2, /BE0~/BE3)，可寻址4GB存储空间，内部寄存器多为32位</p>
<p>80386扩充指令介绍 4. 段寄存器：80386内部设置了6个16位段寄存器CS DS SS ES FS GS 二. 80386寻址方式 在8086寻址方式基础上，80386的所有通用寄存器既可作为基址寄存器，也可作为变址寄存器(ESP除外)，存放地址。 EA = 基址 + 变址×比例因子 + 位移量 比例因子可以为：1、2、4或8，位移量可以为8位、16位或32位 例： MOV ECX, [EAX + EDX * 4 + 1000H] 三. 80386扩充指令 — 1.数据传送指令 1）使用MOV指令时，两操作数位数必须相同，若不同，则用MOVZX或MOVSX MOVZX AX, BL ;若BL=80H，则AX=0080H，MOVZX表示零扩展BL MOVSX AX, BL ;若BL=80H，则AX=FF80H，MOVSX表示符号扩展BL 2）立即数入栈指令 例：PUSH 1000H 3）PUSHA 将全部16位寄存器AX~DI压入堆栈， POPA 则全部出栈 PUSHAD 将全部32位寄存器EAX~EDI压入堆栈， POPAD 则全部出栈 PUSHFD 将EFLAG压入堆栈 POPFD 从堆栈弹出双字到EFLAG 80386扩充指令介绍 4）LSS ESP, MEM ;将MEM开始的存储单元内容送ESP和SS LFS EDX, MEM ;将MEM开始的存储单元内容送EDX和FS LGS EAX, MEM ;将MEM开始的存储单元内容送EAX和GS 5）CWDE ;将AX扩展为EAX CDQ ;将EAX扩展为(EDX, EAX) 2. 算数运算指令扩充 1）IMUL SRC AX &lt;- AL * SRC ;字节乘法 EAX &lt;- AX * SRC ;字乘法，高16位同时也放在DX中，兼容8086 (EDX, EAX) &lt;- EAX * SRC ;32位数乘法 另外操作数可为2个8位数、2个16位数、2个32位数，例： IMUL DX, [1000H], 300 ;DX = (1000H) * 300 IMUL ECX, 2000 ; ECX = ECX * 2000 IMUL BX, CX ;BX = BX * CX 2）MUL SRC ;与IMUL指令类似</p>
<p>80386扩充指令介绍 3）DIV与IDIV指令 — 可用AX, (DX, AX), (EDX, EAX)作为被除数，例： DIV BL ;AL = AX / BL, AH = AX % BL DIV BX ;AX = (DX, AX) / BX, DX = (DX, AX) % BX DIV ECX ;EAX = (EDX, EAX) / ECX, EDX = (EDX, EAX) % ECX 3. 逻辑指令扩充 1）逻辑操作与8086一样，只是逻辑指令还可用于32位操作数 2）增加了2条可对64位操作数进行移位的指令SHLD和SHRD SHLD EDX, EAX, 5 ;EDX左移5位, 低5位由EAX的高5位填充 ;且EAX中内容不变 SHRD EAX, EBX, CL ;EAX右移CL位, EAX高位由EBX的低位 ;填充，EBX的值保持不变 4. 串操作指令扩充 1）增加了32位数的串操作 例： MOVSD ;表示传送一个双字 2）增加字符串输入INS和字符串输出OUTS指令，必须使用DX存放端口号 MOV DX, 160H ; 从160H端口连续读10个双字存放到ES:EDI指向的存储单元 MOV CX, 10 REP INSD 80386扩充指令介绍 5. 转移、循环和调用指令 1）JECXZ TARGET ;若ECX = 0，则跳转 2）使用CALL指令时 段内调用：将EIP压入堆栈，保存4个字节 段间调用：将CS:EIP共6字节压入堆栈 3）RET和RET n指令 出栈时，操作应与CALL指令相对应 6. 条件设置指令 — 80386新增指令 格式： SETcond REG8/MEM8 ;cond为设置条件 例： SETZ AL ;若ZF = 1，则置AL为1，否则置0 SETGE CL ;有符号数比较大小时，若大于等于，则置CL为1 SETO [100H] ;若OF = 1，则置[1000H]存储单元为1，否则置0 7. 位处理指令 — 80386新增指令 BTS ;将指定位置1 BTR ;将指定位清0 BTC ;对指定位取反 BT ;对指定位进行测试<br>
BSF ;从最低位往最高位扫描，若全为0，则ZF置1，若某位为1，则 ;ZF清0，且将此位的位号放入目的寄存器 80386扩充指令介绍 BSR ;从最高位往最低位扫描，若全为0，则ZF置1，若某位为1，则 ;ZF清0，且将此位的位号放入目的寄存器 例： BTC AX, 2 ;将AX的D2位装入CF，再对AX的D2位取反 BTS [100H], 4 ;将[100H]单元的D4位装入CF，再将D4位置1 BTR BL, CL ;将CL的值作为位的序号，将BL的此位送CF， ;再将BL的此位清0，若CL的值大于8，则将CL ;的值对8取余得到位序号 BT AL, CL ;将CL的值作为序号，对AL的此位进行测试 BSF AX, [2000H] ;对[2000H]开始的一个双字，从D0往D31 ;扫描，若全为0，则ZF = 1，否则ZF = 0， ;且将此位序号送AX BSR EAX, ECX ;对ECX从D31往D0扫描，若全为0，则置 ;ZF=1，否则ZF=0，并将此位序号送EAX</p>

      
    </div>

    

    
    
    

    

    
       
    
    

    
      <div>
        



  



<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Lart Pang</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    
    <a href="https://plart.pw/langs/asm/8086汇编总结-指令系统/" title="8086汇编总结-指令系统">https://plart.pw/langs/asm/8086汇编总结-指令系统/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/汇编/" rel="tag"># 汇编</a>
          
            <a href="/tags/计算机原理/" rel="tag"># 计算机原理</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div class="social_share">
            
            
               <div id="needsharebutton-postbottom">
                 <span class="btn">
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                 </span>
               </div>
            
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/langs/asm/8086汇编总结-微型计算机概述/" rel="next" title="8086汇编总结-微型计算机概述">
                <i class="fa fa-chevron-left"></i> 8086汇编总结-微型计算机概述
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/langs/processing/Processing精彩例程之细胞自动机/" rel="prev" title="Processing精彩例程之细胞自动机">
                Processing精彩例程之细胞自动机 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Lart Pang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">58</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">30</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/lartpang" title="GitHub &rarr; https://github.com/lartpang" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:%6C%61%72%74%70%61%6E%67%40%31%36%33%2E%63%6F%6D" title="E-Mail &rarr; mailto:%6C%61%72%74%70%61%6E%67%40%31%36%33%2E%63%6F%6D" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://weibo.com/140jmx" title="Weibo &rarr; https://weibo.com/140jmx" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://blog.csdn.net/p_lart" title="https://blog.csdn.net/p_lart" rel="noopener" target="_blank">csdn</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.jianshu.com/u/f381f4c8dca4" title="https://www.jianshu.com/u/f381f4c8dca4" rel="noopener" target="_blank">简书</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#目录"><span class="nav-number">1.</span> <span class="nav-text">目录</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第三章-指令系统"><span class="nav-number">2.</span> <span class="nav-text">第三章 指令系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#指令系统基本概念"><span class="nav-number">2.1.</span> <span class="nav-text">指令系统基本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cpu内部操作数寻址"><span class="nav-number">2.2.</span> <span class="nav-text">CPU内部操作数寻址</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数据寻址方式"><span class="nav-number">2.2.1.</span> <span class="nav-text">数据寻址方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#io端口寻址"><span class="nav-number">2.2.2.</span> <span class="nav-text">I/O端口寻址</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指令格式"><span class="nav-number">2.3.</span> <span class="nav-text">指令格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指令介绍"><span class="nav-number">2.4.</span> <span class="nav-text">8086指令介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#传送类指令"><span class="nav-number">2.4.1.</span> <span class="nav-text">传送类指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一通用数据传送指令"><span class="nav-number">2.4.1.1.</span> <span class="nav-text">（一）通用数据传送指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二堆栈操作"><span class="nav-number">2.4.1.2.</span> <span class="nav-text">（二）堆栈操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三交换指令"><span class="nav-number">2.4.1.3.</span> <span class="nav-text">（三）交换指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四io端口传送指令"><span class="nav-number">2.4.1.4.</span> <span class="nav-text">（四）I/O端口传送指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#五换码指令"><span class="nav-number">2.4.1.5.</span> <span class="nav-text">（五）换码指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#六有效地址-ea-传送指令"><span class="nav-number">2.4.1.6.</span> <span class="nav-text">（六）有效地址 (EA) 传送指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#七标志寄存器传送指令"><span class="nav-number">2.4.1.7.</span> <span class="nav-text">（七）标志寄存器传送指令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#算术类指令"><span class="nav-number">2.4.2.</span> <span class="nav-text">算术类指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一加法指令"><span class="nav-number">2.4.2.1.</span> <span class="nav-text">（一）加法指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二减法指令"><span class="nav-number">2.4.2.2.</span> <span class="nav-text">（二）减法指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三乘法指令"><span class="nav-number">2.4.2.3.</span> <span class="nav-text">（三）乘法指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四除法指令"><span class="nav-number">2.4.2.4.</span> <span class="nav-text">（四）除法指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#五bcd码调整指令"><span class="nav-number">2.4.2.5.</span> <span class="nav-text">（五）BCD码调整指令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逻辑类指令"><span class="nav-number">2.4.3.</span> <span class="nav-text">逻辑类指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一逻辑运算指令"><span class="nav-number">2.4.4.</span> <span class="nav-text">（一）逻辑运算指令</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 – <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lart Pang</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">356k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">10:48</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.5.0</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  













  



  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/reading_progress/reading_progress.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.5.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.5.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.5.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.5.0"></script>



  



  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  
  

  


  
  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>

  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('复制成功')
          else $(this).text('复制失败')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>


  

</body>
</html>
