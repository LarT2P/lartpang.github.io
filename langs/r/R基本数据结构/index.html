<!DOCTYPE html>













<html class="theme-next mist" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">



  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-center-simple.min.css?v=1.0.2" rel="stylesheet">




  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.5.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.5.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.5.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.5.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="主站：https://lartpang.github.io/  之前一阵子，在EDX上学习了R语言的一门基础课程，这里做个总结。这门课程主要侧重于R的数据结构的介绍，当然也介绍了它的基本的绘图手段。 工作空间相关 ls()  ## character(0)  rm(a)  ## Warning in rm(a): 找不到对象&amp;#39;a&amp;#39;  ls()  ##">
<meta name="keywords" content="R">
<meta property="og:type" content="article">
<meta property="og:title" content="R基本数据结构">
<meta property="og:url" content="https://plart.pw/langs/r/R基本数据结构/index.html">
<meta property="og:site_name" content="失乐园">
<meta property="og:description" content="主站：https://lartpang.github.io/  之前一阵子，在EDX上学习了R语言的一门基础课程，这里做个总结。这门课程主要侧重于R的数据结构的介绍，当然也介绍了它的基本的绘图手段。 工作空间相关 ls()  ## character(0)  rm(a)  ## Warning in rm(a): 找不到对象&amp;#39;a&amp;#39;  ls()  ##">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-07-13T12:51:29.159Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="R基本数据结构">
<meta name="twitter:description" content="主站：https://lartpang.github.io/  之前一阵子，在EDX上学习了R语言的一门基础课程，这里做个总结。这门课程主要侧重于R的数据结构的介绍，当然也介绍了它的基本的绘图手段。 工作空间相关 ls()  ## character(0)  rm(a)  ## Warning in rm(a): 找不到对象&amp;#39;a&amp;#39;  ls()  ##">



  <link rel="alternate" href="/atom.xml" title="失乐园" type="application/atom+xml">




  <link rel="canonical" href="https://plart.pw/langs/r/R基本数据结构/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>R基本数据结构 | 失乐园</title>
  











  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">失乐园</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">代码与机器</h1>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  
  
  

  

    <a href="https://github.com/yourname" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" style="fill: #222; color: #fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/langs/r/R基本数据结构/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">R基本数据结构
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-15 21:46:06" itemprop="dateCreated datePublished" datetime="2018-02-15T21:46:06+08:00">2018-02-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:51:29" itemprop="dateModified" datetime="2018-07-13T20:51:29+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程与生活/" itemprop="url" rel="index"><span itemprop="name">编程与生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <blockquote>
<p>主站：https://lartpang.github.io/</p>
</blockquote>
<p>之前一阵子，在EDX上学习了R语言的一门基础课程，这里做个总结。这门课程主要侧重于R的数据结构的介绍，当然也介绍了它的基本的绘图手段。</p>
<h1 id="工作空间相关">工作空间相关</h1>
<pre><code>ls()

## character(0)

rm(a)

## Warning in rm(a): 找不到对象&#39;a&#39;

ls()

## character(0)</code></pre>
<h1 id="基本数据类型">基本数据类型</h1>
<ol type="1">
<li>logical
<ul>
<li>TRUE/FALSE/NA/T/F(推荐使用完整形式)/某些时候的0与非0</li>
</ul></li>
<li>numeric
<ul>
<li>integer is numeric</li>
<li>numeric not always integer</li>
</ul></li>
<li>character</li>
</ol>
<p>Other atomic types:</p>
<ul>
<li>double: higher precision</li>
<li>complex: complex numbers</li>
<li>raw: store raw bytes</li>
</ul>
<blockquote>
<p><code>is.*()</code>返回括号内内容是否是<code>*</code>对应类型。</p>
</blockquote>
<pre><code># logical
TRUE

## [1] TRUE

class(TRUE)

## [1] &quot;logical&quot;

FALSE

## [1] FALSE

class(NA)

## [1] &quot;logical&quot;

T

## [1] TRUE

F

## [1] FALSE

# numeric
2

## [1] 2

class(2)

## [1] &quot;numeric&quot;

2.5

## [1] 2.5

class(2.5)

## [1] &quot;numeric&quot;

2L

## [1] 2

class(2L) 

## [1] &quot;integer&quot;

is.numeric(2)

## [1] TRUE

is.numeric(2L)

## [1] TRUE

#integer is numeric 
#numeric not always integer
is.integer(2)

## [1] FALSE

is.integer(2L)

## [1] TRUE

# character
 &quot;I love data science!&quot;

## [1] &quot;I love data science!&quot;

 class(&quot;I love data science!&quot;)

## [1] &quot;character&quot;</code></pre>
<h2 id="强制转换">强制转换</h2>
<blockquote>
<p><code>as.*()</code>返回括号内内容转化为<code>*</code>对应类型后的结果，有些情况无法转换。</p>
</blockquote>
<pre><code>as.numeric(TRUE)

## [1] 1

as.numeric(FALSE)

## [1] 0

as.character(4)

## [1] &quot;4&quot;

as.numeric(&quot;4.5&quot;)

## [1] 4.5

as.integer(&quot;4.5&quot;)

## [1] 4

as.numeric(&quot;Hello&quot;)

## Warning: 强制改变过程中产生了NA

## [1] NA</code></pre>
<h1 id="向量-vector">向量 Vector</h1>
<ul>
<li>Sequence of data elements</li>
<li><strong>Same basic type</strong>
<ul>
<li>Automatic coercion if necessary</li>
</ul></li>
<li>character, numeric, logical</li>
<li>Single value = Vector</li>
</ul>
<h2 id="创建-c或者利用">创建 <code>c()</code>或者利用<code>:</code></h2>
<pre><code># c()
drawn_suits &lt;- c(&quot;hearts&quot;, &quot;spades&quot;, &quot;diamonds&quot;,  
                   &quot;diamonds&quot;, &quot;spades&quot;)
drawn_suits

## [1] &quot;hearts&quot;   &quot;spades&quot;   &quot;diamonds&quot; &quot;diamonds&quot; &quot;spades&quot;

is.vector(drawn_suits)

## [1] TRUE

# :
1:5

## [1] 1 2 3 4 5

is.vector(1:5)

## [1] TRUE</code></pre>
<h2 id="命名-names">命名 <code>names()</code></h2>
<pre><code>remain &lt;- c(11, 12, 11, 13)
suits &lt;- c(&quot;spades&quot;, &quot;hearts&quot;, &quot;diamonds&quot;, &quot;clubs&quot;)
names(remain) &lt;- suits
remain 

##   spades   hearts diamonds    clubs 
##       11       12       11       13

#or
remain &lt;- c(spades = 11, hearts = 12,  
              diamonds = 11, clubs = 13)
remain

##   spades   hearts diamonds    clubs 
##       11       12       11       13

#or
remain &lt;- c(&quot;spades&quot; = 11, &quot;hearts&quot; = 12,  
              &quot;diamonds&quot; = 11, &quot;clubs&quot; = 13)
remain

##   spades   hearts diamonds    clubs 
##       11       12       11       13</code></pre>
<h2 id="单值仍为向量">单值仍为向量</h2>
<pre><code>my_apples &lt;- 5 
my_oranges &lt;- &quot;six&quot; 
is.vector(my_apples)

## [1] TRUE

is.vector(my_oranges)

## [1] TRUE

length(my_apples)

## [1] 1

length(my_oranges)

## [1] 1</code></pre>
<h2 id="强制变换">强制变换</h2>
<pre><code>drawn_ranks &lt;- c(7, 4, &quot;A&quot;, 10, &quot;K&quot;, 3, 2, &quot;Q&quot;)
drawn_ranks

## [1] &quot;7&quot;  &quot;4&quot;  &quot;A&quot;  &quot;10&quot; &quot;K&quot;  &quot;3&quot;  &quot;2&quot;  &quot;Q&quot;

class(drawn_ranks)

## [1] &quot;character&quot;</code></pre>
<h2 id="基本运算">基本运算</h2>
<p>很自然的可以由单数的运算推广出来。</p>
<pre><code># with number: +-*/
earnings &lt;- c(50, 100, 30)
earnings * 3

## [1] 150 300  90

earnings^2

## [1]  2500 10000   900

# with vector: +-*/
earnings &lt;- c(50, 100, 30) 
expenses &lt;- c(30, 40, 80) 
bank &lt;- earnings - expenses
## sum() &gt;
sum(bank)

## [1] 30

earnings &gt; expenses

## [1]  TRUE  TRUE FALSE

## multiplication and division are done element-wise!
earnings * c(1, 2, 3)

## [1]  50 200  90</code></pre>
<h2 id="子集">子集</h2>
<p>三种索引方式</p>
<ul>
<li>序号（R从1开始）</li>
<li>名字 —— names()的利用</li>
<li>逻辑值</li>
</ul>
<!-- -->
<pre><code>remain &lt;- c(spades = 11, hearts = 12,  
              diamonds = 11, clubs = 13)
remain[1]

## spades 
##     11

remain[&quot;spades&quot;]

## spades 
##     11

remain[c(4, 1)] # 此法可以用来交换或者抽取特定位置的元素

##  clubs spades 
##     13     11

remain[c(&quot;clubs&quot;, &quot;spades&quot;)]

##  clubs spades 
##     13     11

# 逻辑值索引，短的会被自动循环使用
remain[c(TRUE, FALSE)]

##   spades diamonds 
##       11       11

remain[c(TRUE, FALSE, TRUE, FALSE)]

##   spades diamonds 
##       11       11

# 负索引，“all but it”，返回除此之外的元素
remain[-1]

##   hearts diamonds    clubs 
##       12       11       13

remain[-c(1, 2)]

## diamonds    clubs 
##       11       13

#remain[-&quot;spades&quot;] #can&#39;t work</code></pre>
<h1 id="矩阵-matrix">矩阵 Matrix</h1>
<ul>
<li>Vector: 1D array of data elements</li>
<li>Matrix: 2D array of data elements</li>
<li>Rows and columns</li>
<li>One atomic vector type</li>
</ul>
<h2 id="创建-matrix">创建 <code>matrix()</code></h2>
<p><strong>默认按列填充</strong></p>
<pre><code># 直接创建
matrix(1:6, nrow = 2)

##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6

matrix(1:6, ncol = 3)

##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6

matrix(1:6, nrow = 2, byrow = TRUE)

##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6

# 循环创建
matrix(1:3, nrow = 2, ncol = 3)

##      [,1] [,2] [,3]
## [1,]    1    3    2
## [2,]    2    1    3

matrix(1:4, nrow = 2, ncol = 3)

## Warning in matrix(1:4, nrow = 2, ncol = 3): 数据长度[4]不是矩阵列数[3]的整
## 倍数

##      [,1] [,2] [,3]
## [1,]    1    3    1
## [2,]    2    4    2

# 组合创建
cbind(1:3, 1:3)

##      [,1] [,2]
## [1,]    1    1
## [2,]    2    2
## [3,]    3    3

rbind(1:3, 1:3)

##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    1    2    3

m &lt;- matrix(1:6, byrow = TRUE, nrow = 2)
rbind(m, 7:9)

##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9

cbind(m, c(10, 11))

##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3   10
## [2,]    4    5    6   11</code></pre>
<h2 id="命名">命名</h2>
<p><code>rownames()</code>, <code>colnames()</code></p>
<pre><code>m &lt;- matrix(1:6, byrow = TRUE, nrow = 2)
rownames(m) &lt;- c(&quot;row1&quot;, &quot;row2&quot;)
m

##      [,1] [,2] [,3]
## row1    1    2    3
## row2    4    5    6

colnames(m) &lt;- c(&quot;col1&quot;, &quot;col2&quot;, &quot;col3&quot;)
m

##      col1 col2 col3
## row1    1    2    3
## row2    4    5    6

# 直接命名
m &lt;- matrix(1:6, byrow = TRUE, nrow = 2,  
              dimnames = list(c(&quot;row1&quot;, &quot;row2&quot;),  
                              c(&quot;col1&quot;, &quot;col2&quot;, &quot;col3&quot;))) 
m

##      col1 col2 col3
## row1    1    2    3
## row2    4    5    6</code></pre>
<h2 id="强制转换-1">强制转换</h2>
<pre><code>num &lt;- matrix(1:8, ncol = 2)
num

##      [,1] [,2]
## [1,]    1    5
## [2,]    2    6
## [3,]    3    7
## [4,]    4    8

char &lt;- matrix(LETTERS[1:6], nrow = 4, ncol = 3)
char

##      [,1] [,2] [,3]
## [1,] &quot;A&quot;  &quot;E&quot;  &quot;C&quot; 
## [2,] &quot;B&quot;  &quot;F&quot;  &quot;D&quot; 
## [3,] &quot;C&quot;  &quot;A&quot;  &quot;E&quot; 
## [4,] &quot;D&quot;  &quot;B&quot;  &quot;F&quot;

num &lt;- matrix(1:8, ncol = 2)
char &lt;- matrix(LETTERS[1:6], nrow = 4, ncol = 3)
cbind(num, char)

##      [,1] [,2] [,3] [,4] [,5]
## [1,] &quot;1&quot;  &quot;5&quot;  &quot;A&quot;  &quot;E&quot;  &quot;C&quot; 
## [2,] &quot;2&quot;  &quot;6&quot;  &quot;B&quot;  &quot;F&quot;  &quot;D&quot; 
## [3,] &quot;3&quot;  &quot;7&quot;  &quot;C&quot;  &quot;A&quot;  &quot;E&quot; 
## [4,] &quot;4&quot;  &quot;8&quot;  &quot;D&quot;  &quot;B&quot;  &quot;F&quot;</code></pre>
<h2 id="子集运算">子集运算</h2>
<pre><code>m &lt;- matrix(sample(1:15, 12), nrow = 3)
rownames(m) &lt;- c(&quot;r1&quot;, &quot;r2&quot;, &quot;r3&quot;) 
colnames(m) &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;)
m

##     a  b  c  d
## r1  7  5  6 10
## r2  3  9 12  8
## r3 15 13  2  4

m[1,3]

## [1] 6

m[3,] 

##  a  b  c  d 
## 15 13  2  4

m[,3]

## r1 r2 r3 
##  6 12  2

m[4] # 默认按列计数 

## [1] 5

m[2, c(2, 3)]

##  b  c 
##  9 12

m[c(1, 2), c(2, 3)]

##    b  c
## r1 5  6
## r2 9 12

m[c(1, 3), c(1, 3, 4)]

##     a c  d
## r1  7 6 10
## r3 15 2  4

m[&quot;r2&quot;,&quot;c&quot;]

## [1] 12

m[2,&quot;c&quot;]

## [1] 12

m[3, c(&quot;c&quot;, &quot;d&quot;)]

## c d 
## 2 4

m[c(FALSE, FALSE, TRUE),  
    c(FALSE, TRUE, FALSE, TRUE)] 

##  b  d 
## 13  4

m[c(FALSE, FALSE, TRUE),  
    c(FALSE, TRUE)]

##  b  d 
## 13  4</code></pre>
<h2 id="矩阵运算">矩阵运算</h2>
<ul>
<li><code>colSums(), rowSums()</code></li>
<li>Standard arithmetic possible</li>
<li><strong>Element-wise</strong> computation</li>
</ul>
<!-- -->
<pre><code>the_fellowship &lt;- c(316, 556) 
two_towers &lt;- c(343, 584) 
return_king &lt;- c(378, 742) 
lotr_matrix &lt;- rbind(the_fellowship, two_towers, return_king) 
colnames(lotr_matrix) &lt;- c(&quot;US&quot;, &quot;non-US&quot;) 
rownames(lotr_matrix) &lt;- c(&quot;Fellowship&quot;, &quot;Two Towers&quot;,  
                             &quot;Return King&quot;) 
lotr_matrix

##              US non-US
## Fellowship  316    556
## Two Towers  343    584
## Return King 378    742

# 与数字 +-*/
lotr_matrix / 1.12 

##                   US   non-US
## Fellowship  282.1429 496.4286
## Two Towers  306.2500 521.4286
## Return King 337.5000 662.5000

lotr_matrix - 50

##              US non-US
## Fellowship  266    506
## Two Towers  293    534
## Return King 328    692

# 与矩阵 +-*/ (这里不是线性代数中的矩阵计算)
theater_cut &lt;- matrix(c(50, 80, 100), nrow = 3, ncol = 2)
theater_cut

##      [,1] [,2]
## [1,]   50   50
## [2,]   80   80
## [3,]  100  100

lotr_matrix - theater_cut

##              US non-US
## Fellowship  266    506
## Two Towers  263    504
## Return King 278    642

# 与向量
lotr_matrix - c(50, 80, 100) #按列循环计算

##              US non-US
## Fellowship  266    506
## Two Towers  263    504
## Return King 278    642</code></pre>
<h1 id="因子-factors">因子 Factors</h1>
<ul>
<li>Factors for categorical variables</li>
<li>Limited number of different values</li>
<li>Belong to category</li>
</ul>
<h2 id="创建因子-factor">创建因子 <code>factor()</code></h2>
<pre><code>blood &lt;- c(&quot;B&quot;, &quot;AB&quot;, &quot;O&quot;, &quot;A&quot;, &quot;O&quot;, &quot;O&quot;, &quot;A&quot;, &quot;B&quot;)
blood

## [1] &quot;B&quot;  &quot;AB&quot; &quot;O&quot;  &quot;A&quot;  &quot;O&quot;  &quot;O&quot;  &quot;A&quot;  &quot;B&quot;

blood_factor &lt;- factor(blood) # 默认等级按照字母顺序定
blood_factor

## [1] B  AB O  A  O  O  A  B 
## Levels: A AB B O

str(blood_factor)

##  Factor w/ 4 levels &quot;A&quot;,&quot;AB&quot;,&quot;B&quot;,&quot;O&quot;: 3 2 4 1 4 4 1 3

# 自定义level
blood_factor2 &lt;- factor(blood, 
                          levels = c(&quot;O&quot;, &quot;A&quot;, &quot;B&quot;, &quot;AB&quot;))
blood_factor2

## [1] B  AB O  A  O  O  A  B 
## Levels: O A B AB

str(blood_factor2)

##  Factor w/ 4 levels &quot;O&quot;,&quot;A&quot;,&quot;B&quot;,&quot;AB&quot;: 3 4 1 2 1 1 2 3</code></pre>
<h2 id="rename-factor-levels">Rename factor levels</h2>
<pre><code>blood &lt;- c(&quot;B&quot;, &quot;AB&quot;, &quot;O&quot;, &quot;A&quot;, &quot;O&quot;, &quot;O&quot;, &quot;A&quot;, &quot;B&quot;)
#1.1
blood_factor &lt;- factor(blood)
levels(blood_factor) &lt;- c(&quot;BT_A&quot;, &quot;BT_AB&quot;, &quot;BT_B&quot;, &quot;BT_O&quot;)
#1.2
blood &lt;- c(&quot;B&quot;, &quot;AB&quot;, &quot;O&quot;, &quot;A&quot;, &quot;O&quot;, &quot;O&quot;, &quot;A&quot;, &quot;B&quot;) 
blood_factor &lt;- factor(blood) 
factor(blood,  
         levels = c(&quot;O&quot;, &quot;A&quot;, &quot;B&quot;, &quot;AB&quot;),  
         labels = c(&quot;BT_O&quot;, &quot;BT_A&quot;, &quot;BT_B&quot;, &quot;BT_AB&quot;))

## [1] BT_B  BT_AB BT_O  BT_A  BT_O  BT_O  BT_A  BT_B 
## Levels: BT_O BT_A BT_B BT_AB

#2
factor(blood, labels = c(&quot;BT_A&quot;, &quot;BT_AB&quot;, &quot;BT_B&quot;, &quot;BT_O&quot;))

## [1] BT_B  BT_AB BT_O  BT_A  BT_O  BT_O  BT_A  BT_B 
## Levels: BT_A BT_AB BT_B BT_O</code></pre>
<h2 id="ordered-factor">Ordered factor</h2>
<pre><code>blood &lt;- c(&quot;B&quot;, &quot;AB&quot;, &quot;O&quot;, &quot;A&quot;, &quot;O&quot;, &quot;O&quot;, &quot;A&quot;, &quot;B&quot;)
blood_factor &lt;- factor(blood) 
blood_factor[1] &lt; blood_factor[2] 

## Warning in Ops.factor(blood_factor[1], blood_factor[2]): &#39;&lt;&#39; not meaningful
## for factors

## [1] NA

# 下面比较大小才是有意义的
tshirt &lt;- c(&quot;M&quot;, &quot;L&quot;, &quot;S&quot;, &quot;S&quot;, &quot;L&quot;, &quot;M&quot;, &quot;L&quot;, &quot;M&quot;)
tshirt_factor &lt;- factor(tshirt, ordered = TRUE, 
                          levels = c(&quot;S&quot;, &quot;M&quot;, &quot;L&quot;))
tshirt_factor

## [1] M L S S L M L M
## Levels: S &lt; M &lt; L

tshirt_factor[1] &lt; tshirt_factor[2]

## [1] TRUE</code></pre>
<h1 id="列表-list">列表 List</h1>
<p><em>Vector - Matrix - List</em></p>
<ul>
<li>Vector: 1D, same type</li>
<li>Matrix: 2D, same type</li>
<li>List:
<ul>
<li>Different R objects</li>
<li>No coercion</li>
<li>Loss of some functionality</li>
</ul></li>
</ul>
<h2 id="创建列表-list">创建列表 <code>list()</code></h2>
<pre><code>list(&quot;Rsome times&quot;, 190, 5)

## [[1]]
## [1] &quot;Rsome times&quot;
## 
## [[2]]
## [1] 190
## 
## [[3]]
## [1] 5

song &lt;- list(&quot;Rsome times&quot;, 190, 5)
is.list(song)

## [1] TRUE</code></pre>
<h2 id="命名列表">命名列表</h2>
<pre><code>#1
song &lt;- list(&quot;Rsome times&quot;, 190, 5) 
names(song) &lt;- c(&quot;title&quot;, &quot;duration&quot;, &quot;track&quot;)
song

## $title
## [1] &quot;Rsome times&quot;
## 
## $duration
## [1] 190
## 
## $track
## [1] 5

#2
song &lt;- list(title = &quot;Rsome times&quot;,  
               duration = 190,  
               track = 5)
song

## $title
## [1] &quot;Rsome times&quot;
## 
## $duration
## [1] 190
## 
## $track
## [1] 5

str(song)

## List of 3
##  $ title   : chr &quot;Rsome times&quot;
##  $ duration: num 190
##  $ track   : num 5</code></pre>
<h2 id="列表嵌套">列表嵌套</h2>
<pre><code>similar_song &lt;- list(title = &quot;R you on time?&quot;, 
                       duration = 230)
song &lt;- list(title = &quot;Rsome times&quot;, 
               duration = 190, track = 5,  
               similar = similar_song)
str(song)

## List of 4
##  $ title   : chr &quot;Rsome times&quot;
##  $ duration: num 190
##  $ track   : num 5
##  $ similar :List of 2
##   ..$ title   : chr &quot;R you on time?&quot;
##   ..$ duration: num 230</code></pre>
<h2 id="子集运算-1">子集运算</h2>
<p><code>[</code> versus <code>[[</code></p>
<pre><code>similar_song &lt;- list(title = &quot;R you on time?&quot;, 
                       duration = 230) 
song &lt;- list(title = &quot;Rsome times&quot;, 
               duration = 190, track = 5, 
               similar = similar_song) 
str(song)

## List of 4
##  $ title   : chr &quot;Rsome times&quot;
##  $ duration: num 190
##  $ track   : num 5
##  $ similar :List of 2
##   ..$ title   : chr &quot;R you on time?&quot;
##   ..$ duration: num 230

song[1]

## $title
## [1] &quot;Rsome times&quot;

song[[1]]

## [1] &quot;Rsome times&quot;

song[c(1, 3)] 

## $title
## [1] &quot;Rsome times&quot;
## 
## $track
## [1] 5

#song[[c(1, 3)]] #can&#39;t work
#song[[1]][[3]] #can&#39;t work
song[[&quot;duration&quot;]]

## [1] 190

song[&quot;duration&quot;]

## $duration
## [1] 190

song[c(FALSE, TRUE, TRUE, FALSE)]

## $duration
## [1] 190
## 
## $track
## [1] 5

#song[[c(FALSE, TRUE, TRUE, FALSE)]] # can&#39;t work
#song[[F]][[T]][[T]][[F]] #also

# list in list
song[[4]][[1]]

## [1] &quot;R you on time?&quot;

song[[c(4, 1)]]

## [1] &quot;R you on time?&quot;

song[c(&quot;duration&quot;, &quot;similar&quot;)] 

## $duration
## [1] 190
## 
## $similar
## $similar$title
## [1] &quot;R you on time?&quot;
## 
## $similar$duration
## [1] 230</code></pre>
<p><strong>[[ or [ ?</strong> + [[ to select list <em>element</em> + [ results in <em>sublist</em> + <em>[[ and $</em> to subset and extend lists</p>
<h2 id="列表扩展">列表扩展</h2>
<p>这里引出了R中比较重要的一个符号<code>$</code></p>
<pre><code>similar_song &lt;- list(title = &quot;R you on time?&quot;, 
                       duration = 230) 
song &lt;- list(title = &quot;Rsome times&quot;, 
               duration = 190, track = 5, 
               similar = similar_song) 
#$
song$duration

## [1] 190

#extending
friends &lt;- c(&quot;Kurt&quot;, &quot;Florence&quot;,
                &quot;Patti&quot;, &quot;Dave&quot;)
song$sent &lt;- friends #或者 song[[&quot;sent&quot;]] &lt;- friends
song$similar$reason &lt;- &quot;too long&quot;
song

## $title
## [1] &quot;Rsome times&quot;
## 
## $duration
## [1] 190
## 
## $track
## [1] 5
## 
## $similar
## $similar$title
## [1] &quot;R you on time?&quot;
## 
## $similar$duration
## [1] 230
## 
## $similar$reason
## [1] &quot;too long&quot;
## 
## 
## $sent
## [1] &quot;Kurt&quot;     &quot;Florence&quot; &quot;Patti&quot;    &quot;Dave&quot;</code></pre>
<h1 id="数据框-data-frame">数据框 Data Frame</h1>
<ul>
<li>Observations 观测值</li>
<li>Variables 变量</li>
<li>Example: people
<ul>
<li>each person = observation</li>
<li>properties (name, age …) = variables</li>
</ul></li>
<li>Rows = observations (persons)</li>
<li>Columns = variables (age, name, …)</li>
</ul>
<p>不同的变量的观测值可以类型不同，但是变量自己的所有观测值类型一致。</p>
<p>多在导入数据时使用。</p>
<h2 id="创建数据框">创建数据框</h2>
<pre><code>name &lt;- c(&quot;Anne&quot;, &quot;Pete&quot;, &quot;Frank&quot;, &quot;Julia&quot;, &quot;Cath&quot;) 
age &lt;- c(28, 30, 21, 39, 35) 
child &lt;- c(FALSE, TRUE, TRUE, FALSE, TRUE) 
df &lt;- data.frame(name, age, child) 
str(df)

## &#39;data.frame&#39;:    5 obs. of  3 variables:
##  $ name : Factor w/ 5 levels &quot;Anne&quot;,&quot;Cath&quot;,..: 1 5 3 4 2
##  $ age  : num  28 30 21 39 35
##  $ child: logi  FALSE TRUE TRUE FALSE TRUE</code></pre>
<h2 id="命名数据框">命名数据框</h2>
<pre><code>name &lt;- c(&quot;Anne&quot;, &quot;Pete&quot;, &quot;Frank&quot;, &quot;Julia&quot;, &quot;Cath&quot;) 
age &lt;- c(28, 30, 21, 39, 35) 
child &lt;- c(FALSE, TRUE, TRUE, FALSE, TRUE) 
df &lt;- data.frame(name, age, child)
names(df) &lt;- c(&quot;Name&quot;, &quot;Age&quot;, &quot;Child&quot;) 
str(df)

## &#39;data.frame&#39;:    5 obs. of  3 variables:
##  $ Name : Factor w/ 5 levels &quot;Anne&quot;,&quot;Cath&quot;,..: 1 5 3 4 2
##  $ Age  : num  28 30 21 39 35
##  $ Child: logi  FALSE TRUE TRUE FALSE TRUE

df &lt;- data.frame(Name = name, Age = age, Child = child) #also
str(df)

## &#39;data.frame&#39;:    5 obs. of  3 variables:
##  $ Name : Factor w/ 5 levels &quot;Anne&quot;,&quot;Cath&quot;,..: 1 5 3 4 2
##  $ Age  : num  28 30 21 39 35
##  $ Child: logi  FALSE TRUE TRUE FALSE TRUE</code></pre>
<p>可见，这里的字符串向量，被自动转化为因子类型，所以可以设置参数来避免此隐含行为。</p>
<pre><code>name &lt;- c(&quot;Anne&quot;, &quot;Pete&quot;, &quot;Frank&quot;, &quot;Julia&quot;, &quot;Cath&quot;) 
age &lt;- c(28, 30, 21, 39, 35) 
child &lt;- c(FALSE, TRUE, TRUE, FALSE, TRUE)
df &lt;- data.frame(name, age, child, 
                   stringsAsFactors = FALSE)
str(df)

## &#39;data.frame&#39;:    5 obs. of  3 variables:
##  $ name : chr  &quot;Anne&quot; &quot;Pete&quot; &quot;Frank&quot; &quot;Julia&quot; ...
##  $ age  : num  28 30 21 39 35
##  $ child: logi  FALSE TRUE TRUE FALSE TRUE</code></pre>
<h2 id="子集运算-2">子集运算</h2>
<p>Subset Data Frame * Subsetting syntax from matrices and lists * [ from matrices * [[ and $ from lists</p>
<pre><code>name &lt;- c(&quot;Anne&quot;, &quot;Pete&quot;, &quot;Frank&quot;, &quot;Julia&quot;, &quot;Cath&quot;) 
age &lt;- c(28, 30, 21, 39, 35) 
child &lt;- c(FALSE, TRUE, TRUE, FALSE, TRUE) 
people &lt;- data.frame(name, age, child,  
               stringsAsFactors = FALSE)

# 类似矩阵的操作
people[3,2] 

## [1] 21

people[3,&quot;age&quot;]

## [1] 21

people[,&quot;age&quot;]

## [1] 28 30 21 39 35

people[3,] # 由于返回的是一个数据框，我的R notebook不显示数据框

##    name age child
## 3 Frank  21  TRUE

people[c(3, 5), c(&quot;age&quot;, &quot;child&quot;)] # 同上

##   age child
## 3  21  TRUE
## 5  35  TRUE

# 类似列表的操作
people$age

## [1] 28 30 21 39 35

people[[&quot;age&quot;]]

## [1] 28 30 21 39 35

people[[2]]

## [1] 28 30 21 39 35

## 由于返回的是一个数据框，我的R notebook不显示数据框
people[&quot;age&quot;]

##   age
## 1  28
## 2  30
## 3  21
## 4  39
## 5  35

people[2]

##   age
## 1  28
## 2  30
## 3  21
## 4  39
## 5  35</code></pre>
<h2 id="扩展数据框">扩展数据框</h2>
<p>Extend Data Frame * Add columns = add variables * Add rows = add observations</p>
<pre><code>name &lt;- c(&quot;Anne&quot;, &quot;Pete&quot;, &quot;Frank&quot;, &quot;Julia&quot;, &quot;Cath&quot;) 
age &lt;- c(28, 30, 21, 39, 35) 
child &lt;- c(FALSE, TRUE, TRUE, FALSE, TRUE) 
people &lt;- data.frame(name, age, child,  
               stringsAsFactors = FALSE)
#Add column
height &lt;- c(163, 177, 163, 162, 157) 
people$height &lt;- height 
str(people)

## &#39;data.frame&#39;:    5 obs. of  4 variables:
##  $ name  : chr  &quot;Anne&quot; &quot;Pete&quot; &quot;Frank&quot; &quot;Julia&quot; ...
##  $ age   : num  28 30 21 39 35
##  $ child : logi  FALSE TRUE TRUE FALSE TRUE
##  $ height: num  163 177 163 162 157

##also
people[[&quot;height&quot;]] &lt;- height
str(people)

## &#39;data.frame&#39;:    5 obs. of  4 variables:
##  $ name  : chr  &quot;Anne&quot; &quot;Pete&quot; &quot;Frank&quot; &quot;Julia&quot; ...
##  $ age   : num  28 30 21 39 35
##  $ child : logi  FALSE TRUE TRUE FALSE TRUE
##  $ height: num  163 177 163 162 157

weight &lt;- c(74, 63, 68, 55, 56) 
cbind(people, weight)

##    name age child height weight
## 1  Anne  28 FALSE    163     74
## 2  Pete  30  TRUE    177     63
## 3 Frank  21  TRUE    163     68
## 4 Julia  39 FALSE    162     55
## 5  Cath  35  TRUE    157     56

#Add row 这里要注意，有时候会出错
tom &lt;- data.frame(&quot;Tom&quot;, 37, FALSE, 183)
#rbind(people, tom)
#会报错：
#Error : names do not match previous names
tom &lt;- data.frame(name = &quot;Tom&quot;, age = 37, 
            child = FALSE, height = 183)
rbind(people, tom) 

##    name age child height
## 1  Anne  28 FALSE    163
## 2  Pete  30  TRUE    177
## 3 Frank  21  TRUE    163
## 4 Julia  39 FALSE    162
## 5  Cath  35  TRUE    157
## 6   Tom  37 FALSE    183</code></pre>
<h2 id="排序">排序</h2>
<p>这里主要介绍了<code>sort()</code>与<code>order()</code>，其中，<code>order()</code>更适合用来为数据框调整顺序。</p>
<pre><code>str(people)

## &#39;data.frame&#39;:    5 obs. of  4 variables:
##  $ name  : chr  &quot;Anne&quot; &quot;Pete&quot; &quot;Frank&quot; &quot;Julia&quot; ...
##  $ age   : num  28 30 21 39 35
##  $ child : logi  FALSE TRUE TRUE FALSE TRUE
##  $ height: num  163 177 163 162 157

#sort()直接对于向量元素进行了排序
sort(people$age)

## [1] 21 28 30 35 39

#order()会返回对应大小等级所实际在的位置
ranks &lt;- order(people$age) 
ranks

## [1] 3 1 2 5 4

people$age

## [1] 28 30 21 39 35

people[ranks, ] #直接对行进行了排序

##    name age child height
## 3 Frank  21  TRUE    163
## 1  Anne  28 FALSE    163
## 2  Pete  30  TRUE    177
## 5  Cath  35  TRUE    157
## 4 Julia  39 FALSE    162

#或者如下可以实现降序排序
people[order(people$age, decreasing = TRUE), ] 

##    name age child height
## 4 Julia  39 FALSE    162
## 5  Cath  35  TRUE    157
## 2  Pete  30  TRUE    177
## 1  Anne  28 FALSE    163
## 3 Frank  21  TRUE    163</code></pre>
<h1 id="绘图-graphics">绘图 Graphics</h1>
<p>这里主要介绍了<code>graphics</code>包的<code>plot()</code>与<code>hist()</code></p>
<p><code>plot()</code>会根据不同的数据类型，而画出不同的图像</p>
<ol type="1">
<li>plot() (categorical) 条形图 例如：<code>plot(countries$continent)</code></li>
<li>plot() (numerical) 散点图 例如：<code>plot(countries$population)</code></li>
<li>plot() (2x numerical) 散点图 例如：<code>plot(countries$area, countries$population)</code>、 <code>plot(log(countries$area), log(countries$population))</code></li>
<li>plot() (2x categorical) 某种条形图的变形 例如：<code>plot(countries$continent, countries$religion)</code></li>
</ol>
<p><code>hist()</code>可以绘制直方图 例如： <code>hist(africa$population)</code>、 <code>hist(africa$population, breaks = 10)</code></p>
<p>Other graphics functions * barplot() * boxplot() * pairs()</p>
<h2 id="自定义绘图">自定义绘图</h2>
<p>这里就是修改参数了。无需多讲。</p>
<p>这里，引出了函数<code>par()</code>，这是一个绘图的公共参数<strong>列表</strong>，里面存放着常用的一些绘图的公共属性，可以实现绘制多幅图形时，基本属性的一次性确定。</p>
<p>例如：</p>
<pre><code>par(col = &quot;blue&quot;) 
plot(mercury$temperature, mercury$pressure) </code></pre>
<p>常用的plot的属性有：</p>
<pre><code>plot(mercury$temperature, mercury$pressure, 
       xlab = &quot;Temperature&quot;, 
       ylab = &quot;Pressure&quot;, 
       main = &quot;T vs P for Mercury&quot;, #标题
       type = &quot;o&quot;, 
       col = &quot;orange&quot;, 
       col.main = &quot;darkgray&quot;, 
       cex.axis = 0.6, #cex系列属性表示缩放程度
       lty = 5, #Line Type
       pch = 4  #Plot Symbol
       )
       </code></pre>
<h2 id="多图绘制">多图绘制</h2>
<p><code>mfrow</code>与<code>mfcol</code>参数可以在一个图形框里，用来放置多个图像，区别是，前者是将后面plot语句生成的图像按行填充，而后者是按列填充。</p>
<pre><code>#按行填充
par(mfrow = c(2,2)) 
plot(shop$ads, shop$sales) 
plot(shop$comp, shop$sales) 
plot(shop$inv, shop$sales) 
plot(shop$size_dist, shop$sales)

#按列填充
par(mfcol = c(2,2)) 
plot(shop$ads, shop$sales) 
plot(shop$comp, shop$sales) 
plot(shop$inv, shop$sales) 
plot(shop$size_dist, shop$sales)</code></pre>
<p>Reset the grid</p>
<pre><code>par(mfrow = c(1,1))</code></pre>
<p>相较于这个，<code>layout()</code>函数设置的更为灵活。</p>
<pre><code>grid &lt;- matrix(c(1, 1, 2, 3), nrow = 2, 
         ncol = 2, byrow = TRUE) 
layout(grid)
plot(shop$ads, shop$sales) #放在grid的1号位置
plot(shop$comp, shop$sales) #放在grid的2号位置
plot(shop$inv, shop$sales) #放在grid的3号位置</code></pre>
<p>Reset the grid</p>
<pre><code>layout(1) 
par(mfcol = c(1,1))</code></pre>
<p>Reset all parameters</p>
<pre><code>old_par &lt;- par() 
par(col = &quot;red&quot;) 
plot(shop$ads, shop$sales) 
par(old_par) 
plot(shop$ads, shop$sales)</code></pre>
<h2 id="线性拟合">线性拟合</h2>
<p>引出函数<code>lm()</code> —— <em>linear model</em>，**lm(a~b)就是对a=k*b+c进行线性拟合**</p>
<pre><code>plot(shop$ads, shop$sales, 
      pch = 16, col = 2, 
      xlab = &quot;advertisement&quot;, 
      ylab = &quot;net sales&quot;)
lm_sales &lt;- lm(shop$sales ~ shop$ads)
abline(coef(lm_sales), lwd = 2) #取模型系数，线宽为2，画直线</code></pre>

      
    </div>

    

    
    
    

    

    
       
    
    

    
      <div>
        



  



<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Lart Pang</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    
    <a href="https://plart.pw/langs/r/R基本数据结构/" title="R基本数据结构">https://plart.pw/langs/r/R基本数据结构/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/R/" rel="tag"># R</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div class="social_share">
            
            
               <div id="needsharebutton-postbottom">
                 <span class="btn">
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                 </span>
               </div>
            
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/langs/chuck/chuck5/" rel="next" title="chuck5">
                <i class="fa fa-chevron-left"></i> chuck5
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/life/2017总结/" rel="prev" title="2017年总结">
                2017年总结 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Lart Pang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">58</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">30</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/lartpang" title="GitHub &rarr; https://github.com/lartpang" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:%6C%61%72%74%70%61%6E%67%40%31%36%33%2E%63%6F%6D" title="E-Mail &rarr; mailto:%6C%61%72%74%70%61%6E%67%40%31%36%33%2E%63%6F%6D" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://weibo.com/140jmx" title="Weibo &rarr; https://weibo.com/140jmx" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#工作空间相关"><span class="nav-number">1.</span> <span class="nav-text">工作空间相关</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#基本数据类型"><span class="nav-number">2.</span> <span class="nav-text">基本数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#强制转换"><span class="nav-number">2.1.</span> <span class="nav-text">强制转换</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#向量-vector"><span class="nav-number">3.</span> <span class="nav-text">向量 Vector</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建-c或者利用"><span class="nav-number">3.1.</span> <span class="nav-text">创建 c()或者利用:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命名-names"><span class="nav-number">3.2.</span> <span class="nav-text">命名 names()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#单值仍为向量"><span class="nav-number">3.3.</span> <span class="nav-text">单值仍为向量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#强制变换"><span class="nav-number">3.4.</span> <span class="nav-text">强制变换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基本运算"><span class="nav-number">3.5.</span> <span class="nav-text">基本运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#子集"><span class="nav-number">3.6.</span> <span class="nav-text">子集</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#矩阵-matrix"><span class="nav-number">4.</span> <span class="nav-text">矩阵 Matrix</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建-matrix"><span class="nav-number">4.1.</span> <span class="nav-text">创建 matrix()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命名"><span class="nav-number">4.2.</span> <span class="nav-text">命名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#强制转换-1"><span class="nav-number">4.3.</span> <span class="nav-text">强制转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#子集运算"><span class="nav-number">4.4.</span> <span class="nav-text">子集运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#矩阵运算"><span class="nav-number">4.5.</span> <span class="nav-text">矩阵运算</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#因子-factors"><span class="nav-number">5.</span> <span class="nav-text">因子 Factors</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建因子-factor"><span class="nav-number">5.1.</span> <span class="nav-text">创建因子 factor()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rename-factor-levels"><span class="nav-number">5.2.</span> <span class="nav-text">Rename factor levels</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ordered-factor"><span class="nav-number">5.3.</span> <span class="nav-text">Ordered factor</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#列表-list"><span class="nav-number">6.</span> <span class="nav-text">列表 List</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建列表-list"><span class="nav-number">6.1.</span> <span class="nav-text">创建列表 list()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命名列表"><span class="nav-number">6.2.</span> <span class="nav-text">命名列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#列表嵌套"><span class="nav-number">6.3.</span> <span class="nav-text">列表嵌套</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#子集运算-1"><span class="nav-number">6.4.</span> <span class="nav-text">子集运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#列表扩展"><span class="nav-number">6.5.</span> <span class="nav-text">列表扩展</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数据框-data-frame"><span class="nav-number">7.</span> <span class="nav-text">数据框 Data Frame</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建数据框"><span class="nav-number">7.1.</span> <span class="nav-text">创建数据框</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命名数据框"><span class="nav-number">7.2.</span> <span class="nav-text">命名数据框</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#子集运算-2"><span class="nav-number">7.3.</span> <span class="nav-text">子集运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#扩展数据框"><span class="nav-number">7.4.</span> <span class="nav-text">扩展数据框</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#排序"><span class="nav-number">7.5.</span> <span class="nav-text">排序</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#绘图-graphics"><span class="nav-number">8.</span> <span class="nav-text">绘图 Graphics</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义绘图"><span class="nav-number">8.1.</span> <span class="nav-text">自定义绘图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多图绘制"><span class="nav-number">8.2.</span> <span class="nav-text">多图绘制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#线性拟合"><span class="nav-number">8.3.</span> <span class="nav-text">线性拟合</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 – <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lart Pang</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v6.5.0</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  













  



  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/reading_progress/reading_progress.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.5.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.5.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.5.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.5.0"></script>



  



  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  
  

  


  
  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>

  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('复制成功')
          else $(this).text('复制失败')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>


  

</body>
</html>
