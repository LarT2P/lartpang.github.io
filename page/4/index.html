<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">



  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-center-simple.min.css?v=1.0.2" rel="stylesheet">




  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.5.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.5.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.5.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.5.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="失乐园">
<meta property="og:url" content="https://plart.pw/page/4/index.html">
<meta property="og:site_name" content="失乐园">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="失乐园">



  <link rel="alternate" href="/atom.xml" title="失乐园" type="application/atom+xml">




  <link rel="canonical" href="https://plart.pw/page/4/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>失乐园</title>
  











  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">失乐园</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">代码与机器</h1>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">30</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">6</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">58</span></a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  
  
  

  

    <a href="https://github.com/lartpang" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" style="fill: #222; color: #fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/langs/chuck/chuck2/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/langs/chuck/chuck2/" class="post-title-link" itemprop="https://plart.pw/page/4/index.html">chuck2</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-15 21:40:10" itemprop="dateCreated datePublished" datetime="2018-02-15T21:40:10+08:00">2018-02-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:46:35" itemprop="dateModified" datetime="2018-07-13T20:46:35+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程与生活/" itemprop="url" rel="index"><span itemprop="name">编程与生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">4.3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">8 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p>#Overview</p>
<p>ChucK is a strongly-typed, strongly-timed, concurrent(并发的) audio and multimedia(多媒体的) programming language. It is compiled(编译) into virtual(虚拟的) instructions, which is immediately run in the ChucK Virtual Machine. This guide documents the features(特色) of the Language, Compiler, and Virtual Machine for a ChucK programmer.</p>
<p>#running ChucK</p>
<p>...this is a quick overview(综述), see <a href="http://chuck.cs.princeton.edu/doc/program/vm.html" target="_blank" rel="noopener">VM options</a> for a more complete guide to command line options.</p>
<p>To run ChucK with a program/patch called foo.ck simply run chuck and then the name of the file:</p>
<pre><code>chuck foo.ck </code></pre>
<p>To run ChucK with multiple patches concurrently(同时发生) (or the same one multiple times):</p>
<pre><code>chuck foo.ck bar.ck bar.ck boo.ck </code></pre>
<p>...the following probes(探查) the audio system and prints out all available audio devices and MIDI devices. You may then refer to them (by number usually) from the command line or from your program. (again, see VM Options for a complete list)</p>
<pre><code>chuck --probe </code></pre>
<p>ChucK can be run in a different terminal as a host/listener that patches may be sent to. The server should invoke(调用) the --loop flag to specify that the virtual machine should not halt(停止) automatically(自动地) (when the current programs exit).</p>
<pre><code>chuck --loop     </code></pre>
<p>(See the guide to <a href="http://chuck.cs.princeton.edu/doc/program/otfp.html" target="_blank" rel="noopener">On-the-fly Programming</a> for more information)</p>
<p>If a ChucK listener is running, we can (from a second terminal) send a program/patch to the listener by using the <code>+</code> command line option:</p>
<pre><code>chuck + foo.ck </code></pre>
<p>Similarly, you can use <code>-</code> and <code>=</code> to <em>remove/replace</em> a patch in the listener, and use <code>^</code> to find out the status. Again, see <a href="http://chuck.cs.princeton.edu/doc/program/otfp.html" target="_blank" rel="noopener">On-the-fly Programming</a> for more information.</p>
<p>To run most of the code or examples in this language specification, you only need to use the basic chuck program.</p>
<p>#comments(注释)</p>
<p>(Note: block comments cannot be nested(嵌入的))</p>
<pre><code>// this is a comment
int foo; // another comment

/* 
   this is a block comment
   still going...
*/</code></pre>
<p>#debug print(调试输出)</p>
<p>...we have provided a debug print syntax(语法):</p>
<pre><code>// prints out value of expression
&lt;&lt;&lt; expression &gt;&gt;&gt;;</code></pre>
<p>This will print the values and types of any expressions placed within them. This debug print construction may be placed around any non-declaration expression ( non l-value ) and will not affect the execution(执行) of the code. Expressions which represent an object will print the value of that object's reference(引用) address:</p>
<pre><code>// assign 5 to a newly declared variable
5 =&gt; int i;
// prints &quot;5 : (int)&quot;
&lt;&lt;&lt;i&gt;&gt;&gt;;

// prints &quot;hello! : (string)&quot;
&lt;&lt;&lt;&quot;hello!&quot;&gt;&gt;&gt;; //prints &quot;hello! : (string)&quot;

// prints &quot;3.5 : (float)&quot;
&lt;&lt;&lt;1.0 + 2.5 &gt;&gt;&gt; =&gt; float x;</code></pre>
<p>(ChucK中似乎是没有了print这一类) (Chuck中有<code>;</code>，还是类似C的)</p>
<p>For more formatted(格式化) data output(输出), a comma-separated list of expressions will print only their respective(分别的) values (with one space between):</p>
<pre><code>//接上段
// prints &quot;the value of x is 3.5&quot; (x from above)
&lt;&lt;&lt;&quot;the value of x is&quot; , x &gt;&gt;&gt;;

// prints &quot;4 + 5 is 9&quot;
&lt;&lt;&lt;&quot;4 + 5 is&quot;, 4 + 5&gt;&gt;&gt;;

// prints &quot;here are 3 random numbers ? ? ?&quot;
&lt;&lt;&lt;&quot;here are 3 random numbers&quot;, 
    Std.rand2(0,9), 
    Std.rand2(0,9),
    Std.rand2(0,9) &gt;&gt;&gt;; </code></pre>
<blockquote>
<p>输出： C:1&gt;chuck &quot;debug print.ck&quot; 5 :(int) &quot;hello!&quot; : (string) 3.500000 :(float) the value of x is 3.500000 4 + 5 is 9 here are 3 random numbers 1 8 8</p>
</blockquote>
<p>#reserved words(关键字)</p>
<pre><code>(primitive types原始类型)
    int
    float
    time
    dur
    void
    same (unimplemented未实现的) 

(control structures)
    if
    else
    while
    until
    for
    repeat
    break
    continue
    return
    switch (unimplemented) 

(class keywords)
    class
    extends
    public
    static
    pure
    this
    super (unimplemented)
    interface (unimplemented)
    implements (unimplemented)
    protected (unimplemented)
    private (unimplemented) 

(other chuck keywords)
    function
    fun
    spork
    const
    new 

(special values)
    now
    true
    false
    maybe
    null
    NULL
    me
    pi 

(special : default durations(默认持续时间))
    samp
    ms
    second
    minute
    hour
    day
    week 

(special : global ugens(不理解))
    dac
    adc
    blackhole </code></pre>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/langs/chuck/chuck3/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/langs/chuck/chuck3/" class="post-title-link" itemprop="https://plart.pw/page/4/index.html">chuck3</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-15 21:40:10" itemprop="dateCreated datePublished" datetime="2018-02-15T21:40:10+08:00">2018-02-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:46:41" itemprop="dateModified" datetime="2018-07-13T20:46:41+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程与生活/" itemprop="url" rel="index"><span itemprop="name">编程与生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">6.3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">12 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p>#Types, Values, and Variables(变量)</p>
<p>ChucK is a strongly-typed language, meaning that types <em>are resolved(决定) at compile-time</em>. However, it is not quite statically-typed, because <strong>the compiler/type system is a part of the ChucK virtual(虚拟的) machine, and is a runtime component(成分)</strong>. This type system helps to impose(强加) precision(精度) and clarity(清楚) in the code, and naturally lends to organization of complex(复杂的) programs. At the same time, it is also <em>dynamic</em> in that changes to the type system can take place (in a well-defined(定义明确的) manner) at runtime. This dynamic(动态的) aspect(方面) forms the basis(基础) for <a href="http://on-the-fly.cs.princeton.edu/" target="_blank" rel="noopener">on-the-fly programming</a>.</p>
<p>This section deals with <em>types, values, and the declaration(声明) and usage(使用) of variables</em>. As in other strongly-typed programming languages, we can think of a type as associated(关联的) behaviors(行为) of data. (For example, an 'int' is a type that means integer(整数), and adding two integer is defined(定义) to produce a third integer representing the sum.) <em>Classes and objects</em> allow us to extend(延伸) the type system with our own custom types, but we won't cover them in this section. <strong>We will focus mainly on <em>primitive(原始的) types</em> here, and leave the discussion of more complex types for <a href="http://chuck.cs.princeton.edu/doc/language/class.html" target="_blank" rel="noopener">classes and objects</a>.</strong></p>
<p>#primitive types(原始类型)</p>
<p>The primitive(原始的), or intrinsic(本质的) types are those which are simple datatypes (they have no additional(附加的) data attributes(属性)). <em>Objects are not primitive types.</em> <strong>Primitive types are passed by value. Primitive types cannot be extended(延伸).</strong> The primitive types in ChucK are:</p>
<pre><code>int : integer(整数) (signed)
float : floating point number (in ChucK, a float is by default double-precision(双精度))
time : ChucKian time
dur : ChucKian duration(持续)
void : (no type)
complex : complex number in rectangular(矩形的) form a + bi (see [below][1])
polar: complex number in polar(极面) form (see [below][1])</code></pre>
<p>For a summary of operations on these types, go to <a href="http://chuck.cs.princeton.edu/doc/language/oper.html" target="_blank" rel="noopener">operations and operators</a>.</p>
<p>All other types are derived(派生) from 'object', either as part of the ChucK standard library, or as a new class that you create. For specification(规格), go to <a href="http://chuck.cs.princeton.edu/doc/language/class.html" target="_blank" rel="noopener">classes and objects</a>.</p>
<p>#values (literals(字面值))</p>
<p>Literal values are specified(指定) explicitly(明确地) in code and are assigned(分配) a type by the compiler(编译器).The following are some examples of literal values:</p>
<pre><code>int:

42

int (hexidecimal):

0xaf30

float:

1.323

dur:

5.5::second
//In the above code, second is an existing duration(持续) variable(变量). 
//For more on durations, see the [manipulating time(时间调节)][4] section. </code></pre>
<p>#variables</p>
<p><strong>Variables(变量) are locations in memory that hold data.</strong> <em>Variables have to be declared in ChucK before they are used.</em> For example, to declare a variable of type int called foo:</p>
<pre><code>// declare an &#39;int&#39; called &#39;foo&#39;
int foo;</code></pre>
<p>We can assign(分配) a value to <em>an existing variable</em> by using the ChucK operator (<code>=&gt;</code>). This is one of the most commonly used operators in ChucK, it's the way to do work and take action! (后面会讨论)</p>
<pre><code>// assign value of 2 to &#39;foo&#39;
2 =&gt; foo;</code></pre>
<p>It is possible to combine the two statements(声明) into one:</p>
<pre><code>// assign 2 to a new variable &#39;foo&#39; of type &#39;int&#39;
2 =&gt; int foo;</code></pre>
<p>To use a variable, just refer to it by name:</p>
<pre><code>// debug-print the value of foo
&lt;&lt;&lt; foo &gt;&gt;&gt;;</code></pre>
<p>To update the value of foo, for example:</p>
<pre><code>// multiply &#39;foo&#39; by 10, assign back to &#39;foo&#39;
foo * 10 =&gt; foo;</code></pre>
<p>You can also do the above using a <code>*=&gt;</code> (mult-chuck):</p>
<pre><code>// multiply &#39;foo&#39; by 10, and then assign to &#39;foo&#39;
10 *=&gt; foo;</code></pre>
<p>Here is an example of a duration(持续):</p>
<pre><code>// assign value of &#39;5 seconds&#39; to new variable bar
5::second =&gt; dur bar;</code></pre>
<p>Once you have bar, you can inductively(归纳的) use it to construct new durations:</p>
<pre><code>// 4 bar, a measure?
4::bar =&gt; dur measure;</code></pre>
<blockquote>
<p>输出： C:1&gt;chuck test.ck 882000.000000 :(dur)</p>
</blockquote>
<p>Since time is central to programming ChucK, it is important to understand time, dur, the relationship and operations between them. There is more information in the <a href="http://chuck.cs.princeton.edu/doc/language/time.html" target="_blank" rel="noopener">manipulating time</a> section.</p>
<p>#reference types(引用类型)</p>
<p>Reference(参考) types are types which inherit(继承) from the object class. Some default reference types include:</p>
<pre><code>Object : base type that all classes inherit from (directly or indirectly)所有类继承的基本类型
array : N-dimensional ordered(有序的) set of data (of the same type)
Event : fundamental(基本的), extendable(可扩展的), synchronization(同步) mechanism(机制)
UGen : extendable unit generator(单元发生器) base class (U = unit, Gen = generator)
string : string (of characters)</code></pre>
<p>New classes can be created. <strong>All classes are reference types.</strong> We will leave the full discussion to the <a href="http://chuck.cs.princeton.edu/doc/language/class.html" target="_blank" rel="noopener">objects and classes</a> section.</p>
<p>#complex types (虚数：直角坐标系，极坐标系)</p>
<p>Two special <code>primitive types</code> are available to to represent complex (复杂的)data, such as the output (输出)of an FFT: complex and polar. A complex number of the form a + bi can be declared as</p>
<pre><code>#(2,3) =&gt; complex cmp; //cmp is now 2 + 3i </code></pre>
<p>where the #(...) syntax(语法) explicitly(明确地) denotes(表示) a complex number in rectangular form(矩形). Similarly, explicit complex numbers can be manipulated(操纵) directly:</p>
<pre><code>#(5, -1.5) =&gt; complex cmp; // cmp is 5 - 1.5i
#(2,3) + #(5,6) + cmp =&gt; complex sum; // sum is now 12 + 7.5i</code></pre>
<p>The (floating point) real and imaginary parts(实虚部) of a complex number can be accessed(存取) with the .re and .im components of a complex number:</p>
<pre><code>#(2.0,3.5) =&gt; complex cmp;
cmp.re =&gt; float x; // x is 2.0
cmp.im =&gt; float y; //y is 3.5</code></pre>
<p>The polar type(极坐标) offers an equivalent(等价的), alternative(供选择的) representation(表示) of complex numbers in terms of a magnitude(大小) and phase(相) value. A polar representation of a complex number can be declared as</p>
<pre><code>%(2, .5*pi) =&gt; polar pol; // pol is 2∠.5π(没有想到，竟然有这个(●&#39;◡&#39;●))</code></pre>
<p>The magnitude(大小) and phase(相) values can be accessed via .mag and .phase:</p>
<pre><code>%(2, .5*pi) =&gt; polar pol;
pol.mag =&gt; float m; // m is 2
pol.phase =&gt; float p; //p is .5π</code></pre>
<p>polar and complex representations(代表) can be cast to each other and multiplied/added/assigned(分配)/etc.:</p>
<pre><code>%(2, .5*pi) =&gt; polar pol;
#(3, 4) =&gt; complex cmp;
pol $ complex + #(10, 3) + cmp =&gt; complex cmp2;
cmp $ polar + %(10, .25*pi) - pol =&gt; polar pol2;</code></pre>
<p>(这里的$实现了两种坐标系下表示的转换) &gt;输出： C:1&gt;chuck test.ck %(2.0000,0.5000<em>pi) :(polar) #(3.0000,4.0000) :(complex) #(13.0000,9.0000) :(complex) %(13.5540,0.2334</em>pi) :(polar)</p>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/langs/cpp/Cpp基础_5/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/langs/cpp/Cpp基础_5/" class="post-title-link" itemprop="https://plart.pw/page/4/index.html">C++基础5</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-15 21:39:17" itemprop="dateCreated datePublished" datetime="2018-02-15T21:39:17+08:00">2018-02-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:45:40" itemprop="dateModified" datetime="2018-07-13T20:45:40+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程与生活/" itemprop="url" rel="index"><span itemprop="name">编程与生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">3.1k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">6 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p><strong><em>程序文件拆分</em></strong> 函数总是申明在前，调用在后，拆分的程序文件中也要遵循这样的规则，所以，在拆分文件中才需要在多处申明函数。</p>
<ol type="1">
<li>头文件 包含头文件，就是将那些函数声明做成一个.h文件，用指令#include来将他们加在程序文件的开始处</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//===========================================</span></span><br><span class="line"><span class="comment">//abc.h</span></span><br><span class="line"><span class="comment">//===========================================</span></span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">f1</span><span class="params">()</span></span>;</span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">f2</span><span class="params">()</span></span>;</span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">f3</span><span class="params">()</span></span>;</span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">g1</span><span class="params">()</span></span>;</span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">g2</span><span class="params">()</span></span>;</span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">p</span><span class="params">()</span></span>;</span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">h</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//===========================================</span></span><br></pre></td></tr></table></figure>
<p>然后在每个程序文件的开端包含它，这对于所要使用的函，就无需再次声明了</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//===========================================</span></span><br><span class="line"><span class="comment">//a1.cpp</span></span><br><span class="line"><span class="comment">//===========================================</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"abc.h"</span></span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">f1</span><span class="params">(...)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(...)</span><br><span class="line">        &#123;</span><br><span class="line">            p();</span><br><span class="line">            g1();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            g2();</span><br><span class="line">            h();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//============================================</span></span><br><span class="line">  <span class="comment">//a2.cpp</span></span><br><span class="line">  <span class="comment">//============================================</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"abc.h"</span></span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        f1();</span><br><span class="line">        f2();</span><br><span class="line">        f3();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">f3</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        f1();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">p</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        f3();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//=============================================</span></span><br><span class="line">  <span class="comment">//a3.cpp</span></span><br><span class="line">  <span class="comment">//=============================================</span></span><br><span class="line">4<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"abc.h"</span></span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">h</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">viod <span class="title">f2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        g1();</span><br><span class="line">        g2();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">g1</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">g2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>界面头文件 头文件更重要的作用是在设计阶段（相较于编程阶段）规定界面，也就是通过头文件可以明白的看出，某个程序文件提供了什么服务，这种文件称为用户界面，</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a1.h</span></span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">f1</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//a2.h</span></span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">p</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//a3.h</span></span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">g1</span><span class="params">()</span></span>;</span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">g2</span><span class="params">()</span></span>;</span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">f2</span><span class="params">()</span></span>;</span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">h</span><span class="params">()</span></span>;</span><br><span class="line">通过使用用户界面的形式，上面呢三个文件就可以这样表达：</span><br><span class="line"><span class="comment">//==============================================</span></span><br><span class="line"><span class="comment">//a1.cpp</span></span><br><span class="line"><span class="comment">//==============================================</span></span><br><span class="line">4<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"a2.h"</span></span></span><br><span class="line">4<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"a3.h"</span></span></span><br><span class="line">4</span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">f1</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">44<span class="keyword">if</span>()</span><br><span class="line">44&#123;&#125;</span><br><span class="line">44<span class="keyword">else</span></span><br><span class="line">44&#123;&#125;</span><br><span class="line">4&#125;</span><br><span class="line">4</span><br><span class="line"><span class="comment">//==============================================</span></span><br><span class="line"><span class="comment">//a2.cpp</span></span><br><span class="line"><span class="comment">//==============================================	</span></span><br><span class="line">4#include <span class="string">"a1.h"</span></span><br><span class="line">4#include <span class="string">"a3.h"</span></span><br><span class="line">4<span class="keyword">static</span> <span class="keyword">void</span> f3();</span><br><span class="line">4</span><br><span class="line">4<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">44f1();</span><br><span class="line">44f2();</span><br><span class="line">44f3();</span><br><span class="line">4&#125;</span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">f3</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">  		f1();</span><br><span class="line">4&#125;</span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">p</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">  		f3();</span><br><span class="line">  	&#125;</span><br><span class="line">  	</span><br><span class="line"><span class="comment">//===============================================</span></span><br><span class="line"><span class="comment">//a3.h</span></span><br><span class="line"><span class="comment">//===============================================</span></span><br><span class="line">4<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"a3.h"</span></span></span><br><span class="line">4</span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">h</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;&#125;</span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">f3</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">  		g1();</span><br><span class="line">  		g2();</span><br><span class="line">4&#125;</span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">g1</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;&#125;</span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">g2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;&#125;</span><br><span class="line"><span class="comment">//===============================================</span></span><br><span class="line"><span class="number">3.</span> 头文件内容</span><br><span class="line"><span class="comment">//===============================================</span></span><br><span class="line"><span class="comment">//header.h</span></span><br><span class="line"><span class="comment">//===============================================</span></span><br><span class="line">4<span class="keyword">extern</span> <span class="keyword">int</span> n;</span><br><span class="line">4<span class="keyword">extern</span> <span class="keyword">int</span> a[];</span><br><span class="line">4<span class="function"><span class="keyword">void</span> <span class="title">fn</span><span class="params">()</span></span>;</span><br><span class="line">4<span class="class"><span class="keyword">class</span> <span class="title">A</span>;</span></span><br><span class="line">4<span class="keyword">const</span> <span class="keyword">float</span> pi = <span class="number">3.14</span>;</span><br><span class="line">4<span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">fn</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">4<span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt; <span class="title">class</span> <span class="title">A</span>&#123;</span>&#125;;</span><br><span class="line">4<span class="keyword">namespace</span> N&#123;&#125;</span><br><span class="line">4<span class="keyword">enum</span> COLOR&#123;&#125;;</span><br><span class="line">4<span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span>&#125;;</span><br><span class="line">4<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line">4<span class="comment">// 2016年7月23日22:33:54</span></span><br><span class="line"><span class="comment">//===============================================</span></span><br></pre></td></tr></table></figure>
<p><strong>由于头文件可能出现在一个程序的若干个源程序文件中，所以将一些实体定义放在文件中是不明智的，因为一种定义体在一个程序中只能出现一次</strong></p>
<ol start="4" type="1">
<li>全局数据区的整个区域在程序启动时，初始化为零。</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/langs/cpp/Cpp基础_4/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/langs/cpp/Cpp基础_4/" class="post-title-link" itemprop="https://plart.pw/page/4/index.html">C++基础4</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-15 21:38:58" itemprop="dateCreated datePublished" datetime="2018-02-15T21:38:58+08:00">2018-02-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:45:37" itemprop="dateModified" datetime="2018-07-13T20:45:37+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程与生活/" itemprop="url" rel="index"><span itemprop="name">编程与生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">986</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p>//程序文件拆分 函数总是申明在前，调用在后，拆分的程序文件中也要遵循这样的规则，所以，在拆分文件中才需要在多处申明函数。 0. 头文件 包含头文件，就是将那些函数声明做成一个.h文件，用指令#include来将他们加在程序文件的开始处 //=========================================== //abc.h //=========================================== void f1(); void f2(); void f3(); void g1(); void g2(); void p(); void h(); //=========================================== 然后在每个程序文件的开端包含它，这对于所要使用的函，就无需再次声明了 //=========================================== //a1.cpp //=========================================== #include &quot;abc.h&quot; void f1(...) { if(...) { p(); g1(); } else { g2(); h(); } }</p>
<p>//============================================ //a2.cpp //============================================ #include &quot;abc.h&quot; int main() { f1(); f2(); f3(); } void f3() { f1(); } void p() { f3(); }</p>
<p>//============================================= //a3.cpp //============================================= #include &quot;abc.h&quot; void h() { ... } viod f2() { g1(); g2(); } void g1() { ... } void g2() { ... }</p>
<p>界面头文件</p>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/langs/cpp/Cpp基础_3/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/langs/cpp/Cpp基础_3/" class="post-title-link" itemprop="https://plart.pw/page/4/index.html">C++基础3</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-15 21:38:47" itemprop="dateCreated datePublished" datetime="2018-02-15T21:38:47+08:00">2018-02-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:45:21" itemprop="dateModified" datetime="2018-07-13T20:45:21+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程与生活/" itemprop="url" rel="index"><span itemprop="name">编程与生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">4 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <ol type="1">
<li>未初始化的数组的内容是未定义的，且其末尾的空字符是不确定的，有可能在限定字节外。</li>
<li>未初始化的 string 对象长度自动设定为0。</li>
<li><p>wchar_t, char16_t, char32_t 三种字符串 wchar_t title[] = L&quot;Chief Astrogator&quot;; char16_t name[] = u&quot;Felonia Ripova&quot;; char32_t car[] = U&quot;Humber Super Snipe&quot;;</p></li>
<li><p>原始(raw)字符串 cout &lt;&lt; R&quot;(l&quot;s&quot; / ; &quot; &quot;&quot; lafjlj.)&quot; &lt;&lt; endl; 原样输出； 上面的方式有不足，会把第一个 ' )&quot; ' 认为是字符串到此结尾； cout &lt;&lt; R&quot;+<em>(&quot;(dkshfk)&quot;), jsfjldsjf.)+</em>&quot; &lt;&lt; endl; 输入时会忽视特殊字符的特殊用途，回车会被添加到原始字符串中； 可以使用 Ru UR 等配合wchar_t 等类型的原始字符串；</p></li>
<li><p>结构 C: struct inflatable goose; C++: inflatable vincent; *访问类成员函数的点号方式即使从访问结构成员变量的方式衍生而来； -------------------------- <string> struct test { std::string name; flaot volume; double price; }; struct inflatable { char name[20]; float colume; double prince; }; int main() { inflatable guest = { &quot;lasfj&quot;, 1.88, 29.99 };</string></p>
<p>inflatable pal1 = {&quot;sakdfh&quot;, 2.5, 3.0};</p>
<p>inflatable pal2 {&quot;sakdfh&quot;, 2.5, 3.0};</p>
<p>inflatable pal3 {};//全部字节置零**不允许格式上的缩窄转换； ... return 0; } --------------------- (the same struct) choice = bouquet; --------------------- struct perks { int sdlkfj; double skdf; char a[20]; } mr_dlasjfl = { 7, 23.0, &quot;dsafhk&quot; };//分开写的话可能更便于阅读； -------------------- struct { int x; int y; } position; //只有position这一个这种类型的结构，后面也将无法创建； -------------------- struct widget { char brand[20]; int type; union id { long id_num; char id_char[20]; } id_val; }; widget prize; cin &gt;&gt; prize.id_val.id_char; ----------------------- struct widget { char brand[20]; int type; union//匿名共用体(anonymous union) { long id_num; char id_char[20]; } id_val; }; widget prize; cin &gt;&gt; prize.id_char;</p></li>
<li><p>enum 枚举类型 可用于设置符号常量，枚举量(enumerator)； enum {a, b, c, d}//0,1,2,3 枚举只定义了赋值运算符，没有定义算术运算；</p></li>
<li><p>指针使用是一定要先确定地址； int* pt; pt = (int*) 0xB8000000//地址；</p></li>
<li><p>new 运算符 指针的真正用武之地在于在运行阶段分配未命名的内存以存储值； C中可以使用库函数malloc()来分配； C++中可以使用new运算符； 传统通过内存名称来访问该 int： int higgens; int* pt = &amp;higgens; 新方式： int* pn = new int; //此处pn指向的是内存是没有名称的，可以说指向一个数据对象，指的是为数据项分配的内存块；</p></li>
<li><p>delete 运算符 使得用完的内存归还内存池； 与 new 搭配使用。 int* ps = new int; delete ps; //仅仅释放ps所指向的内存； <em>一定要配对使用 new 与 delete,否则会发生内存泄漏(memory leak)，也就是说，被分配的内存再也无法使用。 如果泄露严重，则程序会不断寻找更多内存而中止。 int</em> ps = new int; delete ps; delete ps;//已释放的内存块再进行释放操作，这样的出的结果是不确定的，意味着什么都会发生，但是对于空指针而言则是安全的 int jugs = 5; int* pi = %jugs; delete pi;//delete只能用来释放由new分配的内存。</p></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/langs/cpp/Cpp基础_2/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/langs/cpp/Cpp基础_2/" class="post-title-link" itemprop="https://plart.pw/page/4/index.html">C++基础2</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-15 21:38:32" itemprop="dateCreated datePublished" datetime="2018-02-15T21:38:32+08:00">2018-02-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:45:06" itemprop="dateModified" datetime="2018-07-13T20:45:06+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程与生活/" itemprop="url" rel="index"><span itemprop="name">编程与生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.6k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">5 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <ol type="1">
<li><p>有效的下标值 int a[10]; a[10] = 10;</p></li>
<li><p>数组初始化 只有定义数组时才可以初始化； int a[2] = {1,2}; 可以用下标分别给数字元素初始化； int a[2]; a[0] = 1; a[1] = 2; 部分初始化时，未言明部分自动初始化为零； //将数组整体初始化为零，可以显示的将数组第一个元素初始化为零即可 //int a[5] = {0}; 可以不明确指定数组元素数目； int a[] = {1,2,3}; int num_elements = sizeof things / sizeof ( int); 初始化时可以省略&quot;=&quot;; int a[2] {1,2}; //大括号内可以空白，全部元素置零； //int a[2] {}; //列表示初始化是不允许缩窄的，要保证数据无误； //int a[] = {1,3.4};</p></li>
<li><p>C-风格字符串 以空白符结尾，'\0'，ascii = 0； int a[2] = {'a', 'b'}; //不是字符串 int a[2] = {'a', '\0'}; //是字符串 //字符串常量(string constant)或字符串字面值(string literal); char a[10] = &quot;god is girl&quot;; char a[] = &quot;god is girl&quot;; //C++对字符串长度无限制；</p></li>
<li><p>带引号的字符串 cout &lt;&lt; “sdlfjl&quot; &quot;sldfjlj&quot; &lt;&lt; endl;//可以在中间处隔行； cout &lt;&lt; “sdlfjlsldfjlj&quot; &lt;&lt; endl;</p></li>
<li><p>strlen()与sizeof(); <cstring>（老式实现为string.h） 提供了很多关于字符串相关的其他函数的声明； strlen();//只计算可见的字符数 sizeof();//算出整个数组的长度 ==&gt;&gt;int a[strlen(strings) + 1];</cstring></p></li>
<li><p>cin小缺陷 cout &lt;&lt; &quot;Your name&quot; &lt;&lt; endl; char name[10]; cin &gt;&gt; name; //输入&quot;Lart Pang&quot;; cout &lt;&lt; &quot;Your university&quot; &lt;&lt; endl; char u_name[10]; //想要输DUT； cin &gt;&gt; u_name; ... //结果，name[10] == &quot;Lart&quot;; //u_name[10] == &quot;Pang&quot;; ==&gt;&gt; //cin 使用空白（空格，制表，换行符）来确定字符串结尾 //此处，name中被放入Lart，之后的Pang仍在输入队列中，被存到了u_name中；</p></li>
<li><p>读取行输入 <iostream> getline();//到 '', 然后停止读取并删掉 ''； get();// 不删；</iostream></p></li>
<li><p>cin.getline(name, 20); //name为要存储输入行的数组名； //20为要读取的字符数； //一行最多读取19个字符；<br>
//在存储字符串时用空字符替换换行符； cin.getline(name, 20).getline(u_name. 20); //连续读入两行；</p></li>
<li><p>cin.get(name, 20); 由于在第一次cin.get();读完后，输入队列中还存在换行符，所以紧跟在其后的另一个cin.get();可能会直接吃掉换行符； 所以可以使用下面的两种方法来解决： cin.get(name, 20); cin.get(); cin.get(u_name, 20); --------------------- cin.get(name, 20).get();//cin会返回一个cin对象； cin.get(u_name, 20); --------------------- (cin &gt;&gt; name).get();//cin后也会残留''； ==&gt;&gt; get(),getline()的性质上的差异，使得两者有了一些奇特的作用，getline()使用起来明显方便，但是get()的特性使得操作者，可以明确读取停止的原因，是因为数组填满还是读完了一整行； --------------------- 稍微特别用法： getline(cin ,str); 将数据读入到string对象中； 这里的getline不是类方法；</p></li>
<li><p>string类 <string> using namesapce std; string str1; string str2 = &quot;asd&quot;; //string str2 = {&quot;asd&quot;}; //string str2 {&quot;asd&quot;}; cin &gt;&gt; str1; cout &lt;&lt; str1 &lt;&lt; str2[2] &lt;&lt; str2 &lt;&lt; str1[2] &lt;&lt; endl; //string对象和字符数组之间主要区别，可以讲string对象声明为简单变量而不是数组； //string对象能在初始化时自动调节大小；</string></p></li>
<li><p>string简单操作 string str3; str3 = str1 + str2; str3 = str1; str1 += str2;//字符串拼接； int len1 = str1.size(); //str1是string类中的一个对象，而size()是string类的一个方法。 //方法是一个函数，只能通过其所属的类的对象进行调用； //C++中的类，对象，方法 //C函数使用参数来确定要使用那个字符串，而C++string类对象，是使用对象名和句点运算符来指出要使用那个字符串； int len2 = strlen(str1);</p></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/langs/cpp/Cpp基础_1/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/langs/cpp/Cpp基础_1/" class="post-title-link" itemprop="https://plart.pw/page/4/index.html">C++基础1</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-15 21:38:12" itemprop="dateCreated datePublished" datetime="2018-02-15T21:38:12+08:00">2018-02-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:48:49" itemprop="dateModified" datetime="2018-07-13T20:48:49+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程与生活/" itemprop="url" rel="index"><span itemprop="name">编程与生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.8k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">5 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p>OOP的本质就是设计并扩展自己的数据类型。</p>
<ol type="1">
<li><p>变量名命名时，以两个下划线或下划线和大写字母打头的名称被保留给实现（编译器及其使用的资源）使用，以一个下划线开头的名称被保留给，实现，用作全局标识符。</p></li>
<li><p>C++中对于名称长度没有限制，但是有些平台有长度限制。</p></li>
<li>C++赋值方式： （大括号初始化器，适用于任何类型，等号可有可无）
<ol type="1">
<li>int x = 1;</li>
<li>int x = {1};//将大括号初始化器用于单变量</li>
<li>int x{1}；</li>
<li>int x{};//置零</li>
<li>int x = {1}；//置零</li>
</ol></li>
<li><p>int类型被设定为对于目标计算机而言效率最高的长度。</p></li>
<li><p>cout 关于进制转换 std::cout; std::endl; std::hex; std::oct; code: using namespace std; int main() { int chest = 42; int waist = 42; int inseam = 42;</p>
<pre><code> cout &lt;&lt; &quot;chest = &quot; &lt;&lt; chest &lt;&lt; &quot; (decimal for 42)&quot; &lt;&lt; endl;
 cout &lt;&lt; hex;
 cout &lt;&lt; &quot;waist = &quot; &lt;&lt; waist &lt;&lt; &quot; (hexadecimal for 42)&quot; &lt;&lt; endl;
 cout &lt;&lt; oct;
 cout &lt;&lt; &quot;inseam = &quot; &lt;&lt; inseam &lt;&lt; &quot; (octal for 42)&quot; &lt;&lt; endl;
 return 0;</code></pre>
<p>} (cout &lt;&lt; hex;不会显示任何内容，只是会改变cout显示整数的方式。）</p></li>
<li><p>数值类型 220L; 220LU == 220UL; 220ll == 220LL; 220ull == 220ULL == 220uLL == 220Ull; (十六进制常用来表示内存地址，而内存地址是没有符号的，所以多用 &quot;usigned int&quot; 类型来表示十六位地址）</p></li>
<li><p>‘字符’ “字符串”</p></li>
<li><p>cout.put();//cout的成员函数 显示一个字符； int main() { char ch = 'M'; int i = ch; cout &lt;&lt; &quot;The ASCII code for &quot; &lt;&lt; ch &lt;&lt; &quot; is &quot; &lt;&lt; i &lt;&lt; endl;</p>
<pre><code> cout &lt;&lt; &quot;Add one to the character code:&quot; &lt;&lt; endl;
 ch = ch + 1;
 i = ch;
 cout &lt;&lt; &quot;The ASCII code for &quot; &lt;&lt; ch &lt;&lt; &quot; is &quot; &lt;&lt; i &lt;&lt; endl;

 cout &lt;&lt; &quot;Displaying char ch using cout.put(ch): &quot;;
 cout.put(ch) //&lt;&lt; &#39;!&#39;;
 //cout.put(&#39;!&#39;);//两个二选一即可；
 cout &lt;&lt; endl &lt;&lt; &quot;Done&quot; &lt;&lt; endl;
 return 0;</code></pre>
<p>}</p></li>
<li><p>bool bool is_ready = true; //&quot;is_ready&quot; assigned true or 1;</p></li>
<li><p>创建符号常量 尽量使用const来创建，而非&quot;#define&quot;; const type name = value; 声明时没有提供值，则该常量的值将是不确定的，且无法修改。 好处： 1, 限定类型 2, 限定范围</p></li>
<li><p>+d.dddE+n 指的是将小数点向右移动n位， +换成~时，表示将小数点向左移动n位。</p></li>
<li><p>setf成员函数可以把强行把浮点数输出时用定点表示法 int main() { cout.setf(ios_base::fixed, ios_base::floatfield); cout &lt;&lt; &quot;Integer division: 9/5 = &quot; &lt;&lt; 9 / 5 &lt;&lt; endl; cout &lt;&lt; &quot;Floating-point division: 9.0 / 5.0 = &quot;; cout &lt;&lt; 9.0 / 5.0 &lt;&lt; endl; cout &lt;&lt; &quot;Mixed division: 9.0 / 5 = &quot; &lt;&lt; 9.0 / 5 &lt;&lt; endl; cout &lt;&lt; &quot;double constants: 1e7 / 9.0 = &quot;; cout &lt;&lt; 1.e7 / 9.0 &lt;&lt; endl; cout &lt;&lt; &quot;float constants: 1e7f / 9.0f = &quot;; cout &lt;&lt; 1.e7f / 9.0f &lt;&lt; endl; return 0; }</p></li>
<li><p>浮点类型默认为double类型</p></li>
<li><p>以{}方式初始化时进行的转换 使用大括号的初始化，陈作列表初始化，因为这种初始化，常用于给复杂的数据类型提供值列表，对类型转换更为严格， 此类初始化不允许对数据进行缩窄（narrowing），即使得变量类型有可能无法表示赋给它的值。</p></li>
<li><p>整型提升（integral promotion） 例如将 bool,char,unsigned char,...值转换为 int</p></li>
<li><p>强制转换 (typeName) value typeName (value) static_cast<typename> (value)//转换要求很严格</typename></p></li>
<li><p>运算符重载 使用相同符号，进行多种操作，叫做运算符重载(operator overloading)</p></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/ee/认证无线电网络的多目标资源优化-论文阅读/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/ee/认证无线电网络的多目标资源优化-论文阅读/" class="post-title-link" itemprop="https://plart.pw/page/4/index.html">认证无线电网络的多目标资源优化-论文阅读</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-15 18:44:22" itemprop="dateCreated datePublished" datetime="2018-02-15T18:44:22+08:00">2018-02-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:51:15" itemprop="dateModified" datetime="2018-07-13T20:51:15+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/技术与进步/" itemprop="url" rel="index"><span itemprop="name">技术与进步</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">7.9k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">14 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Multi-Objective Resource Allocation in a NOMA Cognitive Radio Network With a Practical Non-Linear Energy Harvesting Model</p>
<p>Yuhao Wang, Senior Member, IEEE, Yuhang Wu, Fuhui Zhou, Member, IEEE, Zheng Chu, Member, IEEE, Yongpeng Wu, Senior Member, IEEE, Fei Yuan</p>
</blockquote>
<p>主要内容：</p>
<p>文章提出了一种基于同时传输信息与功率的无线传输技术的非正交多址的认证无线电网络的多目标资源优化（每个收集能量的次级用户收集的能量都为最大时）问题。</p>
<p>主要提出了一种偏重于实际的非线性能量收集模型，相应的提出了一种连续凸逼近的解决方法来解决这种情况下的最优分配策略。</p>
<p>文章背景：</p>
<ol type="1">
<li>目前固定的频谱分配策略不再适应频谱使用的需求的增长。</li>
<li>下一代通信技术的提出，有6大新能指标和3大效率指标。
<ul>
<li>6大性能指标：用户体验速率，流量密度，连接数密度，端到端时延，峰值速率，移动性</li>
<li>3大效率指标：频谱效率(SE)，能效(EE)，成本效率。</li>
</ul></li>
<li>新的多址接入技术的采用（非正交多址接入，文中主要指基于功率域复用的非正交多址接入技术，多天线PD-NOMA）。 主要思想是恨据用户信道条件差异分配功率,为了保证用户的公平性,给差用户分配更多的功率;从而在保证差的用户的性能条件下,提高系统的整体性能。接收端利用串行干扰消除(SIC)技术来移除不同用户间的干扰。</li>
<li>新的能量供应手段（使用能量获取技术供能）。 通过从周围环境中获取能量，提供几乎无限的能量，从而极大地延长网络的运行时间；同时使用能量获取设备，可以免去布线等约束，从而极大地提高部暑节点的便利性。与传统能量供电网络不同的是，传统供能网络由于能量不是约束条件，其优化的目标是提高网络服务质量，如提高系统的吞吐量或降低用户的阻塞率，而在基于能量获取计数的无线系统中，由于能量获取技术的限制，必须要在优化能量使用的基础上考虑网络中的服务质量优化问题。 本文中，关于能量获取的无线通信研究主要是SWIPT，信息与能量流同时传输系统。SWIPT是一种新的传输模式,可提高5G网络的能量效率。</li>
<li>对于能量获取设备的组网技术采用认知无线电网络。 在认知无线电网络中，认知节点具备学习能力，通过与周围环境交互信息来感知和利用该空间中的可用频谱。 因此，认知无线电及数的出现将极大的提高无线通信系统的频谱利用率。通常假设次级用户使用能量获取技术。 其中发送端的能量有电网或其他稳定的能量来源供应，而接收端通信使用的能量则从发送端的电磁波中获取之后再用于信息的发送，类似于无线充电技术，一般称为无线能量传输，即SWIPT。</li>
</ol>
<p>更为详细的记录：</p>
<ol type="1">
<li><p>频谱使用现状</p>
<p>目前世界上大多数国家的频谱管理都采用固定的频谱分配策略，频谱资源由政府部门管理并分配给固定的授权用户，这样能确保各个用户之间避免过多的相互干扰，同时使得用户能够在一个稳定的环境中更好的利用频谱，然而，随着频谱使用的需求的不断增长，这种固定频谱分配策略的缺点也越来越明显，已经不能满足日益发展的通信需要了。</p>
<p>频谱资源一般可以分为两类，一类是受到严格限制和保护的频谱，另一类是开放的频谱资源，满足某一规范和标准的设备都可以接入和使用该频谱，但必须要保证不对其他用户造成干扰，称之为未授权频谱。现实的情况可以知道，仅有一小部分授权频谱被充分利用，而大部分未授权频谱的使用却非常拥挤。</p></li>
<li><p>多址接入技术</p>
<p>多址接入技术是每一代通信技术的关键，其目的是让多个用户能同时接入基站，享受基站提供的通信服务，保证各个用户之间的信号不会互相干扰。</p>
<p>在传统的正交多址接入(OrthogonalMultipleAccess,OMA)方式中,不同用户被分配到相互独立或彼此正交的资源上进行传输,比如:时域、频域、码域等正交资源,以避免不同资源块之间的干扰。</p>
<p>为了进一步提高频谱利用率,第四代移动通信系统引入了正交频分多址(OFDMA)接入技术,即通过将一系列在频域互不重叠的子载波分配给不同用户来完成多址接入。由于正交多址接入方式中一个正交资源只允许分配一个用户,这严重限制了区域的吞吐量和设备连接数。为了满足5G网络海量接入和超高容量需求,非正交多址接入技术(NOMA)被认为是下一代移动通信中最为关键的技术。从根本上来说,非正交多址允许可控的多用户干扰在接收机检测复杂度可容忍条件下来增加非正交的资源分配,从而提高系统的频谱效率。</p>
<p>这里就得提到5G技术的6大性能指标：</p>
<ul>
<li>6大性能指标：用户体验速率，流量密度，连接数密度，端到端时延，峰值速率，移动性</li>
<li>3大效率指标：频谱效率(SE)，能效(EE)，成本效率。</li>
</ul>
<p>主流的非正交多址接入主要包括:</p>
<ul>
<li>基于功率域复用的非正交多址接入技术-PD-NOMA;</li>
<li>引基于码域复用的稀疏码多址接入技术-SCMA</li>
</ul>
<p>PD-NOMA引入了新的维度-功率域,通过叠加编码的思想来发送信号,使得信道条件不同的用户可共享相同的频谱资源,比如时域、频域、码域等正交资源。功率复用的主要思想是恨据用户信道条件差异分配功率,为了保证用户的公平性,给差用户分配更多的功率;从而在保证差的用户的性能条件下,提高系统的整体性能。接收端利用串行干扰消除(SIC)技术来移除不同用户间的干扰。</p>
<p>SIC的主要思想是接收信号根据用户信道条件的差异性逐级消除用户间干扰。比如下行PD-NOMA,某个用户对接收的信号从信道条件最差的用户开始检测其信号,并把该信号从多址干扰中移除；接若检测信道条件次差的用户的信号并移除,以此类推,消除所有信道条件比该用户差的信号。</p>
<p>目前对PD-NOMA技术的研究主要包巧:</p>
<ul>
<li>单天线PD-NOMA;</li>
<li>协作PD-NOMA；</li>
<li>多天线PD-NOMA。</li>
</ul></li>
<li><p>能量获取技术</p>
<p>在传统的能量受限的无线网络(如无线感知网络)中，感知节点通常使用电池供电, 乏稳定可靠的能量来源，运行时长受限。尽管可以适过替换电池或给电池重靳充电来廷长网络的运行时间，但通常存在替换不便、成本本过高或非常危险(如安装在腐蚀性环境中的传感器)等问题, 有时甚至不可能进行替换(如植入人体的传感器器)。在这些网络中，使用能量获取技术供能的设备优势明显：通过从周围环境中获取能量，提供几乎无限的能量，从而极大地延长网络的运行时间；同时使用能量获取设备，可以免去布线等约束，从而极大地提高部暑节点的便利性。</p>
<p>对能量获取拉术的研究最初集中在以太阳能、风能等可再生能源为能量来源的设备，而能量获取技术的含义井不仅仅包括可再生能源。通信节点从周围环境中获取的能量并不一定指太阳能、风能等清洁能源，也可能指其它设备特定发送的能量，类似于无线充电技术。</p>
<p>在无线通信系统中应用能量获取技术的时候，由于能量来源的变化，传统稳定的电网能量或有限的电池能量供能的网络问题即约束条件不再适用，需要基于能量获取技术的他特点对无线通信的算法、网络协议甚至传输节点的硬件进行重新设计。与传统能量供电网络不同的是，传统供能网络由于能量不是约束条件，其优化的目标是提高网络服务质量，如提高系统的吞吐量或降低用户的阻塞率，而在基于能量获取计数的无线系统中，由于能量获取技术的限制，必须要在优化能量使用的基础上考虑网络中的服务质量优化问题。</p>
<p>本文中，关于能量获取的无线通信研究主要是SWIPT，信息与能量流同时传输系统。主要研究的是能量来源稳定的发送节点向对个接收终端同时进行信息与能量流的传输问题。</p>
<p>对于能量获取设备的组网研究，本文主要研究了认知无线电网络。在认知无线电网络中，认知节点具备学习能力，通过与周围环境交互信息来感知和利用该空间中的可用频谱。通常假设次级用户使用能量获取技术。</p>
<p>对于能量获取设备组网，其能量获取的节点为发送节点，即发送端从周围环境中获取能量，并将收集的能量用于信息的发送。目前已有研究者将目关投向通信过程中信息的接收方获取能量的研究。其中发送端的能量有电网或其他稳定的能量来源供应，而接收端通信使用的能量则从发送端的电磁波中获取之后再用于信息的发送，类似于无线充电技术，一般称为无线能量传输，即SWIPT。</p>
<p>SWIPT技术研究的可行性是基于以下事实：传输信息的无线电波在电磁能量可以被获取的情况下，也是一种能量的来源，也可以被获取。在这个研究方向中，接收端可以接受信息，也可以接收能量，或者两者同时进行。受实际电路限制，接收端不可能同时对同一个信息进行解调与能量收集。因此，SWIPT中接收端同时对信息解调和能量接收的无线电磁流的接受模式通常有两种，一种是时域切换，另一种为能量分割（PS）。本文介绍的是能量分割的工作模式。接受的信号被一个能量分割器分割为两路，一路传输给能量获取单元，一路传输给信息处理单元。</p>
<p>对于SWIPT系统方向地研究，多与物理层多输入多输出天线技术相关，即发送节点与接受节点都装备了多天线，而研究的场景相对较为简单。</p>
<p>本文为了提高能量效率和频谱效率，在实际的非线性能量获取模型下，研究了一种同时具有无线信息和功率传输的非正交多址认知无线网络。提出了一种多目标资源优化问题，以最大限度地提高每个能量采集接收机的收集力。这个问题是非凸的，而且很难解决。本文采用加权Tchebycheff方法求解该问题 结果表明，非线性能量收集模型的性能优于线性能量收集模型。</p>
<p>SWIPT是一种新的传输模式,可提高5G网络的能量效率。其主要思想是节点可从自然界获取能量,如风能、太阳能、机械振动等。</p></li>
<li><p>认知无线电</p>
<p>软件无线电视近几年来提出的一种实现无线通信的新概念和新体制，是作为多频带多模式的个人通信系统平台而出现的。其以硬件作为无线通信的基本平台，无线通信功能尽可能用软件实现。这样设计的无线通信系统具有很好的通用性、灵活性，使系统互联合升级备案的非常方便。</p>
<p>软件无线电为扩展平台的认知无线电是一种新的智能无线通信技术，它可以感知到周围环境得环境特征，采用构建理解的方法进行学习，通过无线电知识描述语言（RKRL）与通信网络进行智能交流，实时调整传输参数，是系统的无线规则与输入的无线电激励的变化相适应，已达到无论和是何地通信系统的高可靠性和频谱利用的高效性，认知无线电的一个最大优势是无线用户可以通过该技术实现“频谱共享”，认知无线电在特定频段上进行探索，如果发现该频段当前未被使用，可以在不影响受邀用户的前提下使用该频段。</p>
<p>这种被分配给某出示授权用户但在特定时间和具体位置该用户没有使用的频带被称为“频带空穴”。如果该频段的首要用户恢复无线传输，那么认知无线电设备就跳转到其他频段或者改变传输功率、调制方式等手段来避免对首要用户产生干扰。因此，认知无线电及数的出现将极大的提高无线通信系统的频谱利用率。</p>
<p>认知无线电技术具备认知能力与重构能力，认知能力指的是感知的能力，并且可以从周围环境中收集信息，例如传输频率、带宽、功率等。重构能力指的是为了达到最佳的性能，根据感知信息自适应地调整操作参数。</p>
<p>认知无线电的关键技术是频谱感知与频谱接入。频谱感知、频谱接入、频谱管理、频谱切换。</p></li>
<li><p>文章概述</p>
<p>认为，将NOMA与SWIPT相结合，可以同时改善SE和EE。</p>
<p>第I部分主要介绍了一些相关领域的研究成果。其中在B部分中，提到了，本文研究的特别之处。将SWIPT技术应用于NOMA认知无线电网络中，在多目标资源分配问题中研究了一个实际的非线性EH模型。</p>
<p>在实际的非线性能量收集模型下，研究了非正交多址接入技术下的认知无线电系统的多目标资源优化问题，使得在最小传输速率和最大干扰功率的约束下，每个单元的收获能量最大。</p>
<p>由于该问题具有非凸性不好解决，这里利用了加权切比雪夫方法，转化为单目标优化问题，并提出了一种基于逐次凸逼近的求解算法来解决这个问题。</p></li>
<li><p>通信网络中相关设定</p>
<p>PBS表示主基站(PrimaryBaseStation)，通过光缆可以将各类监测数据、感知数据、计量数据等业务数据传输到变电站内的各种应用系统子站，也可以根据需要将数据通过电力骨干网络(SDH等)传输到省电力公司内的系统主站。</p>
<p>CBS表示认知基站(CognitiveBaseStation)，通过光缆与主基站连接进行信息交互，通过无线方式与次用户通信。</p>
<p>PU表示主用户即授权用户(PrimaryUser)，SU表示次用户即认知用户(SecondaryUser)，这里的用户在实际应用场景中泛指各种无线通信终端，各类业务数据通过授权用户或次用户将数据传输到基站，SB表示频谱经纪人(SpectrumBroker)，通过光缆或者网线形式与认知基站进行信息交互。</p>
<p>认知基站负责认知用户的控制和管理，主要包括对认知用户的感知结果进行融合、空闲信道资源分配、接入及切换管理。</p>
<p>频谱使用区域分授权频段区域和非授权频段区域，在授权频段区域，认知基站与主基站进行信息交互，降低感知目标频段的盲目性，认知用户根据认知基站的交互信息，感知授权用户的授权频段的空闲情况并利用。</p>
<p>在非授权频段区域，认知用户感知非授权频段的使用情况并进行竞争利用，能够及时规避干扰频段，使用动态分配的频谱资源，在该区域中频谱经纪人充当协调者角色，负责不同认知网络之间的频谱资源协调管理。</p>
<p>接受的信号被一个能量分割器分割为两路，一路传输给能量获取单元，一路传输给信息处理单元。其中由两个SU（SUi，SUj）来解码，处理信息，而剩余的N-2个SU来执行能量获取。所有设备都配备了单天线。PBS向所有M个PU传输信息，而CBS则使用一个功率域NOMA方案为SUi，SUj提供SWIPT服务，并将能量传输给其他SU，只要CBS强加于该系统的干扰是可以容忍的。</p>
<p>文中假设，涉及到的信道都是频率平坦慢衰落信道（即为如果信号带宽远小于相干带宽，则可以近似认为在信号的带宽内，信道的功率谱包络是平的（幅度增益为常数），此时称信号经历了平坦衰落）</p>
<p>给出了SUi，SUj和其他能量收集SU接收到的信号以及CBS施加在PUm上的干扰信号表达式。并对相关参数进行了假设。</p></li>
<li><p>模型设定</p>
<p>先提了线性能量收集模型。由于实际中，功率转换效率与输入功率水平有很大关系。特别是，效率首先随着输入功率的增加而增加，然后在一个常数处饱和。此外，最大可能的收获效率也有限制。引出了本文的更偏向于实际的非线性能量收集模型。这里引入了逻辑斯蒂函数，进而描述了由硬件限制引起的各种非线性现象的联合效应。</p>
<p>这些模型表示的是RF到直流(DC)转换电路的关系。</p></li>
<li><p>问题的约束与提出</p>
<p>最小传输速率、最大干扰功率、每个单元的收获能量最大。假定了SUi比SUj的信道条件差，这里SUi信道条件差，基站发送信号时提供更大的功率。进而给出了各自的信息解码速率。同时还要保证其各自的速率要满足不小于最小值。</p>
<p>而对于SUj对于本要SUi解码的信息进行解码的速率也有限制，因为要实现连续干扰消除，需要先处理功率更强的信号，需要对其解码重构，而这个操作是有速度要求的。同样，由前面提到可知，这里CBS对于PU的干扰必须要在允许范围内。</p>
<p>由以上条件，Pi和Pj是最优变量，为了最大化每个收集能量的次级用户收集的能量，得出了一个多目标优化问题。</p>
<p>这里的MOOP最优解构成一个可行的最优区域，定义为Pareto最优(多目标规划问题最优解)，即当且仅当存在唯一一组解，使得每个次级用户收集的能量最大化。</p></li>
<li><p>问题的变形</p>
<p>引入了理想收集能量（Utopia Harvesting Energy），表示每个用户能获得的最大量。上面的多目标优化问题可以表述为在最优参数Pi与Pj下，加上约束条件后，对于每个收集能量的次级用户收集的能量都为最大时的解。</p>
<p>进一步可以变形为一个关于Pi，Pj的凸问题，可以利用拉格朗日乘数法来解决。进而得到一个最优Pi，Pj分配策略，来获得理想收集能量。同时，提出了一种最优功率分配算法，从而可以获得理想收集能量。</p>
<p>获得理想收集能量后，多目标优化问题可以通过使用加权切比雪夫方法，转化为单目标优化问题。利用权重关系可以解决前面的多目标优化问题。帕累托最优收集能量，可以通过理想能量加权获得。</p>
<p>通过代换，设参数，一阶Taylor级数展开，替换约束条件，将问题转化为一个相对于Pi与Pj为凸的问题，从而利用拉格朗日乘数法来解决。进而得到了帕累托最优收集能量。</p></li>
<li><p>仿真结果</p>
<p>利用文献33与35设置非线性能量收集参数。也设置了一个线性能量收集模型，加上前面的约束条件，进行了测试。所有涉及的信道都被假定为瑞利平坦衰落。</p>
<ol type="a">
<li><p>仿真测试了不同PU干扰容限值下，理想收集功率与迭代次数的关系。该算法仅需少量迭代就能收敛到一个常数值。这验证了我们提出的算法的有效性。</p></li>
<li><p>也测试了在非线性与线性模型下，最大PU干扰容限值与理想收集效率的关系。可见都随最大干扰容限值而增加。这是因为CBS可以在更宽松的功率约束下，即更大的Γm值下，使用更多的功率将信息传输给SU。 但是可见这里的非线性模型分配方案可以获得更大的理想收集功率。其原因是线性EH模型采用固定功率转换效率ηn=0.5，导致资源分配不匹配。</p></li>
<li><p>测试了SUi不同服务质量下的PU最大干扰容限值与理想收集功率的关系。可见理想收集功率随最大容限值增加而增加。这里可以类似地由以下事实来解释：较宽松的干扰约束可以让CBS提供更高的发射功率。这样，SU就能收获更多的功率。 还可以观察到，SUi的QoS较低导致了更大的理想收集功率。这是因为在能量收集和信息传输之间存在着一种平衡。具体来说，当第SUi的QoS增加时，收集功率可能会降低。</p></li>
<li><p>测试了用户1的功率分配权重与帕累托收集功率之间的关系。将理想收集功率设置为每个用户收集能量的上限值，从结果可见，随着权重的增大，趋于1，则逐步趋向理想收集功率，帕累托收集功率与权重成正比。</p></li>
</ol>
<p>仿真结果表明，非线性能量采集模型的性能要好于线性能量采集模型下的性能，并且信息解码用户的速率与采集能量之间存在权衡。</p>
<p>参考：</p>
<ul>
<li>5G移动网络非正交多址接入及相关技术研究_杨正</li>
<li>Non-Orthogonal Multiple Access (NOMA):
<ul>
<li>Evolution towards 5G Cellular Networks - 28 April 2016</li>
</ul></li>
<li>基于能量获取的无线通信系统研究</li>
<li>频谱管理的现状及其发展概述（(20180118130630)</li>
<li>多用户信能同传系统的收发机优化设计</li>
<li>多用户无线信能同传系统能效优化方法</li>
<li>基于能量获取的无线通信系统研究</li>
<li>认知MIMO系统下行链路干扰抑制算法研究</li>
<li>认知无线电关键技术研究</li>
<li>认知无线电网络性能分析以及能量收集研究_崔飞</li>
<li>认知无线电中无线频谱感知技术的研究</li>
<li>无线协作中继网络的资源分配和信息能量同传技术的研究</li>
<li>信道质量对网络性能的影响</li>
</ul>
<p>下载链接：</p>
<p>链接: https://pan.baidu.com/s/1bqzim3H 密码: xh79</p></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/langs/python/多种字体的福的生成/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/langs/python/多种字体的福的生成/" class="post-title-link" itemprop="https://plart.pw/page/4/index.html">生成任意字体的“福”字</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-15 18:39:52" itemprop="dateCreated datePublished" datetime="2018-02-15T18:39:52+08:00">2018-02-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:43:24" itemprop="dateModified" datetime="2018-07-13T20:43:24+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程与生活/" itemprop="url" rel="index"><span itemprop="name">编程与生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.1k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h1 id="生成任意字体的福字">生成任意字体的“福”字</h1>
<h2 id="具体代码见后相关不足见下">具体代码见后，相关不足见下</h2>
<ol type="1">
<li>最大的问题就是 我电脑中的字体很多对于此处代码的中文无法正常显示，如何保证最终的字体图片中只保留正常的图片</li>
<li>使产生不同的福字除了改变字体外还可以使用什么手段</li>
</ol>
<h2 id="代码">代码：</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 调用cmd</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># 处理字符串</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># 文字转化为图片</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageFont, ImageDraw</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出所有的字体文件，主要是用ttf（TrueType字体)文件</span></span><br><span class="line">return_cmd = os.popen(<span class="string">"C: &amp; cd / &amp; cd C:\Windows\Fonts\ &amp; tree /f"</span>)</span><br><span class="line">fonts = return_cmd.read()</span><br><span class="line">print(fonts)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只保留ttf部分</span></span><br><span class="line">pattern = re.compile(<span class="string">'\S.*?ttf'</span>, re.I)</span><br><span class="line">result_list = pattern.findall(fonts)</span><br><span class="line"><span class="comment"># 去掉中文名称的字体</span></span><br><span class="line">result_list = result_list[<span class="number">1</span>:<span class="number">-9</span>]</span><br><span class="line">print(result_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文字处理</span></span><br><span class="line">text = <span class="string">"福"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定图片保存文件夹</span></span><br><span class="line">path_img = <span class="string">'D:\\编程\\py-font-fu\\img\\'</span></span><br><span class="line"><span class="keyword">if</span> os.path.isdir(path_img):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    os.mkdir(path_img)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制，保存</span></span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> range(len(result_list)):</span><br><span class="line">    <span class="comment"># 新建一个300*300的空白图像</span></span><br><span class="line">    img = Image.new(<span class="string">"RGB"</span>, (<span class="number">300</span>, <span class="number">300</span>), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br><span class="line">    <span class="comment"># 创建画笔</span></span><br><span class="line">    drawer = ImageDraw.Draw(img)</span><br><span class="line">    <span class="comment"># 字体</span></span><br><span class="line">    path_font = <span class="string">'C:\\Windows\\Fonts\\'</span> + result_list[index]</span><br><span class="line">    font = ImageFont.truetype(path_font, <span class="number">200</span>)</span><br><span class="line">    drawer.text((<span class="number">10</span>, <span class="number">10</span>), text=text, font=font, fill=(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    <span class="comment"># 保存</span></span><br><span class="line">    img.save(path_img + result_list[index][<span class="number">0</span>:<span class="number">-3</span>] + <span class="string">'png'</span>)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://plart.pw/langs/asm/8086汇编总结-一些汇编练习/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lart Pang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="失乐园">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/langs/asm/8086汇编总结-一些汇编练习/" class="post-title-link" itemprop="https://plart.pw/page/4/index.html">一些汇编练习</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-15 00:00:00" itemprop="dateCreated datePublished" datetime="2018-02-15T00:00:00+08:00">2018-02-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-13 20:42:51" itemprop="dateModified" datetime="2018-07-13T20:42:51+08:00">2018-07-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程与生活/" itemprop="url" rel="index"><span itemprop="name">编程与生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">18k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">33 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>作者：lart 时间：2017年11月27日22:33:58</p>
</blockquote>
<p><a href="https://github.com/lartpang/myasm" target="_blank" rel="noopener">GitHub</a></p>
<h1 id="习题4">习题4：</h1>
<ol type="1">
<li>从屏幕上输入大写字母，转换为小写字母并输出（生成.com文件） 要求：程序具有可读性、容错性</li>
</ol>
<h3 id="思路">思路：</h3>
<p>由于要生成.com文件，所以需要将文件代码设置到一个代码段里。本问题涉及到读入与显示，这里可以使用21h中断的1,2,9号子功能。 读入字符后，将al中存放的字符通过判断其是否为大写字母来保证程序的正确性。利用大小写ascii码上的对应关系，实现了大小写的转化。</p>
<h3 id="代码如下">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">code    segment para</span><br><span class="line">    assume  cs:code, ds:code, ss:code</span><br><span class="line">    org     0100h</span><br><span class="line">    main    proc near</span><br><span class="line">    again:</span><br><span class="line">        lea     dx, str_dis</span><br><span class="line">        mov     ah, 9</span><br><span class="line">        int     21h             ;显示初始字符串，提示输入</span><br><span class="line">        mov     ah, 1</span><br><span class="line">        int     21h             ;获得输入字符，存到al里</span><br><span class="line">        cmp     al, &apos;A&apos;         ;判断输入字符是否是A~Z的字符</span><br><span class="line">        jb      error</span><br><span class="line">        cmp     al, &apos;Z&apos;</span><br><span class="line">        ja      error           ;保证输入合法</span><br><span class="line">        add     al, 20h         ;大写+20h=小写</span><br><span class="line">        mov     str_num, ax     ;将ax保存</span><br><span class="line">        lea     dx, str_res</span><br><span class="line">        mov     ah, 9</span><br><span class="line">        int     21h             ;显示结果提示字符串</span><br><span class="line">        mov     ax, str_num     ;将ax恢复</span><br><span class="line">        mov     dl, al</span><br><span class="line">        mov     ah, 2</span><br><span class="line">        int     21h             ;显示最终结果</span><br><span class="line">        mov     ax, 4c00h</span><br><span class="line">        int     21h</span><br><span class="line">    error:</span><br><span class="line">        lea     dx, str_err</span><br><span class="line">        mov     ah, 9</span><br><span class="line">        int     21h</span><br><span class="line">        jmp     again</span><br><span class="line">    main    endp</span><br><span class="line">    str_num dw 0000h</span><br><span class="line">    str_dis db 0dh, 0ah, &apos;Please input(A~Z):$&apos;</span><br><span class="line">    str_res db 0dh, 0ah, &apos;The result is:$&apos;</span><br><span class="line">    str_err db 0dh, 0ah, &apos;The data of input is invalid!$&apos;</span><br><span class="line">code    ends</span><br><span class="line">    end     main</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>编写一子程序 asc2bin ，将 ASCII 转换为二进制数 要求： 输入参数：AL 中存放需要转换的 ASCII 输出参数：AL 中存放转换后的二进制数并返回</li>
</ol>
<h3 id="思路-1">思路：</h3>
<p>对于ascii码，先都当做数字来处理，即都减30h，在与9比大小，大于9的说明是10~15，再减7即可。</p>
<h3 id="代码如下-1">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">asc2bin     proc</span><br><span class="line">    sub     al, 30h         ;先都当做表示数字的acsii</span><br><span class="line">    cmp     al, 9           ;与9比较，小于等于9的，直接跳转，大</span><br><span class="line">                            ;于9的，仍然需要处理</span><br><span class="line">    jbe     asc2bin_sub     ;跳转子程序</span><br><span class="line">    sub     al, 7           ;继续减7</span><br><span class="line">asc2bin_sub:</span><br><span class="line">    ret                     ;返回主程序</span><br><span class="line">asc2bin     endp</span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li>内存中存放8个16位有符号数，求8个数值之和，并将结果存放在内存变量SUM中 注：程序中应用到字扩展为双字的指令CWD</li>
</ol>
<h3 id="思路-2">思路：</h3>
<p>通过使用循环加法，扩展双字的指令，转化为双字的计算加和。</p>
<h3 id="代码如下-2">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">data    segment para</span><br><span class="line">    buf dw -1, 2, -33, 44, -555, 666, -7777, 8888</span><br><span class="line">    sum dd 0</span><br><span class="line">data    ends</span><br><span class="line">ss_seg  segment stack</span><br><span class="line">    dw  100 dup(0)</span><br><span class="line">ss_seg  ends</span><br><span class="line">code    segment para</span><br><span class="line">    assume  cs:code, ds:data, ss:ss_seg</span><br><span class="line">        main    proc far</span><br><span class="line">        mov     ax, data</span><br><span class="line">        mov     ds, ax              ;指定数据位置</span><br><span class="line">        lea     bx, buf             ;bx指向buf首地址</span><br><span class="line">        mov     cx, 8               ;指定循环次数</span><br><span class="line">    w2d:</span><br><span class="line">        mov     ax, [bx]</span><br><span class="line">        cwd                         ;有符号数字扩展为双字，默认使用&#123;dx,ax&#125;</span><br><span class="line">        add     word ptr sum, ax    ;32 位数相加</span><br><span class="line">        adc     word ptr sum + 2, dx</span><br><span class="line">        inc     bx</span><br><span class="line">        inc     bx</span><br><span class="line">        loop    w2d                 ;循环 8 次</span><br><span class="line">        mov     ax, 4c00h</span><br><span class="line">        int     21h</span><br><span class="line">    main    endp</span><br><span class="line">code    ends</span><br><span class="line">    end     main</span><br></pre></td></tr></table></figure>
<ol start="4" type="1">
<li>内存中存放 8 个 8 位有符号数，请按从大到小顺序排列</li>
</ol>
<h3 id="思路-3">思路：</h3>
<p>利用冒泡排序，设置两个循环，将相邻的数字进行比较，大的放在低位地址，小的放在高位地址。 对于循环的次数的设置这里有些需要注意的地方。一般而言，n个数的问题，外层循环需要n-1次，而内层循环也是需要n-1次比较，所以可以设置使用相同的循环计数器。只需要内层循环计数的时候将之前的压栈保存即可。</p>
<h3 id="代码如下-3">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">;低地址到高地址，大数到小数。</span><br><span class="line">data    segment para</span><br><span class="line">    buf db -1, 2, -33, 44, -55, 66, -77, 88</span><br><span class="line">data    ends</span><br><span class="line">stack   segment stack</span><br><span class="line">    dw 100 dup(0)</span><br><span class="line">stack   ends</span><br><span class="line">code    segment para</span><br><span class="line">    assume  cs:code, ds:data, ss:stack</span><br><span class="line">    main    proc far</span><br><span class="line">        ;将ds:bx指向存放数据的位置</span><br><span class="line">        mov     ax, data</span><br><span class="line">        mov     ds, ax</span><br><span class="line">        mov     cx, 7           ;主循环仅需要7次</span><br><span class="line">    loop_main:</span><br><span class="line">        lea     bx, buf</span><br><span class="line">        push    cx              ;cx=n, 子循环正好也要循环n次</span><br><span class="line">                                ;压栈保存外循环循环次数</span><br><span class="line">        mov     si, 0           ;标志是否有交换，当后面检测si==0时，说明</span><br><span class="line">                                ;内部已经排序完毕</span><br><span class="line">    loop_sub:</span><br><span class="line">        ;取得第一个数据到ax里，将之与第二个数据比较大小</span><br><span class="line">        ;ax大等于[bx]的话，保留原样</span><br><span class="line">        ;ax小的话，就得将两个数据进行交换位置</span><br><span class="line">        mov     al, [bx]</span><br><span class="line">        cmp     al, [bx+1]</span><br><span class="line">        jge     not_xchg        ;&gt;=不交换</span><br><span class="line">        ;ax小，进行交换</span><br><span class="line">        xchg    al, [bx+1]</span><br><span class="line">        mov     [bx], al</span><br><span class="line">        mov     si, 1           ;标志有交换</span><br><span class="line">    not_xchg:</span><br><span class="line">        ;第一步交换完成，需要依次进行一遍</span><br><span class="line">        inc     bx</span><br><span class="line">        loop    loop_sub</span><br><span class="line">        ;完毕后，只完成了初步的重排，这时数据段中的情况是，高地址存放最小的数</span><br><span class="line">        ;还需要继续执行，之后每次都减少一次</span><br><span class="line">        cmp     si, 0</span><br><span class="line">        je      done_xchg</span><br><span class="line">        ; 仍有交换，还需重复      </span><br><span class="line">        pop     cx              ;出栈，恢复cx</span><br><span class="line">        loop    loop_main</span><br><span class="line">    done_xchg:</span><br><span class="line">        mov     ax, 4c00h</span><br><span class="line">        int     21h</span><br><span class="line">    main    endp</span><br><span class="line">code     ends</span><br><span class="line">  end main</span><br></pre></td></tr></table></figure>
<ol start="5" type="1">
<li>内存中有8个16位数，请编写程序将8个数倒序排放 例：定义内存中8个数 buf dw 100, 3, 1, 20, 40, -2, 7, 10 程序运行后，buf 开始应为： buf dw 10, 7, -2, 40, 20, 1, 3, 100</li>
</ol>
<h3 id="思路-4">思路：</h3>
<p>要实现倒序存放，利用栈的入栈出栈，或者反复循环交换。但是使用栈，更为便捷。</p>
<h3 id="代码如下-4">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">data    segment para</span><br><span class="line">    buf dw -1, 2, -33, 44, -555, 666, -7777, 8888</span><br><span class="line">data    ends</span><br><span class="line">stack   segment stack</span><br><span class="line">    dw 100 dup(0)</span><br><span class="line">stack   ends</span><br><span class="line">code    segment para</span><br><span class="line">    assume  cs:code, ds:data, ss:stack</span><br><span class="line">    main    proc far</span><br><span class="line">        mov     ax, data</span><br><span class="line">        mov     ds, ax</span><br><span class="line">        lea     bx, buf</span><br><span class="line">        mov     cx, 8</span><br><span class="line">    stack_push:</span><br><span class="line">        push    [bx]</span><br><span class="line">        add     bx, 2</span><br><span class="line">        loop    stack_push</span><br><span class="line">        lea     bx, buf</span><br><span class="line">        mov     cx, 8</span><br><span class="line">    stack_pop:</span><br><span class="line">        pop     [bx]</span><br><span class="line">        add     bx, 2</span><br><span class="line">        loop    stack_pop</span><br><span class="line">        mov     ax, 4c00h</span><br><span class="line">        int     21h</span><br><span class="line">    main    endp</span><br><span class="line">code    ends</span><br><span class="line">    end     main</span><br></pre></td></tr></table></figure>
<ol start="6" type="1">
<li>从键盘输入 4 位十进制数，然后以 16 进制形式显示在屏幕上 例：键盘输入：1024 屏幕上应显示：0400H 要求：键盘输入和显示结果时均应有提示</li>
</ol>
<h3 id="思路-5">思路：</h3>
<p>输入四位十进制数，将ascii码利用中断功能，读入（此处会对输入字符做出合法性判断），转换为十进制数并以二进制的形式存在内存里，最后，转换为十六进制，并拆分各个数字，显示ascii码输出。具体流程详见注释。</p>
<h3 id="代码如下-5">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">;具体流程：ASCII码输入-&gt;十进制-&gt;十六进制-&gt;ASCII码显示</span><br><span class="line">;故需要子函数完成进制转换、ascii转换</span><br><span class="line">data    segment para</span><br><span class="line">    buf         db 4 dup(0)</span><br><span class="line">    var_10      dw 0</span><br><span class="line">    str_input   db 0dh, 0ah, &apos;Please input four numbers(0-9):$&apos;</span><br><span class="line">    str_error   db 0dh, 0ah, &apos;The input is error, please try again.$&apos;</span><br><span class="line">    str_output  db 0dh, 0ah, &apos;The hex result is:$&apos;</span><br><span class="line">data    ends</span><br><span class="line">stack   segment stack</span><br><span class="line">    dw 100 dup(0)</span><br><span class="line">stack   ends</span><br><span class="line">code    segment para</span><br><span class="line">    assume  cs:code, ds:data, ss:stack   </span><br><span class="line">    main    proc far</span><br><span class="line">        mov     ax, data</span><br><span class="line">        mov     ds, ax</span><br><span class="line">    loop_again:                 ;输入有错误需要重新读取输入</span><br><span class="line">        lea     dx, str_input   ;显示数据输入提示信息</span><br><span class="line">        mov     ah, 9</span><br><span class="line">        int     21h</span><br><span class="line">        lea     bx, buf         ;用bx来作为buf的指代</span><br><span class="line">        mov     cx, 4           ;循环输入4个数</span><br><span class="line">    loop_input: </span><br><span class="line">        mov     ah, 1           ;输入数据</span><br><span class="line">        int     21h</span><br><span class="line">        cmp     al, &apos;0&apos;         ;判断输入字符是否为‘0’~‘9’</span><br><span class="line">        jb      error</span><br><span class="line">        cmp     al, &apos;9&apos;</span><br><span class="line">        ja      error           ;非法字符，进行错误处理</span><br><span class="line">        ;直接输入一个字符，处理一个字符</span><br><span class="line">        sub     al, 30h         ;ASCII转换为二进制，得到 0-9</span><br><span class="line">        mov     [bx], al        ;存入缓冲区</span><br><span class="line">        inc     bx</span><br><span class="line">        loop    loop_input</span><br><span class="line">        jmp     input_valid     ;数据输入正确后 ,跳转到后续处理</span><br><span class="line">    error: </span><br><span class="line">        lea     dx, str_error   ;显示错误提示信息</span><br><span class="line">        mov     ah, 9</span><br><span class="line">        int     21h</span><br><span class="line">        jmp     loop_again      ;跳转到重新输入</span><br><span class="line">    input_valid:                ;现在数据以二进制的形式存储</span><br><span class="line">        mov     ax, 0           ;以(((0*10+dl3)*10+dl2)*10+dl1)*10+dl0计算</span><br><span class="line">                                ;十进制数据结果存放到ax中</span><br><span class="line">        mov     dx, 0           ;因为ax可以满足存放四位十进制数的需求</span><br><span class="line">        mov     si, 10          </span><br><span class="line">        mov     bx, 0</span><br><span class="line">        mov     cx, 4</span><br><span class="line">    loop_mul10: </span><br><span class="line">        mul     si              ;相乘后dx仍然保持 0</span><br><span class="line">        mov     dl, [bx]        ;将buf数据取到dl中</span><br><span class="line">        mov     dh, 0</span><br><span class="line">        add     ax, dx</span><br><span class="line">        inc     bx</span><br><span class="line">        loop    loop_mul10      ;循环4次乘10</span><br><span class="line">        mov     var_10, ax      ;得到的 4 位十进制数存放到 var_10 中</span><br><span class="line">                                ;var_10共16位，存放十进制数对应的二进制</span><br><span class="line">        lea     dx, str_output</span><br><span class="line">        mov     ah, 9</span><br><span class="line">        int     21h             ;显示输出提示符</span><br><span class="line">        mov     ch, 4           ;以16进制显示输入的数据，循环四次</span><br><span class="line">        mov     cl, 4</span><br><span class="line">    loop_display: </span><br><span class="line">        rol     var_10, cl      ;循环左移4位，因为要先显示高位</span><br><span class="line">        mov     ax, var_10</span><br><span class="line">        and     ax, 000fh       ;仅保留最低四位</span><br><span class="line">        call    bin2asc         ;二进制转换为 ASCII</span><br><span class="line">        call    pchar           ;显示一个十六进制字符</span><br><span class="line">        dec     ch</span><br><span class="line">        jnz     loop_display</span><br><span class="line">        mov     al, &apos;H&apos;         ;显示十六进制‘H’记号</span><br><span class="line">        call    pchar</span><br><span class="line">        mov     ax, 4c00h</span><br><span class="line">        int     21h</span><br><span class="line">    main    endp</span><br><span class="line"></span><br><span class="line">    ;功能: 将一个二进制数字转换为ASCII</span><br><span class="line">    ;输入参数 : AL中存放二进制数（有效位只有低四位）</span><br><span class="line">    ;输出参数 : AL中存放ASCII</span><br><span class="line">    bin2asc     proc</span><br><span class="line">        and     al, 0fh</span><br><span class="line">        add     al, 30h</span><br><span class="line">        cmp     al, 39h</span><br><span class="line">        jbe     done_b2a</span><br><span class="line">        add     al, 07h         ;是A~Z</span><br><span class="line">    done_b2a: </span><br><span class="line">        ret                     ;返回</span><br><span class="line">    bin2asc     endp</span><br><span class="line"></span><br><span class="line">    ;功能：显示单个字符</span><br><span class="line">    ;输入参数：AL中存放ASCII</span><br><span class="line">    ;输出参数：无</span><br><span class="line">    pchar   proc</span><br><span class="line">        mov     dl, al</span><br><span class="line">        mov     ah, 2</span><br><span class="line">        int     21h</span><br><span class="line">        ret                     ;返回</span><br><span class="line">    pchar   endp</span><br><span class="line">code    ends</span><br><span class="line">    end     main</span><br></pre></td></tr></table></figure>
<ol start="7" type="1">
<li>数据段从100H开始存放字符串str1，从200H开始存放str2，二者均以NULL字符为结束符，编写程序将str2拷贝到str1末尾，形成一个完整字符串 例： ORG 100H str1 db 0dh, 0ah, ‘Hello ’, 0 ORG 200H str2 db ‘Automation!’, 0 程序运行后结果应为： str1 db 0dh, 0ah, ‘Hello Automation!’, 0</li>
</ol>
<h3 id="思路-6">思路：</h3>
<p>利用<code>repnz   scasb</code>指令，将扫描的字符与al中预存的0比较，即查找str_first的结束位置，找到后，利用<code>mov cx, count</code> &amp; <code>rep movsb</code>两条命令，以及<code>count equ ($-str_second)</code>，将str_secon复制到str_first之后。 最后再利用lodsb，配合中断功能，显示最终的合并字符串。</p>
<h3 id="代码如下-6">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">data    segment para</span><br><span class="line">    ORG     100H</span><br><span class="line">    str_first   db 0dh, 0ah, &apos;Hello &apos;, 0</span><br><span class="line">    ORG     200H</span><br><span class="line">    str_second  db &apos;Automation! &apos;, 0</span><br><span class="line">    count       equ ($-str_second)</span><br><span class="line">data    ends</span><br><span class="line">ss_seg  segment stack</span><br><span class="line">    dw 100 dup(0)</span><br><span class="line">ss_seg  ends</span><br><span class="line">code    segment para</span><br><span class="line">    assume  cs:code, ds:data, ss:ss_seg</span><br><span class="line">    main    proc far</span><br><span class="line">        mov     ax, data</span><br><span class="line">        mov     ds, ax</span><br><span class="line">        mov     es, ax</span><br><span class="line">        lea     di, str_first   ;es:di 指向str_first首地址</span><br><span class="line">        mov     al, 0</span><br><span class="line">        repnz   scasb           ;查找到str_first结束符NULL，最后di会多加一次</span><br><span class="line">        dec     di              ;让es:di指向该位置</span><br><span class="line">        lea     si, str_second  ;ds:si指向str_second首地址</span><br><span class="line">        cld                     ;DF置零，右移</span><br><span class="line">        mov     cx, count</span><br><span class="line">        rep     movsb           ;重复搬移</span><br><span class="line">        lea     si, str_first   ;ds:si 指向拷贝后的 str_first 首地址</span><br><span class="line">    display: </span><br><span class="line">        lodsb                   ;显示拷贝后的 str_first 字符串</span><br><span class="line">        cmp     al, 0</span><br><span class="line">        jz      exit            ;显示完毕</span><br><span class="line">        call    pchar</span><br><span class="line">        jmp     display</span><br><span class="line">    exit: </span><br><span class="line">        mov     ax, 4c00h</span><br><span class="line">        int     21h</span><br><span class="line">    main    endp</span><br><span class="line"></span><br><span class="line">    ;功能：显示单个字符</span><br><span class="line">    ;输入参数：AL中存放ASCII</span><br><span class="line">    ;输出参数：无</span><br><span class="line">    pchar   proc</span><br><span class="line">        mov     dl, al</span><br><span class="line">        mov     ah, 2</span><br><span class="line">        int     21h</span><br><span class="line">        ret</span><br><span class="line">    pchar   endp</span><br><span class="line">code    ends</span><br><span class="line">    end     main</span><br></pre></td></tr></table></figure>
<ol start="8" type="1">
<li>以 10 进制形式显示 内存中一有符号字节数据 例：var db 0ffH 屏幕应显示：The result is: -1 代码如下：</li>
</ol>
<h3 id="思路-7">思路：</h3>
<p>主要是二进制转化为十进制后拆分成单个数字，在将之处理为ascii码。 首先需要与0比较，利用jg/jl等有符号数比较指令实现跳转处理。分别将第一个字符设置为对应的符号。 再将实际数值部分进行处理，转换为ascii码，进行显示。</p>
<h3 id="代码如下-7">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">;思路：二进制-&gt;十进制-&gt;ascii码</span><br><span class="line">data    segment para</span><br><span class="line">    var_signed      db 0ffH</span><br><span class="line">    str_result      db 0dh, 0ah, &apos;The result is: &apos;</span><br><span class="line">    num_signed      db 4 dup(&apos; &apos;);因为有符号字节数，最多就是三位十进制</span><br><span class="line">                    db &apos;$&apos;</span><br><span class="line">data    ends</span><br><span class="line">stack   segment stack</span><br><span class="line">    dw 100 dup(0)</span><br><span class="line">stack   ends</span><br><span class="line">code    segment para</span><br><span class="line">    assume  cs:code, ds:data, ss:stack</span><br><span class="line">    main    proc far</span><br><span class="line">        mov     ax, data</span><br><span class="line">        mov     ds, ax</span><br><span class="line">        mov     num_signed, &apos;+&apos;</span><br><span class="line">        cmp     var_signed, 0   ;判断 var_signed 是正数 ,还是负数</span><br><span class="line">        jge     is_pos          ;&gt;= 为正数</span><br><span class="line">        mov     num_signed, &apos;-&apos; ;&lt;  为负数</span><br><span class="line">        neg     var_signed      ;若 var_signed 为负，则补码的相反数</span><br><span class="line">    is_pos: </span><br><span class="line">        mov     al, var_signed</span><br><span class="line">        mov     cx, 3</span><br><span class="line">        mov     dl, 10          ;进制</span><br><span class="line">        lea     bx, num_signed+3;倒着放数据</span><br><span class="line">    again: </span><br><span class="line">        mov     ah, 0           ;高八位置零</span><br><span class="line">        div     dl</span><br><span class="line">        add     ah, 30h         ;余数 ah</span><br><span class="line">        mov     [bx], ah</span><br><span class="line">        dec     bx</span><br><span class="line">        loop    again           ;循环 3 次,分别得到百、十、个位</span><br><span class="line">    done:</span><br><span class="line">        lea     dx, str_result  ;显示 10 进制数</span><br><span class="line">        mov     ah, 9</span><br><span class="line">        int     21h</span><br><span class="line">    exit: </span><br><span class="line">        mov     ax, 4c00h</span><br><span class="line">        int     21h</span><br><span class="line">    main    endp</span><br><span class="line">code    ends</span><br><span class="line">    end     main</span><br></pre></td></tr></table></figure>
<ol start="9" type="1">
<li>将一个16位的无符号数var，转换为非压缩格式BCD码，存放在内存中buf开始的单元中。（按高位在 前、低位在后的顺序存放）</li>
</ol>
<h3 id="思路-8">思路：</h3>
<p>利用二进制转换十进制：((0<em>2 + B15)</em>2 + B14)<em>2 + ? + )</em>2 + B0 在运算过程中利用非压缩格式bcd码调整指令aaa，处理为非压缩格式bcd码，使得最终结果即为非压缩格式bcd码。</p>
<h3 id="代码如下-8">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">;二进制数 0FFFH，十进制 4095，非压缩BCD 4 0 9 5 各一个字节的低四位</span><br><span class="line">;二进制转换十进制：((0*2 + B15)*2 + B14)*2 + ? + )*2 + B0</span><br><span class="line">data    segment para</span><br><span class="line">    buf     db 4 dup(0)</span><br><span class="line">    var     dw 0FFFH    </span><br><span class="line">data    ends</span><br><span class="line">stack   segment stack</span><br><span class="line">    dw  100 dup(0)</span><br><span class="line">stack   ends</span><br><span class="line">code    segment para </span><br><span class="line">    assume  cs:code, ds:data, ss:stack</span><br><span class="line">    main    proc far</span><br><span class="line">        mov     ax, data</span><br><span class="line">        mov     ds, ax</span><br><span class="line">        mov     cx, 16          ;要进行十六次移位，利用adc获得</span><br><span class="line">    loop_wai: </span><br><span class="line">        shl     var, 1          ;得到 var 的 Bi 位</span><br><span class="line">        mov     bx, 3</span><br><span class="line">        push    cx</span><br><span class="line">        mov     cx, 4</span><br><span class="line">    loop_nei:                   </span><br><span class="line">        mov     al, [bx]        ;执行 buf*2 + Bi 操作</span><br><span class="line">        adc     al, al</span><br><span class="line">        aaa                     ;非压缩格式 BCD 码调整</span><br><span class="line">        mov     [bx], al</span><br><span class="line">        dec     bx</span><br><span class="line">        loop    loop_nei        ;内循环为 4 次</span><br><span class="line">        pop     cx</span><br><span class="line">        loop    loop_wai        ;外循环为 16 次</span><br><span class="line">    exit: </span><br><span class="line">        mov     ax, 4c00h</span><br><span class="line">        int     21h</span><br><span class="line">    main    endp</span><br><span class="line">code    ends</span><br><span class="line">    end     main</span><br></pre></td></tr></table></figure>
<ol start="10" type="1">
<li>内存中有两个32位有符号数，请编写完整汇编语言程序，将二者相乘，结果保存在64位有符号数RESULT中</li>
</ol>
<h3 id="思路-9">思路：</h3>
<p>两个32位与符号数相乘，只要处理好符号位，就可以转化为无符号数相乘。</p>
<h3 id="代码如下-9">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">data    segment para</span><br><span class="line">    num_1   dd 80000002h</span><br><span class="line">    num_2   dd 80005000h</span><br><span class="line">    result  dw 4 dup (?)</span><br><span class="line">data    ends</span><br><span class="line">ss_seg  segment stack</span><br><span class="line">    dw 100 dup (0)</span><br><span class="line">ss_seg  ends</span><br><span class="line">code    segment para</span><br><span class="line">    assume  cs:code, ds:data, ss:ss_seg</span><br><span class="line">    main    proc far</span><br><span class="line">        mov     ax, data</span><br><span class="line">        mov     ds, ax</span><br><span class="line">        shl     byte ptr [num_1+3], 1	;处理符号位</span><br><span class="line">        jc      num_1_l0 				;num_1&lt;0</span><br><span class="line">        xor     ax, ax   </span><br><span class="line">        shr     byte ptr [num_1+3], 1	;剥离符号位</span><br><span class="line">        mov     bh, 0h					;用bh存放符号位</span><br><span class="line">        jmp     next					;符号位被置零</span><br><span class="line">    num_1_l0:;num_1&lt;0</span><br><span class="line">        mov     bh, 1h					;用bh存放符号位</span><br><span class="line">    next:</span><br><span class="line">        shl     byte ptr [num_2+3], 1	;对num_2做相同处理</span><br><span class="line">        jc      num_2_l0</span><br><span class="line">        xor     ax, ax</span><br><span class="line">        shr     byte ptr [num_2+3], 1</span><br><span class="line">        mov     bl, 0h</span><br><span class="line">        jmp     continue</span><br><span class="line">    num_2_l0:;num_2&lt;0</span><br><span class="line">        mov     bl, 1h</span><br><span class="line">    continue:							; 当做无符号数处理，计算相乘</span><br><span class="line">        lea     si, num_1</span><br><span class="line">        lea     di, num_2</span><br><span class="line">        mov     ax, [si]</span><br><span class="line">        mov     dx, [di]</span><br><span class="line">        mul     dx</span><br><span class="line">        mov     [result],ax</span><br><span class="line">        mov     [result+2],dx</span><br><span class="line">        mov     ax, [si+2]</span><br><span class="line">        mov     dx, [di]</span><br><span class="line">        mul     dx</span><br><span class="line">        add     [result+2],ax</span><br><span class="line">        adc     [result+4],dx</span><br><span class="line">        mov     ax, [si]</span><br><span class="line">        mov     dx, [di+2]</span><br><span class="line">        mul     dx</span><br><span class="line">        add     [result+2],ax</span><br><span class="line">        adc     [result+4],dx</span><br><span class="line">        adc     [result+6],0</span><br><span class="line">        mov     ax, [si+2]</span><br><span class="line">        mov     dx, [di+2]</span><br><span class="line">        mul     dx</span><br><span class="line">        add     [result+4],ax</span><br><span class="line">        adc     [result+6],dx</span><br><span class="line">        sub     bh, bl					;处理符号</span><br><span class="line">        jnz     bh_nz_bl				;num_1 num_2异号</span><br><span class="line">        and     [result+7], 01111111b	;同号就将结果最高位置0</span><br><span class="line">        jmp     exit</span><br><span class="line">    bh_nz_bl:;不同号</span><br><span class="line">        or      [result+7], 10000000b	;异号就将结果最高位置1</span><br><span class="line">    exit:</span><br><span class="line">        mov     ah, 4ch</span><br><span class="line">        int     21h</span><br><span class="line">    main    endp</span><br><span class="line">code    ends</span><br><span class="line">    end     main</span><br></pre></td></tr></table></figure>
<ol start="11" type="1">
<li>将一个 8 位压缩 BCD 码转换为二进制数</li>
</ol>
<h3 id="思路-10">思路：</h3>
<p>对于四位压缩bcd码的过程比较简单，可以利用不断循环左移四位，将高位字节的两个bcd码置于字单元的最后位置，整体赋给寄存器，现在寄存器里存放的是一位压缩bcd码，乘以10再加上下一位如此获得的bcd码，反复如此，就可以获得四位的压缩bcd对应的十进制，存放到内存中，就变为了二进制。 而对于八位压缩bcd码，则可以拆成高四位对应的十进制，乘以10000，加上低四位对应的十进制数。这里就是这样处理的。 高四位低四位分别求出了对应的十进制，按上述规则相加，得到了最终结果。</p>
<h3 id="代码如下-10">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">data    segment para</span><br><span class="line">    BCD_num     dd 12345678h</span><br><span class="line">    bin_num     db 4 dup(0)</span><br><span class="line">    loop_num    db 2</span><br><span class="line">data    ends</span><br><span class="line">ss_seg  segment stack</span><br><span class="line">    dw      100 dup(0)</span><br><span class="line">ss_seg  ends</span><br><span class="line">code    segment para </span><br><span class="line">    assume  cs:code, ds:data, ss:ss_seg</span><br><span class="line">    main    proc far</span><br><span class="line">        mov     ax, data</span><br><span class="line">        mov     ds, ax</span><br><span class="line">        mov     si, 10</span><br><span class="line">        mov     ax, 0</span><br><span class="line">        mov     dl, 2   ;分两段</span><br><span class="line">        mov     di, 2</span><br><span class="line">    again_loop:</span><br><span class="line">        mov     cx, 0404h	;ch 乘法循环计数器； cl 移位计数器</span><br><span class="line">    again_mul:</span><br><span class="line">        mul     si</span><br><span class="line">        rol     word ptr [BCD_num+di], cl</span><br><span class="line">        mov     bx, word ptr [BCD_num+di]</span><br><span class="line">        and     bx, 000fh</span><br><span class="line">        add     ax, bx</span><br><span class="line">        dec     ch</span><br><span class="line">        jnz     again_mul</span><br><span class="line">        mov     word ptr [bin_num+di], ax</span><br><span class="line">        xor     di, di</span><br><span class="line">        xor     ax, ax</span><br><span class="line">        sub     [loop_num], 1</span><br><span class="line">        jnz     again_loop</span><br><span class="line">        ; 高四位对应的十进制乘以10，加上低四位对应的十进制</span><br><span class="line">        mov     ax, word ptr [bin_num+2]</span><br><span class="line">        mov     bx, 10000</span><br><span class="line">        mul     bx</span><br><span class="line">        add     ax, word ptr [bin_num]</span><br><span class="line">        adc     dx, 0</span><br><span class="line">        mov     word ptr [bin_num], ax</span><br><span class="line">        mov     word ptr [bin_num+2], dx</span><br><span class="line">        mov     ax, 4c00h</span><br><span class="line">        int     21h</span><br><span class="line">    main    endp</span><br><span class="line">code    ends</span><br><span class="line">    end     main</span><br></pre></td></tr></table></figure>
<p>选作题：</p>
<ol start="12" type="1">
<li>内存中从str开始存放一字符串，结束符为NULL字符，请编写程序统计该字符串中单词的个数 例：str1 db 0dh, 0ah, ‘Hello world, welcome to DUT. CPU is central processing unit!’, 0h 统计 ’….’ 中的单词个数，结果为10</li>
</ol>
<h3 id="思路-11">思路：</h3>
<p>如题所述，主要统计空格。通过扫描字符串，统计空格，但是有效的空格前一个字符是有效的字符，只有这样的空格才会统计。</p>
<h3 id="代码如下-11">代码如下：</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">data    segment para</span><br><span class="line">jj    string  db 0dh, 0ah, &apos;Hello world, welcome to DUT. CPU is central &apos;</span><br><span class="line">            db &apos;processing unit!&apos;, 0h</span><br><span class="line">    words   dw 0</span><br><span class="line">data    ends</span><br><span class="line">stack   segment stack</span><br><span class="line">    db  256 dup(0)</span><br><span class="line">stack   ends</span><br><span class="line">code    segment para</span><br><span class="line">    assume  cs:code, ds:data, ss:stack</span><br><span class="line">    main    proc far</span><br><span class="line">        mov     ax, data</span><br><span class="line">        mov     ds, ax</span><br><span class="line">        mov     cx, 0       ;用 cx 存放单词数</span><br><span class="line">        lea     si, string</span><br><span class="line">        mov     bl, &apos; &apos;     ;bl 总保存当前字符的前一个字符</span><br><span class="line">        cld                 ;保证右移</span><br><span class="line">    load_al: </span><br><span class="line">        lodsb               ;从ds:si中以字节为单位获取数据，al只判断0以及空格</span><br><span class="line">        and     al, al      ;判断 al 是否为结束符 0，al=0 zf=1，al!=0，zf=0</span><br><span class="line">        jz      al_0</span><br><span class="line">        cmp     al, &apos; &apos;     ;比较是否是空格，只对空格计数</span><br><span class="line">        jnz     bl_new</span><br><span class="line">    al_douhao:              ;处理重复计数：计数只是根据空格的个数来计算。</span><br><span class="line">                            ;重复计数主要是因为多个空格以及逗号空格连续所致。</span><br><span class="line">        cmp     bl, &apos; &apos;     ;比较前一个字符是否为空格，如果是则此空格</span><br><span class="line">                            ;不能算一个单词，即为了防止多个空格的情况</span><br><span class="line">        jz      bl_new</span><br><span class="line">        inc     cx          ;只有当前字符为 &apos; &apos;或&apos;,&apos; 而且前一个字符为有</span><br><span class="line">                            ;效字符时，才对单词数加 1</span><br><span class="line">        jmp     bl_new</span><br><span class="line">    bl_new: </span><br><span class="line">        mov     bl, al      ;进入这里表明此时 al 中内容不是 0 或者 &apos; &apos;</span><br><span class="line">                            ;符号 ,保存 al 到 bl</span><br><span class="line">        jmp     load_al</span><br><span class="line">    al_0:                   ;判断结束符前面是否有&apos; &apos;，删掉多余的计数</span><br><span class="line">        cmp     bl, &apos; &apos;     </span><br><span class="line">        jz      done</span><br><span class="line">        inc     cx          ;若结束符前是一个有效字符，那么单词数应该加 1</span><br><span class="line">    done: </span><br><span class="line">        mov     words, cx</span><br><span class="line">        mov     ax, 4c00h</span><br><span class="line">        int     21h</span><br><span class="line">    main    endp</span><br><span class="line">code    ends</span><br><span class="line">    end     main</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Lart Pang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">58</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">30</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/lartpang" title="GitHub &rarr; https://github.com/lartpang" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:%6C%61%72%74%70%61%6E%67%40%31%36%33%2E%63%6F%6D" title="E-Mail &rarr; mailto:%6C%61%72%74%70%61%6E%67%40%31%36%33%2E%63%6F%6D" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://weibo.com/140jmx" title="Weibo &rarr; https://weibo.com/140jmx" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://blog.csdn.net/p_lart" title="https://blog.csdn.net/p_lart" rel="noopener" target="_blank">csdn</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.jianshu.com/u/f381f4c8dca4" title="https://www.jianshu.com/u/f381f4c8dca4" rel="noopener" target="_blank">简书</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 – <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lart Pang</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">356k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">10:48</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.5.0</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  













  



  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/reading_progress/reading_progress.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.5.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.5.0"></script>



  



  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  


  
  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>

  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('复制成功')
          else $(this).text('复制失败')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>


  

</body>
</html>
