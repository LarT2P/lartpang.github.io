<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>利用豆瓣短评数据生成词云 | 失乐园</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="在之前的文章中，我们获得了豆瓣爬取的短评内容，汇总到了一个文件中，但是，没有被利用起来的数据是没有意义的。 前文提到，有一篇微信推文的关于词云制作的一个实践记录，准备照此试验一下。">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="利用豆瓣短评数据生成词云">
<meta property="og:url" content="https://plart.pw/2017/08/18/langs/python/spyderforwordcloud/index.html">
<meta property="og:site_name" content="失乐园">
<meta property="og:description" content="在之前的文章中，我们获得了豆瓣爬取的短评内容，汇总到了一个文件中，但是，没有被利用起来的数据是没有意义的。 前文提到，有一篇微信推文的关于词云制作的一个实践记录，准备照此试验一下。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2817465-4fed401bd994439e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2817465-b5570779fa57b746?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/2817465-4eec39379b930ad6?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2018-07-13T12:44:00.285Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="利用豆瓣短评数据生成词云">
<meta name="twitter:description" content="在之前的文章中，我们获得了豆瓣爬取的短评内容，汇总到了一个文件中，但是，没有被利用起来的数据是没有意义的。 前文提到，有一篇微信推文的关于词云制作的一个实践记录，准备照此试验一下。">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/2817465-4fed401bd994439e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
  
    <link rel="alternate" href="/atom.xml" title="失乐园" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">失乐园</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">代码与机器</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://plart.pw"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-langs/python/spyderforwordcloud" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/18/langs/python/spyderforwordcloud/" class="article-date">
  <time datetime="2017-08-18T10:08:36.000Z" itemprop="datePublished">2017-08-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/编程与生活/">编程与生活</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      利用豆瓣短评数据生成词云
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在之前的文章中，我们获得了豆瓣爬取的短评内容，汇总到了一个文件中，但是，没有被利用起来的数据是没有意义的。</p>
<p>前文提到，有一篇微信推文的关于词云制作的一个实践记录，准备照此试验一下。</p>
<a id="more"></a>
<h1 id="思路分析"><a href="#思路分析" class="headerlink" title="思路分析"></a>思路分析</h1><h2 id="读文件"><a href="#读文件" class="headerlink" title="读文件"></a>读文件</h2><p>利用<code>with open() as...</code>将文件读进来。这里需要注意文件内容的大小。</p>
<h2 id="分词"><a href="#分词" class="headerlink" title="分词"></a>分词</h2><p>由于获取的是大量的短评文字，而制作词云需要的是各种词语，有了词，才能谈词云，所以目前第一步需求的就是讲短评内容拆分成一个个的中文词汇。</p>
<p>这里就用到了我所听过的一个库<code>jieba</code>，可以将中文语句拆解成一个个的词汇。这里是用的是<code>lcut()</code>方法，能将中文字符串拆解成一个列表，每项都是一个词。</p>
<h2 id="清洗非中文"><a href="#清洗非中文" class="headerlink" title="清洗非中文"></a>清洗非中文</h2><p>但是，我们在分析中，需要的就是中文文字，所以需要将非中文字符彻底清理，这里使用了正则表达式。短小精悍的一个模式<code>[\u4e00-\u9fa5]+</code>即可匹配。</p>
<p>使用正则表达式，我的习惯是现在网上的一些在线正则表达式工具上直接测试。其中<code>oschina</code>的不错，还给提供了一些例子。</p>
<p><a href="http://tool.oschina.net/regex/" target="_blank" rel="noopener">在线正则表达式测试</a></p>
<p>这里是<code>oschina</code>的工具网站，做的很好。</p>
<p><a href="http://tool.oschina.net/" target="_blank" rel="noopener">工具分类索引</a></p>
<h2 id="处理停词"><a href="#处理停词" class="headerlink" title="处理停词"></a>处理停词</h2><p>由于这些词汇中，有很多词是没有实际分析价值的，所以我们需要利用一个停词文件来将不必要的词处理掉。</p>
<p>参考文章中，是利用<code>pandas</code>库汇总的方法<code>read_csv()</code>来处理停词文件。，利用一个<code>isin()</code>方法实现了停词。</p>
<h2 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h2><p>词分开了，基本也处理干净了。接下来应该考虑制作词云的问题。</p>
<p>我们这里想要重点突出在所有评论中的重要的<strong>核心观点</strong>，为了实现这样的目的，我们使用了分词。</p>
<p>这似乎是一种有些“<em>断章取义</em>”的思路。借助词频的分布实现重点突出高词频内容的方式，来展现我们的词云。</p>
<p>所以现在我们需要做的事，就是处理词汇的聚合问题，统计词频而已。</p>
<p>参考文种中利用了类<code>DataFrame</code>的分组方法<code>group()</code>和聚合方法<code>agg()</code>。</p>
<p>关于这里，参考文章中在<code>agg()</code>中使用了一个显式的字典（可见文末参考文章），调用了<code>numpy.size</code>，但是似乎是这种用法将来会被移除，查了一些文章，说是可以这样用，就是不能自己定制字典了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FutureWarning: using a dict on a Series <span class="keyword">for</span> aggregation <span class="keyword">is</span> deprecated <span class="keyword">and</span> will be removed <span class="keyword">in</span> a future version</span><br></pre></td></tr></table></figure>
<h2 id="词云"><a href="#词云" class="headerlink" title="词云"></a>词云</h2><p>这里使用了第三方库<code>wordcloud</code>。这个库在安装的时候，直接<code>pip install wordcloud</code>时，我出了问题，提示微软开发工具的问题，折腾了半天，最后还是直接在<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/" target="_blank" rel="noopener">一个极为丰富的第三方库的集合站点上</a>下载使用<code>pip insatll</code>了它的<code>whl</code>文件。</p>
<p>这下可以正常使用了。</p>
<p>同时，这里为了能够显示处理图片，使用了<code>matplotlib.pyplot</code>&amp;<code>numpy</code>来进行处理。</p>
<h3 id="掩膜设置"><a href="#掩膜设置" class="headerlink" title="掩膜设置"></a>掩膜设置</h3><p>由<a href="https://github.com/amueller/word_cloud" target="_blank" rel="noopener"><code>wordcloud项目主页README</code></a> 了解，可以使用二值图像来设定掩膜(mask)。</p>
<p>出于提升数据的表现力，也出于学习的目的，这里使用了直接编写的<code>rgb2gray()</code>&amp;<code>gray2bw()</code>函数来实现真彩图像转换为二值图像的过程。获得了最终的二值图像掩膜。</p>
<p>这里开始我并不知道需要怎样的图像，看了给的示例代码，用的图片的是二值图像，才明白，白白浪费了好多时间。</p>
<p>而且，我的理解，由彩色转为二值图像，是必要经过灰度图像这个过程的。</p>
<p>关于<code>matplotlib.pyplot</code>的使用，网上都说，和<code>matlab</code>的语法很类似，以前了解过一点，所以看着例子中的<code>imshow()</code>，很自然的就想出了<code>imread()</code>，实现了图片的读取。</p>
<p>在查阅文档的过程中发现了一个有意思的地方。</p>
<p><a href="http://matplotlib.org/api/pyplot_api.html?highlight=imshow#matplotlib.pyplot.imread" target="_blank" rel="noopener">文档</a></p>
<blockquote>
<p>Return value is a numpy.array. For grayscale images, the return array is MxN. For RGB images, the return value is MxNx3. For RGBA images the return value is MxNx4.<br>matplotlib can only read PNGs natively, but if PIL is installed, it will use it to load the image and return an array (if possible) which can be used with imshow(). Note, URL strings may not be compatible with PIL. Check the PIL documentation for more information.</p>
</blockquote>
<p>我文中使用的是JPG图像，可见是调用了PIL处理。</p>
<p>而这里对于二值图像的获取，开始经历了一个误区。由于在网上搜索的时候，搜到的大多是利用<code>PIL</code>库的<code>Image</code>模块的<code>open()</code>&amp;<code>convert()</code>方法的处理，附加参数<code>1</code>，可以实现二值图像的转化，但是在这里使用，后面在使用词云的时候，会提示缺少属性，可见这里不适合这样处理。</p>
<h3 id="词云设定"><a href="#词云设定" class="headerlink" title="词云设定"></a>词云设定</h3><p>词云支持自定义字体，背景颜色，掩膜设置等等，可以直接在IDE中跳至源文件中查看。都有相关的介绍。</p>
<p>文末代码是一些参数的摘录。</p>
<h3 id="词频选择"><a href="#词频选择" class="headerlink" title="词频选择"></a>词频选择</h3><p>这里使用了刚才聚合排序好的数据，选择了前1000个词进行展示，并组合成字典，传入了词云的实例对象的方法<code>fit_words()</code>生成了词云。</p>
<h3 id="词云展示"><a href="#词云展示" class="headerlink" title="词云展示"></a>词云展示</h3><p>这里使用了<code>matplotlib.pyplot</code>的的几个函数，实现了图像的保存，显示，以及坐标轴的隐藏。</p>
<p>这里倒是有个小异或，有点分不清楚<code>imshow()</code>与<code>show()</code>了。两者从文档我也没看出个所以然来。不过他们有个最明显的区别就是后者依赖图形窗口，但是前者似乎不需要。</p>
<p>要是有明白的，还请大家留言或者发邮件给我。</p>
<h1 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">Created on Thu Aug 17 16:31:35 2017</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@note: 为了便于阅读，将模块的引用就近安置了</span></span><br><span class="line"><span class="string">@author: lart</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取事先爬取好的文件，由于文件较小，直接一次性读入。若文件较大，则最好分体积读入。</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'秘密森林的短评.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    comments = file.readlines()</span><br><span class="line">    comment = <span class="string">''</span>.join(comments)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 摘取中文字符，没有在下载时处理，正好保留原始数据。</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">pattern = re.compile(<span class="string">r'[\u4e00-\u9fa5]+'</span>)</span><br><span class="line">data = pattern.findall(comment)</span><br><span class="line">filted_comment = <span class="string">''</span>.join(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分词</span></span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line">word = jieba.lcut(filted_comment)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 整理</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">words_df = pd.DataFrame(&#123;<span class="string">'words'</span>: word&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">#停词相关设置。参数 quoting=3 全不引用</span></span><br><span class="line">stopwords = pd.read_csv(</span><br><span class="line">        <span class="string">"stopwords.txt"</span>,</span><br><span class="line">        index_col=<span class="keyword">False</span>,</span><br><span class="line">        quoting=<span class="number">3</span>,</span><br><span class="line">        sep=<span class="string">"\t"</span>,</span><br><span class="line">        names=[<span class="string">'stopword'</span>],</span><br><span class="line">        encoding=<span class="string">'utf-8'</span></span><br><span class="line">        )</span><br><span class="line">words_df = words_df[~words_df.words.isin(stopwords.stopword)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 聚合</span></span><br><span class="line">words_stat = words_df.groupby(<span class="string">'words'</span>)[<span class="string">'words'</span>].agg(&#123;<span class="string">'size'</span>&#125;)</span><br><span class="line">words_stat = words_stat.reset_index().sort_values(<span class="string">"size"</span>, ascending=<span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 词云设置</span></span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rgb2gray</span><span class="params">(rgb)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> np.dot(rgb[...,:<span class="number">3</span>], [<span class="number">0.299</span>, <span class="number">0.587</span>, <span class="number">0.114</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gray2bw</span><span class="params">(gray)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> raw <span class="keyword">in</span> range(len(gray)):</span><br><span class="line">        <span class="keyword">for</span> col <span class="keyword">in</span> range(len(gray[raw])):</span><br><span class="line">            gray[raw][col] = (<span class="number">0</span> <span class="keyword">if</span> gray[raw][col]&gt;<span class="number">50</span> <span class="keyword">else</span> <span class="number">255</span>)</span><br><span class="line">    <span class="keyword">return</span> gray</span><br><span class="line"></span><br><span class="line">img = plt.imread(<span class="string">'4.jpg'</span>)</span><br><span class="line">mask = rgb2gray(img)</span><br><span class="line">bw = gray2bw(mask)</span><br><span class="line"></span><br><span class="line">wordcloud = WordCloud(</span><br><span class="line">                font_path=<span class="string">"YaHei Consolas Hybrid.ttf"</span>,</span><br><span class="line">                background_color=<span class="string">"white"</span>,</span><br><span class="line">                mask=bw,</span><br><span class="line">                max_font_size=<span class="number">80</span></span><br><span class="line">                )</span><br><span class="line"><span class="comment"># word_frequence 为字典类型，可以直接传入wordcloud.fit_words()</span></span><br><span class="line">word_frequence = &#123;</span><br><span class="line">        x[<span class="number">0</span>]:x[<span class="number">1</span>] <span class="keyword">for</span> x <span class="keyword">in</span> words_stat.head(<span class="number">1000</span>).values</span><br><span class="line">        &#125;</span><br><span class="line">wordcloud = wordcloud.fit_words(word_frequence)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 存储显示</span></span><br><span class="line">plt.imsave(<span class="string">'img.jpg'</span>, wordcloud)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">131</span>)</span><br><span class="line">plt.imshow(img)</span><br><span class="line">plt.axis(<span class="string">"off"</span>)</span><br><span class="line">plt.subplot(<span class="number">132</span>)</span><br><span class="line">plt.imshow(bw)</span><br><span class="line">plt.axis(<span class="string">"off"</span>)</span><br><span class="line">plt.subplot(<span class="number">133</span>)</span><br><span class="line">plt.imshow(wordcloud, interpolation=<span class="string">'bilinear'</span>)</span><br><span class="line">plt.axis(<span class="string">"off"</span>)</span><br></pre></td></tr></table></figure>
<h1 id="结果文件"><a href="#结果文件" class="headerlink" title="结果文件"></a>结果文件</h1><p>使用的掩膜原图片：</p>
<p>秘密森林剧照</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2817465-4fed401bd994439e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="秘密森林剧照"></p>
<p>输出图片</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2817465-b5570779fa57b746?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="输出图片"></p>
<p>IDE输出结果</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2817465-4eec39379b930ad6?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="这里写图片描述"></p>
<h1 id="停词文件"><a href="#停词文件" class="headerlink" title="停词文件"></a>停词文件</h1><p><a href="http://download.csdn.net/download/p_lart/9940528" target="_blank" rel="noopener">stopwords.txt</a></p>
<hr>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">Parameters</span><br><span class="line">----------</span><br><span class="line">font_path : string</span><br><span class="line"><span class="code">    Font path to the font that will be used (OTF or TTF).</span></span><br><span class="line"><span class="code">    Defaults to DroidSansMono path on a Linux machine. If you are on</span></span><br><span class="line"><span class="code">    another OS or don't have this font, you need to adjust this path.</span></span><br><span class="line"></span><br><span class="line">width : int (default=400)</span><br><span class="line"><span class="code">    Width of the canvas.</span></span><br><span class="line"></span><br><span class="line">height : int (default=200)</span><br><span class="line"><span class="code">    Height of the canvas.</span></span><br><span class="line"></span><br><span class="line">prefer_horizontal : float (default=0.90)</span><br><span class="line"><span class="code">    The ratio of times to try horizontal fitting as opposed to vertical.</span></span><br><span class="line"><span class="code">    If prefer_horizontal &lt; 1, the algorithm will try rotating the word</span></span><br><span class="line"><span class="code">    if it doesn't fit. (There is currently no built-in way to get only</span></span><br><span class="line"><span class="code">    vertical words.)</span></span><br><span class="line"></span><br><span class="line">mask : nd-array or None (default=None)</span><br><span class="line"><span class="code">    If not None, gives a binary mask on where to draw words. If mask is not</span></span><br><span class="line"><span class="code">    None, width and height will be ignored and the shape of mask will be</span></span><br><span class="line"><span class="code">    used instead. All white (#FF or #FFFFFF) entries will be considerd</span></span><br><span class="line"><span class="code">    "masked out" while other entries will be free to draw on. [This</span></span><br><span class="line"><span class="code">    changed in the most recent version!]</span></span><br><span class="line"></span><br><span class="line">scale : float (default=1)</span><br><span class="line"><span class="code">    Scaling between computation and drawing. For large word-cloud images,</span></span><br><span class="line"><span class="code">    using scale instead of larger canvas size is significantly faster, but</span></span><br><span class="line"><span class="code">    might lead to a coarser fit for the words.</span></span><br><span class="line"></span><br><span class="line">min<span class="emphasis">_font_</span>size : int (default=4)</span><br><span class="line"><span class="code">    Smallest font size to use. Will stop when there is no more room in this</span></span><br><span class="line"><span class="code">    size.</span></span><br><span class="line"></span><br><span class="line">font_step : int (default=1)</span><br><span class="line"><span class="code">    Step size for the font. font_step &gt; 1 might speed up computation but</span></span><br><span class="line"><span class="code">    give a worse fit.</span></span><br><span class="line"></span><br><span class="line">max_words : number (default=200)</span><br><span class="line"><span class="code">    The maximum number of words.</span></span><br><span class="line"></span><br><span class="line">stopwords : set of strings or None</span><br><span class="line"><span class="code">    The words that will be eliminated. If None, the build-in STOPWORDS</span></span><br><span class="line"><span class="code">    list will be used.</span></span><br><span class="line"></span><br><span class="line">background_color : color value (default="black")</span><br><span class="line"><span class="code">    Background color for the word cloud image.</span></span><br><span class="line"></span><br><span class="line">max<span class="emphasis">_font_</span>size : int or None (default=None)</span><br><span class="line"><span class="code">    Maximum font size for the largest word. If None, height of the image is</span></span><br><span class="line"><span class="code">    used.</span></span><br><span class="line"></span><br><span class="line">mode : string (default="RGB")</span><br><span class="line"><span class="code">    Transparent background will be generated when mode is "RGBA" and</span></span><br><span class="line"><span class="code">    background_color is None.</span></span><br><span class="line"></span><br><span class="line">relative_scaling : float (default=.5)</span><br><span class="line"><span class="code">    Importance of relative word frequencies for font-size.  With</span></span><br><span class="line"><span class="code">    relative_scaling=0, only word-ranks are considered.  With</span></span><br><span class="line"><span class="code">    relative_scaling=1, a word that is twice as frequent will have twice</span></span><br><span class="line"><span class="code">    the size.  If you want to consider the word frequencies and not only</span></span><br><span class="line"><span class="code">    their rank, relative_scaling around .5 often looks good.</span></span><br><span class="line"></span><br><span class="line"><span class="code">    .. versionchanged: 2.0</span></span><br><span class="line"><span class="code">        Default is now 0.5.</span></span><br><span class="line"></span><br><span class="line">color_func : callable, default=None</span><br><span class="line"><span class="code">    Callable with parameters word, font_size, position, orientation,</span></span><br><span class="line"><span class="code">    font_path, random_state that returns a PIL color for each word.</span></span><br><span class="line"><span class="code">    Overwrites "colormap".</span></span><br><span class="line"><span class="code">    See colormap for specifying a matplotlib colormap instead.</span></span><br><span class="line"></span><br><span class="line">regexp : string or None (optional)</span><br><span class="line"><span class="code">    Regular expression to split the input text into tokens in process_text.</span></span><br><span class="line"><span class="code">    If None is specified, ``r"\w[\w']+"`` is used.</span></span><br><span class="line"></span><br><span class="line">collocations : bool, default=True</span><br><span class="line"><span class="code">    Whether to include collocations (bigrams) of two words.</span></span><br><span class="line"></span><br><span class="line"><span class="code">    .. versionadded: 2.0</span></span><br><span class="line"></span><br><span class="line">colormap : string or matplotlib colormap, default="viridis"</span><br><span class="line"><span class="code">    Matplotlib colormap to randomly draw colors from for each word.</span></span><br><span class="line"><span class="code">    Ignored if "color_func" is specified.</span></span><br><span class="line"></span><br><span class="line"><span class="code">    .. versionadded: 2.0</span></span><br><span class="line"></span><br><span class="line">normalize_plurals : bool, default=True</span><br><span class="line"><span class="code">    Whether to remove trailing 's' from words. If True and a word</span></span><br><span class="line"><span class="code">    appears with and without a trailing 's', the one with trailing 's'</span></span><br><span class="line"><span class="code">    is removed and its counts are added to the version without</span></span><br><span class="line"><span class="code">    trailing 's' -- unless the word ends with 'ss'.</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://plart.pw/2017/08/18/langs/python/spyderforwordcloud/" data-id="cjogni4ga004mqshsji9phag4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/08/20/langs/python/spyder_end/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          关于近期爬虫学习的总结
        
      </div>
    </a>
  
  
    <a href="/2017/08/17/langs/python/spyderfordouban/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">我的第一个豆瓣短评爬虫</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/幻想与现实/">幻想与现实</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术与进步/">技术与进步</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活与思考/">生活与思考</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/电影与艺术/">电影与艺术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程与生活/">编程与生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/记录与总结/">记录与总结</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-C/">C++&C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ChucK/">ChucK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R/">R</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/org-mode/">org-mode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python3/">python3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/佳片/">佳片</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习/">学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开心麻花/">开心麻花</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/影视/">影视</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/总结/">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/校园/">校园</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/汇编/">汇编</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爱情/">爱情</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/琐事/">琐事</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生活/">生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电影/">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/科幻/">科幻</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机原理/">计算机原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机网络/">计算机网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/进阶/">进阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/通信/">通信</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随感/">随感</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/C-C/" style="font-size: 14.29px;">C++&C</a> <a href="/tags/ChucK/" style="font-size: 20px;">ChucK</a> <a href="/tags/Java/" style="font-size: 11.43px;">Java</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/R/" style="font-size: 10px;">R</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/org-mode/" style="font-size: 10px;">org-mode</a> <a href="/tags/python/" style="font-size: 18.57px;">python</a> <a href="/tags/python3/" style="font-size: 10px;">python3</a> <a href="/tags/佳片/" style="font-size: 10px;">佳片</a> <a href="/tags/学习/" style="font-size: 17.14px;">学习</a> <a href="/tags/工具/" style="font-size: 11.43px;">工具</a> <a href="/tags/开心麻花/" style="font-size: 10px;">开心麻花</a> <a href="/tags/影视/" style="font-size: 11.43px;">影视</a> <a href="/tags/总结/" style="font-size: 10px;">总结</a> <a href="/tags/数据结构/" style="font-size: 11.43px;">数据结构</a> <a href="/tags/校园/" style="font-size: 10px;">校园</a> <a href="/tags/汇编/" style="font-size: 15.71px;">汇编</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/tags/爱情/" style="font-size: 10px;">爱情</a> <a href="/tags/琐事/" style="font-size: 10px;">琐事</a> <a href="/tags/生活/" style="font-size: 11.43px;">生活</a> <a href="/tags/电影/" style="font-size: 10px;">电影</a> <a href="/tags/科幻/" style="font-size: 10px;">科幻</a> <a href="/tags/计算机原理/" style="font-size: 12.86px;">计算机原理</a> <a href="/tags/计算机网络/" style="font-size: 10px;">计算机网络</a> <a href="/tags/进阶/" style="font-size: 10px;">进阶</a> <a href="/tags/通信/" style="font-size: 10px;">通信</a> <a href="/tags/随感/" style="font-size: 10px;">随感</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/14/ceshi/">ceshi</a>
          </li>
        
          <li>
            <a href="/2018/10/25/ee/上网背后的流程/">上网背后的流程</a>
          </li>
        
          <li>
            <a href="/2018/09/15/life/这些衰败的日子/">这些衰败的日子</a>
          </li>
        
          <li>
            <a href="/2018/08/30/life/如懿如意/">如懿，如意</a>
          </li>
        
          <li>
            <a href="/2018/08/05/life/开心麻花几部电影/">开心麻花</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Lart Pang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>